if (self.CavalryLogger) { CavalryLogger.start_js(["OyeEDNy"]); }

__d("ChatPerfTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDuration=function(a){this.$1.duration=a;return this};c.setEndpoint=function(a){this.$1.endpoint=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setTabsOpen=function(a){this.$1.tabs_open=a;return this};return a}();c={duration:!0,endpoint:!0,event:!0,tabs_open:!0};f["default"]=a}),66);
__d("MessengerDivebarSizingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerDivebarSizingLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerDivebarSizingLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerDivebarSizingLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setMaxItemSlots=function(a){this.$1.max_item_slots=a;return this};c.setNumAdminedPages=function(a){this.$1.num_admined_pages=a;return this};c.setNumGroups=function(a){this.$1.num_groups=a;return this};c.setNumNearby=function(a){this.$1.num_nearby=a;return this};c.setNumPymm=function(a){this.$1.num_pymm=a;return this};c.setNumRecents=function(a){this.$1.num_recents=a;return this};c.setNumTopFriends=function(a){this.$1.num_top_friends=a;return this};c.setNumTopFriendsShown=function(a){this.$1.num_top_friends_shown=a;return this};c.setSidebarType=function(a){this.$1.sidebar_type=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={max_item_slots:!0,num_admined_pages:!0,num_groups:!0,num_nearby:!0,num_pymm:!0,num_recents:!0,num_top_friends:!0,num_top_friends_shown:!0,sidebar_type:!0};f["default"]=a}),66);
__d("ChatTabAddBackPreventedQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="2780995325249921"}),null);
__d("ChatTabAddBackPreventedQuery.graphql",["ChatTabAddBackPreventedQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"thread_id"}],c=[{kind:"Variable",name:"id",variableName:"thread_id"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,concreteType:"MessengerGroupNonAddableRecipientsConnection",kind:"LinkedField",name:"non_addable_recipients",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[d],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ChatTabAddBackPreventedQuery",selections:[{alias:null,args:c,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatTabAddBackPreventedQuery",selections:[{alias:null,args:c,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[e,d],storageKey:null}]},params:{id:b("ChatTabAddBackPreventedQuery_facebookRelayOperation"),metadata:{},name:"ChatTabAddBackPreventedQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("BaseAsyncLoader",["KeyedCallbackManager","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g={};function h(a,c,d){var e=new(b("KeyedCallbackManager"))(),f=!1,g=[];function h(){if(!g.length||f)return;f=!0;b("setTimeoutAcrossTransitions")(j,0)}function i(a){f=!1,a.forEach(e.unsubscribe.bind(e)),h()}function j(){var b={},c=[];g=g.filter(function(a){var d=e.getUnavailableResources(a);if(d.length){d.forEach(function(a){b[a]=!0});c.push(a);return!0}return!1});var h=Object.keys(b);h.length?d(a,h,c,k.bind(null,c),l.bind(null,c)):f=!1}function k(a,b){b=b.payload[c]||b.payload;e.addResourcesAndExecute(b);i(a)}function l(a){i(a)}return{get:function(a,b){a=e.executeOrEnqueue(a,b);b=e.getUnavailableResources(a);b.length&&(g.push(a),h())},getCachedKeys:function(){return Object.keys(e.getAllResources())},getNow:function(a){return e.getResource(a)||null},set:function(a){e.addResourcesAndExecute(a)}}}function a(a,b){throw new Error("BaseAsyncLoader can't be instantiated")}Object.assign(a.prototype,{_getLoader:function(){g[this._endpoint]||(g[this._endpoint]=h(this._endpoint,this._type,this.send));return g[this._endpoint]},get:function(a,b){return this._getLoader().get(a,b)},getCachedKeys:function(){return this._getLoader().getCachedKeys()},getNow:function(a){return this._getLoader().getNow(a)},reset:function(){g[this._endpoint]=null},set:function(a){this._getLoader().set(a)}});e.exports=a}),null);
__d("AjaxLoader",["AsyncRequest","BaseAsyncLoader","LogHistory"],(function(a,b,c,d,e,f){var g=b("LogHistory").getInstance("ajax_loader");function a(a,b){this._endpoint=a,this._type=b}Object.assign(a.prototype,b("BaseAsyncLoader").prototype);a.prototype.send=function(a,c,d,e,f){new(b("AsyncRequest"))().setURI(a).setData({ids:c}).setMethod("POST").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){e(a)}).setTimeoutHandler(10*1e3,function(a){f(),g.error("fetch_timeout","{}")}).setErrorHandler(function(a){f(),g.error("fetch_error",JSON.stringify({error_type:a.errorSummary,error_text:a.errorDescription}))}).send()};e.exports=a}),null);
__d("AsyncLoader",["AsyncRequest","BaseAsyncLoader"],(function(a,b,c,d,e,f){function a(a,b){this._endpoint=a,this._type=b}Object.assign(a.prototype,b("BaseAsyncLoader").prototype);a.prototype.send=function(a,c,d,e,f){new(b("AsyncRequest"))(a).setData({ids:c}).setHandler(e).setErrorHandler(f).setAllowCrossPageTransition(!0).setMethod("GET").setReadOnly(!0).send()};e.exports=a}),null);
__d("AjaxError",[],(function(a,b,c,d,e,f){a="ar:error";b="ar:timeout";c="ar:proxy error";d="ar:transport error";e="ar:http error";var g="ar:parse error",h="ar:noservice";f.ERROR=a;f.TIMEOUT=b;f.PROXY_ERROR=c;f.TRANSPORT_ERROR=d;f.SERVER_ERROR=e;f.PARSE_ERROR=g;f.SERVICE_UNAVAILABLE=h}),66);
__d("AjaxRequest",["AjaxError","ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","clearTimeout","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest(),i=[];function a(){var a=i;i=[];a.forEach(function(a){return a.abort()})}function j(a){a.onJSON=a.onError=a.onSuccess=null,c("clearTimeout")(a._timer),a.xhr&&a.xhr.readyState<4&&(a.xhr.abort(),a.xhr=null),i=i.filter(function(b){return b&&b!=a&&b.xhr&&b.xhr.readyState<4})}b=function(){function a(a,b,e){this.timeout=6e4,this.streamMode=!0,this.prelude=/^for \(;;\);/,this.status=null,this.$1=-1,this.$2=null,this.$3=0,this.$4=null,this.json=null,this.errorType=null,this.errorText=null,this.onJSON=null,this.onSuccess=null,this.onError=null,b instanceof c("URI")||(b=new(c("URI"))(b)),this.xhr=d("ZeroRewrites").getTransportBuilderForURI(b)(),e&&a=="GET"&&b.setQueryData(e),this.method=a,this.uri=b,this.xhr.open(a,c("killswitch")("ASYNC_REQUEST_STRINGIFY_URI_BEFORE_PASSING_TO_OPEN_METHOD")?b:b.toString())}a.supportsCORS=function(){return h};var b=a.prototype;b.send=function(a){var b=this,e=c("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=function(){return b.$5(e)};var f=this.timeout;f&&(this.$2=c("setTimeoutAcrossTransitions")(function(){b.errorType=d("AjaxError").TIMEOUT,b.errorText="timeout",b.$4=Date.now()-b.$3,b.onError&&b.onError(b),j(b)},f));i.push(this);this.method=="POST"&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.$3=Date.now();this.xhr.send(a?d("PHPQuerySerializer").serialize(a):"")};b.abort=function(){j(this)};b.toString=function(){var a="[AjaxRequest readyState="+this.xhr.readyState;this.errorType&&(a+=" errorType="+this.errorType,this.errorText&&(a+=" ("+this.errorText+")"));return a+"]"};b.toJSON=function(){var a={};this.json&&(a.json=this.json);this.status&&(a.status=this.status);this.errorType&&(a.errorType=this.errorType,a.uri=this.uri);this.errorText&&(a.errorText=this.errorText);this.$4&&(a.time=this.$4);return a};b.onJSONSafe=function(){this.onJSON&&this.onJSON(this)};b.onSuccessSafe=function(){this.onSuccess&&this.onSuccess(this)};b.onErrorSafe=function(){this.onError&&this.onError(this)};b.$6=function(){var a;try{this.status=this.xhr.status,a=this.xhr.statusText}catch(a){this.xhr.readyState>=4&&(this.errorType=d("AjaxError").TRANSPORT_ERROR,this.errorText=a.message);return}var b=this.status;if(b==null){this.errorType=d("AjaxError").ERROR;this.errorText="null status code";return}if(b===0&&!/^(file|ftp)/.test(this.uri.toString()))this.errorType=d("AjaxError").TRANSPORT_ERROR;else if(b>=100&&b<200)this.errorType=d("AjaxError").PROXY_ERROR;else if(b>=200&&b<300)return;else if(b>=300&&b<400)this.errorType=d("AjaxError").PROXY_ERROR;else if(b>=400&&b<500)this.errorType=d("AjaxError").SERVER_ERROR;else if(b===503)this.errorType=d("AjaxError").SERVICE_UNAVAILABLE;else if(b>500&&b<600)this.errorType=d("AjaxError").PROXY_ERROR;else if(b==1223)return;else b>=12001&&b<=12156?this.errorType=d("AjaxError").TRANSPORT_ERROR:(a="unrecognized status code: "+b,this.errorType=d("AjaxError").ERROR);this.errorText||(this.errorText=a)};b.$7=function(){var a,b=this.xhr.readyState;try{a=this.xhr.responseText||""}catch(a){b>=4&&(this.errorType=d("AjaxError").ERROR,this.errorText="responseText not available - "+a.message);return}while(this.xhr){var e=this.$1+1,f=this.streamMode?a.indexOf("\n",e):a.length;f<0&&b==4&&(f=a.length);if(f<=this.$1)break;var g=a;this.streamMode&&(g=a.substr(e,f-e).replace(/^\s*|\s*$/g,""));if(e===0&&this.prelude){var h=this.prelude;h.test(g)&&(g=g.replace(h,""))}this.$1=f;if(g){try{this.json=JSON.parse(g)}catch(b){h=a.match(/(<body[\S\s]+?<\/body>)/i);f=h!=null&&h.length>0?h[0]:null;h={message:b.message,"char":e,excerpt:(e===0&&f||g).substr(512)};this.errorType=d("AjaxError").PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(h);return}c("ErrorUtils").applyWithGuard(this.onJSONSafe,this)}}};b.$5=function(a){var b=this,c=this.xhr&&this.xhr.readyState||0;this.status==null&&c>=2&&this.$6();!this.errorType&&this.status!=null&&((c===3&&this.streamMode||c===4)&&a(function(){return b.$7()}));(this.errorType||c===4)&&(this.$4=Date.now()-this.$3,a.last(function(){b.errorType?b.onErrorSafe():b.onSuccessSafe(),j(b)}))};return a}();window.addEventListener&&d("UserAgent_DEPRECATED").firefox()&&window.addEventListener("keydown",function(a){a.keyCode===c("Keys").ESC&&a.prevent()},!1);window.attachEvent&&window.attachEvent("onunload",a);g["default"]=b}),98);
__d("ChannelConnectionEvents",[],(function(a,b,c,d,e,f){a="chat-connection/connected";b="chat-connection/reconnecting";c="chat-connection/shutdown";d="chat-connection/mute";e="chat-connection/unmute";f.CONNECTED=a;f.RECONNECTING=b;f.SHUTDOWN=c;f.MUTE_WARNING=d;f.UNMUTE_WARNING=e}),66);
__d("ChannelSubdomain",["Event","LogHistory","Run","WebStorage","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=d("LogHistory").getInstance("channel"),i="channel_sub:",j=7,k=100*1e3,l=null,m=null;function n(){var a=c("WebStorage").getLocalStorage();m&&(c("clearTimeout")(m),m=null);a&&l!=null&&a.removeItem(i+l);l=null}function a(a,b,e){e===void 0&&(e=!1);a=(a-1)*j;e&&(m&&c("clearTimeout")(m),l=m=null);b==null&&(b=Math.floor(Math.random()*a));if(l==null){var f=c("WebStorage").getLocalStorage();if(f){e=[];for(var g=0;g<f.length;g++){var o=f.key(g);if(o!=null&&o.indexOf(i)===0){var p=parseInt(o.substr(i.length),10);e[p]=parseInt(f.getItem(o),10)}}p=Date.now()-k;for(var o=0;o<a;o++){g=(o+b)%a;if(!e[g]||e[g]<p){l=g;break}}if(l!=null){g=function a(){if(l==null)return;try{f.setItem(i+l,Date.now().toString())}catch(a){h.warn("subdomain set failed",a.message)}m=c("setTimeoutAcrossTransitions")(a,k/2)};g()}else h.warn("no channel subdomain",e);typeof window.onpageshow!=="undefined"?c("Event").listen(window,"pagehide",n):d("Run").onUnload(n)}else l=b}return l==null?null:l%j}g.clear=n;g.allocate=a}),98);
__d("ChatproxyClientErrorsTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setBatchSize=function(a){this.$1.batch_size=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorReason=function(a){this.$1.error_reason=a;return this};c.setErrorText=function(a){this.$1.error_text=a;return this};c.setJsEventTimeMs=function(a){this.$1.js_event_time_ms=a;return this};c.setMultiViewSubscription=function(a){this.$1.multi_view_subscription=a;return this};c.setRequestID=function(a){this.$1.request_id=a;return this};c.setResponseHeaders=function(a){this.$1.response_headers=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSessionIDStr=function(a){this.$1.session_id_str=a;return this};c.setStatusCode=function(a){this.$1.status_code=a;return this};c.setSubscriberID=function(a){this.$1.subscriber_id=a;return this};c.setTopicPrefixes=function(a){this.$1.topic_prefixes=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setURL=function(a){this.$1.url=a;return this};c.setXhrReadyState=function(a){this.$1.xhr_ready_state=a;return this};c.setXhrStatus=function(a){this.$1.xhr_status=a;return this};return a}();c={app_version:!0,batch_size:!0,error_message:!0,error_reason:!0,error_text:!0,js_event_time_ms:!0,multi_view_subscription:!0,request_id:!0,response_headers:!0,session_id:!0,session_id_str:!0,status_code:!0,subscriber_id:!0,topic_prefixes:!0,url:!0,xhr_ready_state:!0,xhr_status:!0};f["default"]=a}),66);
__d("DocRPC",["ErrorUtils","FBLogger"],(function(a,b,c,d,e,f){var g,h={_apis:{},_dispatch:function(a){var c;try{a=JSON.parse(a)}catch(b){throw new Error('DocRPC unparsable dispatch: "'+a+'"')}if(Object.prototype.hasOwnProperty.call(h._apis,a.api)){var d=h._apis[a.api];d[a.method]&&(c=(g||(g=b("ErrorUtils"))).applyWithGuard(d[a.method],d,a.args))}c===void 0&&(c=null);return JSON.stringify(c)},publish:function(a,b){h._apis[b]=a},proxy:function(a,c,d){var e={};d.forEach(function(d){e[d]=function(){var e={api:c,method:d,args:Array.prototype.slice.call(arguments)},f;try{if(a.closed)throw new Error("DocRPC window closed");f=a.DocRPC._dispatch(JSON.stringify(e))}catch(a){b("FBLogger")("doc_rpc").catching(a).warn("Encountered an error duing proxy call");return}if(typeof f==="string")try{f=JSON.parse(f)}catch(a){b("FBLogger")("doc_rpc").catching(a).mustfix("DocRPC %s.%s unparsable return: %s",c,d,f);throw new Error("DocRPC "+c+"."+d+' unparsable return: "'+f+'"')}return f}});return e}};e.exports=a.DocRPC=h}),null);
__d("ChannelTransport",["AjaxRequest","ChannelConstants","ChatproxyClientErrorsTypedLogger","DocRPC","LogHistory","ODS","TimeSlice","URI","bind","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g,h="BROWSER_REFUSED_TO_GET_FAILURE_REASON_HEADER",i=b("LogHistory").getInstance("channel");function j(a){var c=new(b("ChatproxyClientErrorsTypedLogger"))();c.setStatusCode(a.status);if(a.xhr!=null){var d;try{d=a.xhr.getResponseHeader("x-fb-chat-failure-reason")}catch(a){d=h}d&&c.setErrorReason(d)}c.setErrorMessage(a.errorType);a.uri!==void 0&&c.setURL(a.uri.getPath());c.log()}function k(){return(1048576*Math.random()|0).toString(36)}function l(a){return a!==null&&a!==void 0&&!isNaN(a)&&isFinite(a)&&0<=a&&a<=6}function m(a,c){var d="";l(a.subdomain)&&(d=a.subdomain+"-");var e=a.host;e=e===null||e===void 0?"edge-chat":a.host;c=new(g||(g=b("URI")))(c).setDomain(d+e+"."+a.domain).setPort(a.port).setSecure(new g(window.location.href).isSecure());return c}function n(a){var c={partition:a.partition,cb:k(),failure:a.pingFailuresOnSubdomain};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);c=m(a,"/p").setQueryData(c);i.log("start_p",{uri:c.toString()});var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);var e=function(b){i.log("finish_p",{xhr:b.toJSON?b.toJSON():b,subdomain:a.subdomain,fullHost:a.fullHost})};d.onError=function(c){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendP.error");j(d);e(c);if(a.subdomain===null)return;l(a.subdomain)&&(a.pingFailuresOnSubdomain++,a.subdomain++,a.subdomain>6&&(a.subdomain=0))};d.timeout=a.P_TIMEOUT;d.onSuccess=function(a){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendP.success"),e(a)};d.send()}function o(a,c,d){var e=new Image(),f=0,g=function(a){e.abort();return a?c():d()};e.onload=b("TimeSlice").guard(function(){i.log("ping_ok",{duration:Date.now()-f}),b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPing.success"),g(!0)},"ChannelTransport image.onload");e.onerror=b("TimeSlice").guard(function(){n(a),b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPing.error"),j(e),g(!1)},"ChannelTransport image.onerror");var h=b("setTimeoutAcrossTransitions")(e.onerror,1e4);e.abort=function(){h&&(b("clearTimeout")(h),h=null),e.onload=e.onerror=null};var l={partition:a.partition,cb:k()};a.sticky_token&&(l.sticky_token=a.sticky_token);a.sticky_pool&&(l.sticky_pool=a.sticky_pool);a.lastRequestErrorReason&&(l.reason=a.lastRequestErrorReason,a.lastRequestErrorReason=null);a.uid&&a.viewerUid&&(l.uid=a.uid,l.viewer_uid=a.viewerUid);f=Date.now();e.src=m(a,"/ajax/chatproxy-ping").setQueryData(l);return e}function a(a){var c={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:k(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);a.is_offline||a.shouldSuppressPresence?c.state="offline":c.state="active";if(c.state===a.lastPresenceState)return;a.lastPresenceState=c.state;a.profile&&(c.profile=a.profile);a.capabilities&&(c.cap=a.capabilities);c=m(a,"/active_ping").setQueryData(c);var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);d.onError=function(a){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendActivePing.error"),i.warn("active_ping_error"),j(d)};d.onSuccess=function(a){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendActivePing.success"),i.log("active_ping_ok")};d.timeout=a.P_TIMEOUT;d.send()}function p(a,c,d,e){var f=new Date(),g=-1;a.userActive>0&&(g=(f-a.userActive)/1e3|0,g<0&&i.warn("idle_regression",{idleTime:g,now:f.getTime(),userActive:a.userActive}));f={channel:a.user_channel,seq:a.seq,partition:a.partition,clientid:a.sessionID,cb:k(),idle:g,qp:"y",cap:0};a.state.aiq&&(f.aiq=a.state.aiq);a.ready&&((a.seqTurSentAt==-1||a.seqTurSentAt==a.seq)&&(f.tur=a.timeUntilReady,f.qpmade=a.queueMade,a.seqTurSentAt=a.seq));f.pws=a.pws;a.sequenceId>0&&(f.isq=a.sequenceId);f.msgs_recv=a.estimatedReceived;a.uid&&a.viewerUid&&(f.uid=a.uid,f.viewer_uid=a.viewerUid);a.sticky_token?f.sticky_token=a.sticky_token:(f.request_batch=1,a.msgr_region&&(f.msgr_region=a.msgr_region));a.sticky_pool&&(f.sticky_pool=a.sticky_pool);"trace_id"in a&&(f.traceid=a.trace_id);a.is_offline||a.shouldSuppressPresence?f.state="offline":a.userActive>0&&g<60&&(f.state="active");a.lastPresenceState=f.state;a.streamingCapable&&(f.mode="stream",f.format="json");a.profile&&(f.profile=a.profile);a.capabilities&&(f.cap=a.capabilities);g=m(a,"/pull").setQueryData(f);f="GET";var h=new(b("AjaxRequest"))(f,g);b("AjaxRequest").supportsCORS()&&(h.xhr.withCredentials=!0);h.timeout=a.streamingCapable?a.STREAMING_TIMEOUT:a.LONGPOLL_TIMEOUT;h.onJSON=function(a){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPull.json"),c(a)};h.onSuccess=function(a){b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPull.success"),d(a)};h.onError=function(){var c=this.status==12002&&this._time>=a.MIN_12002_TIMEOUT||this.status==504&&this._time>=a.MIN_504_TIMEOUT,f=c?d:e;c?b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPull.success"):(b("ODS").bumpEntityKey(2966,"ChannelTransport","sendPull.error"),j(h));return f&&f.apply(this,arguments)};h.send();a.inStreaming=a.streamingCapable;return h}function q(a){this.manager=a,this.init&&this.init()}function c(a){q.apply(this,arguments)}Object.assign(c.prototype,{logName:"CORS",enterState:function(a,c){this._request&&(this._request.abort(),this._request=null);a=="init"&&b("setTimeoutAcrossTransitions")(b("bind")(this.manager,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),0);if(!/pull|ping/.test(a))return;var d=this.manager;a=="ping"?this._request=o(c,b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=p(c,b("bind")(d,"_processTransportData",c.stateId),b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});function d(a){i.log("iframe_init_constructor"),q.apply(this,arguments),this._iframe=document.createElement("iframe"),this._iframe.style.display="none",document.body.appendChild(this._iframe),b("DocRPC").publish(this,"outerTransport")}Object.assign(d.prototype,{logName:"iframe",_initIframe:function(a){i.log("iframe_init_start");window.onchanneliframeready=function(){i.log("iframe_resources");return a.resources};window.onchanneliframeloaded=function(){i.log("iframe_loaded")};if(a){this._iframeURI=m(a,a.path);if(a.resources){var c=this._iframeURI.getDomain();a.resources=a.resources.map(function(a){var d=new(g||(g=b("URI")))(a);return d.getPath().startsWith("/intern/rsrc.php")&&d.getQueryData().origin!==void 0?d.addQueryData("origin",c).toString():a})}}else this._iframeURI="about:blank";this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI),i.log("iframe_uri_set")}catch(c){i.error("iframe_uri_set_error",c),this.exitState({status:b("ChannelConstants").ERROR,stateId:a.stateId},c+"")}},enterState:function(a,c){a=="init"?this._initIframe(c):/idle|ping|pull/.test(a)?this._iframeProxy?this._iframeProxy.enterState.apply(this._iframeProxy,arguments):a!="idle"&&this.exitState({status:b("ChannelConstants").ERROR,stateId:c.stateId},"iframe not yet loaded"):a=="shutdown"&&this._initIframe()},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments)},exitState:function(a){this.manager.state=="init"&&a.status==b("ChannelConstants").OK&&(this._iframeProxy=b("DocRPC").proxy(this._iframe.contentWindow,"innerTransport",["enterState"],(this._iframeURI+"").replace(/iframe.*/,"")));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments)}});function f(){this.init=this.init.bind(this),q.apply(this,arguments)}Object.assign(f.prototype,{logName:"iframe(inner)",init:function(){b("DocRPC").publish(this,"innerTransport");try{var a=b("DocRPC").proxy(window.parent,"outerTransport",["_processTransportData","exitState"],top.DocRPC.origin);Object.assign(this,a);this.exitState({status:b("ChannelConstants").OK,stateId:1e6})}catch(a){i.error("iframe_inner_init_error",a)}},enterState:function(a,c){this._request&&(this._request.abort(),this._request=null),a=="ping"?this._request=o(c,b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=p(c,b("bind")(this,"_processTransportData",c.stateId),b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});e.exports={isSubdomain:l,getURI:m,Transport:q,CORSTransport:c,IframeTransport:d,IframeInnerTransport:f,sendActivePing:a}}),null);
__d("ChatProxyConnectionState",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.auxiliaryIrisQueues={},this.aiq=null}var b=a.prototype;b.subscribeIrisQueue=function(a,b){this.auxiliaryIrisQueues[a]=b,this.updateCaches()};b.unsubscribeIrisQueue=function(a){delete this.auxiliaryIrisQueues[a],this.updateCaches()};b.updateCaches=function(){var a=[];for(var b in this.auxiliaryIrisQueues)Object.prototype.hasOwnProperty.call(this.auxiliaryIrisQueues,b)&&(a.push(b),a.push(this.auxiliaryIrisQueues[b]));a.length===0?this.aiq=null:this.aiq=a.join(",")};return a}();f["default"]=a}),66);
__d("FBAjaxRequest",["AjaxError","AjaxRequest","getAsyncParams"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d,e){e=babelHelpers["extends"]({},c("getAsyncParams")(b),e);b=a.call(this,b,d,e)||this;b.$FBAjaxRequest1=e;b.streamMode=!1;return b}var e=b.prototype;e.onJSONSafe=function(){this.json&&(this.json.error&&(this.errorType=d("AjaxError").SERVER_ERROR,this.errorText="AsyncResponse error: "+this.json.error),this.json=this.json.payload),a.prototype.onJSONSafe.call(this)};e.send=function(b){a.prototype.send.call(this,babelHelpers["extends"]({},b,this.$FBAjaxRequest1))};return b}(c("AjaxRequest"));g["default"]=a}),98);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("MovingStat",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a>0?a:6e4,this.$2=0,this.$3=0,this.$5={t:new Date(),count:0,v:0},this.$4=this.$5}var b=a.prototype;b.add=function(a){this.$2+=a;this.$3++;var b=new Date();if(b-this.$5.t<1e3){this.$5.v+=a;this.$5.count++;return}this.$5.next={t:b,v:a,count:1};this.$5=this.$5.next;this.$6()};b.tally=function(a){a===void 0&&(a=1e3);this.$6();return{sum:this.$2,count:this.$3,timeAverage:this.$2*a/this.$1}};b.$6=function(){var a=new Date()-this.$1;while(this.$4&&this.$4.next&&this.$4.t<a)this.$2-=this.$4.v,this.$3-=this.$4.count,this.$4=this.$4.next};return a}();f["default"]=a}),66);
__d("Dcode",[],(function(a,b,c,d,e,f){var g,h={},i={_:"%",A:"%2",B:"000",C:"%7d",D:"%7b%22",E:"%2c%22",F:"%22%3a",G:"%2c%22ut%22%3a1",H:"%2c%22bls%22%3a",I:"%2c%22n%22%3a%22%",J:"%22%3a%7b%22i%22%3a0%7d",K:"%2c%22pt%22%3a0%2c%22vis%22%3a",L:"%2c%22ch%22%3a%7b%22h%22%3a%22",M:"%7b%22v%22%3a2%2c%22time%22%3a1",N:".channel%22%2c%22sub%22%3a%5b",O:"%2c%22sb%22%3a1%2c%22t%22%3a%5b",P:"%2c%22ud%22%3a100%2c%22lc%22%3a0",Q:"%5d%2c%22f%22%3anull%2c%22uct%22%3a",R:".channel%22%2c%22sub%22%3a%5b1%5d",S:"%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a",T:"%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a",U:"%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",V:"%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a",W:"%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a",X:"%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1",Y:"%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",Z:"%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a"};(function(){var a=[];for(var b in i)h[i[b]]=b,a.push(i[b]);a.reverse();g=new RegExp(a.join("|"),"g")})();a={encode:function(a){return encodeURIComponent(a).replace(/([_A-Z])|%../g,function(a,b){return b?"%"+b.charCodeAt(0).toString(16):a}).toLowerCase().replace(g,function(a){return h[a]})},decode:function(a){return decodeURIComponent(a.replace(/[_A-Z]/g,function(a){return i[a]}))}};e.exports=a}),null);
__d("PresenceCookieManager",["Cookie","CurrentUser","Dcode","ErrorUtils","PresenceInitialData","PresenceUtil","WebStorage"],(function(a,b,c,d,e,f,g){var h="presence",i={},j=null,k=null;function l(a){var b=c("Cookie").get(h)||"";if(b.length===0)return null;return b[0]!==a?null:b.substring(1)}function m(a,b){c("Cookie").set(h,a+b)}function n(){return!(c("PresenceInitialData").useWebStorage||!1)?null:c("WebStorage").getSessionStorage()}function o(){var a=n();a=a!=null?a.getItem(h):null;return a!=null?a.substring(1):null}function p(a){var b=n();if(b==null)return!1;b.setItem(h,"E"+a);return!0}function q(){var a=o();return a!=null?a:l("E")}function r(a){a=a.state;if(a==null)return"";var b=l("S")||"",d=c("CurrentUser").isWorkUser()?"w":"f";a=c("CurrentUser").isWorkUser()?a.t3w:a.t3;a=a!=null?a.length>0:!1;var e=b.indexOf(d)!==-1;e&&!a&&(b=b.replace(d,""));!e&&a&&(b+=d);return b}function s(a,b){var c=p(a);c?m("S",b):m("E",a)}function t(){try{var a=q();j!==a&&(j=a,k=null,a&&(a=d("Dcode").decode(a),k=JSON.parse(a)));if(k){if(k.user&&k.user!==c("CurrentUser").getID())return null;return k.v!==c("PresenceInitialData").cookieVersion?null:k}}catch(a){}return null}function u(){return{v:c("PresenceInitialData").cookieVersion,time:v(),user:c("CurrentUser").getID()}}function v(){return parseInt(Date.now()/1e3,10)}function w(a){var b=d("Dcode").encode(JSON.stringify(a));d("PresenceUtil").hasUserCookie()&&s(b,r(a))}function a(a,b){i[a]=b}function b(){var a=t();if(a&&a.v&&c("PresenceInitialData").cookieVersion<a.v)return;var b=u();for(var d in i)b[d]=c("ErrorUtils").applyWithGuard(i[d],i,[a&&a[d]],function(a){a.presence_subcookie=d});w(b)}function e(){var a=x("state");c("Cookie").clear(h);var b=c("WebStorage").getSessionStorage();b!=null&&b.removeItem(h);if(a){b=u();b.state=a;w(b)}}function x(a){var b=t();return!b?null:b[a]}g.register=a;g.store=b;g.clear=e;g.getSubCookie=x}),98);
__d("InstantGamesPresenceProperties",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1}var b=a.prototype;b.addInstantGamePresence=function(){this.$1=!0};b.removeInstantGamePresence=function(){this.$1=!1};b.isActiveGamePresence=function(){return this.$1};return a}();b=new a();c=b;f["default"]=c}),66);
__d("PresenceProperties",["ChannelConstants","InstantGamesPresenceProperties","WorkplaceChatHelper"],(function(a,b,c,d,e,f,g){a=function(){function a(){this.$1=d("ChannelConstants").CAPABILITY_VOIP_INTEROP}var b=a.prototype;b.getProperties=function(){d("WorkplaceChatHelper").isDesktopChatApp()&&(this.$1|=d("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP);c("InstantGamesPresenceProperties").isActiveGamePresence()?this.$1|=d("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME:this.$1&=~d("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME;return this.$1};return a}();b=new a();e=b;g["default"]=e}),98);
__d("SystemEvents",["ArbiterMixin","Cookie","ExecutionEnvironment","SystemEventsInitialData","TimeSlice","UserActivity","UserAgent_DEPRECATED","clearTimeout","mixin","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3;b=function(b){babelHelpers.inheritsLoose(e,b);function e(){var e;e=b.call(this)||this;e.$SystemEvents11=function(){var a=e.$SystemEvents7();e.$SystemEvents2!=a&&(e.$SystemEvents2=a,e.inform(e.USER,a));e.$SystemEvents12()};e.USER="SystemEvents/USER";e.ONLINE="SystemEvents/ONLINE";e.TIME_TRAVEL="SystemEvents/TIME_TRAVEL";e.$SystemEvents1=c("SystemEventsInitialData").ORIGINAL_USER_ID;e.$SystemEvents2=e.$SystemEvents1;e.$SystemEvents3=a.navigator!=null?a.navigator.onLine:!1;e.$SystemEvents4=Date.now();d("ExecutionEnvironment").canUseDOM&&e.$SystemEvents6();return e}var f=e.prototype;f.isPageOwner=function(a){return(a||this.$SystemEvents7())==this.$SystemEvents1};f.isOnline=function(){return!!(d("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};f.checkTimeTravel=function(){var a=Date.now(),b=a-this.$SystemEvents4;this.$SystemEvents4=a;(b<0||b>1e4)&&this.inform(this.TIME_TRAVEL,b)};f.$SystemEvents6=function(){this.$SystemEvents8(),this.$SystemEvents9(),this.$SystemEvents10()};f.$SystemEvents8=function(){var a=this,b=c("TimeSlice").guard(function(){a.$SystemEvents3||(a.$SystemEvents3=!0,a.inform(a.ONLINE,a.$SystemEvents3))},"SystemEvents onOnline"),e=c("TimeSlice").guard(function(){a.$SystemEvents3&&(a.$SystemEvents3=!1,a.inform(a.ONLINE,a.$SystemEvents3))},"SystemEvents onOffline");d("UserAgent_DEPRECATED").ie()?d("UserAgent_DEPRECATED").ie()>=11?(window.addEventListener("online",b,!1),window.addEventListener("offline",e,!1)):d("UserAgent_DEPRECATED").ie()>=8?window.attachEvent("onload",function(){document.body.ononline=b,document.body.onoffline=e}):c("setIntervalAcrossTransitions")(function(){(navigator.onLine?b:e)()},h):window.addEventListener&&(window.addEventListener("online",b,!1),window.addEventListener("offline",e,!1))};f.$SystemEvents12=function(){c("clearTimeout")(this.$SystemEvents5),this.$SystemEvents5=c("setTimeoutAcrossTransitions")(this.$SystemEvents11,h)};f.$SystemEvents9=function(){var a=this;c("UserActivity").subscribe(function(){a.$SystemEvents12()});this.$SystemEvents12()};f.$SystemEvents10=function(){c("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),h)};f.$SystemEvents7=function(){return c("Cookie").get("c_user")||"0"};return e}(c("mixin")(d("ArbiterMixin")));e=new b();g["default"]=e}),99);
__d("ChannelManager",["errorCode","AjaxError","AjaxRequest","Arbiter","AsyncRequest","ChannelClientID","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChatProxyConnectionState","ChatReliabilityInstrumentation","ChatVisibility","DTSG","DesktopWebMessageTypesSitevarConfig","Env","FBAjaxRequest","FBMqttChannel","FantailLogger","ISB","LogHistory","MovingStat","ODS","PresenceCookieManager","PresenceProperties","PresenceUtil","Promise","Random","SystemEvents","URI","UserActivity","clearTimeout","cr:1579987","emptyFunction","requestAnimationFrameAcrossTransitions","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h,i,j=b("LogHistory").getInstance("channel_manager"),k=b("emptyFunction"),l=new(b("Promise"))(function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","transportPromise.cleanup"),k=a}),m={idle:{ok:"init!"},init:{ok:"pull!",error:"reconnect",sys_online:"init",sys_timetravel:"init"},pull:{ok:"pull!",error:"ping",error_missing:"pull",error_msg_type:"pull",refresh_0:"reconnect",refresh_110:"reconnect",refresh_111:"reconnect",refresh_112:"pull",refresh_113:"pull",refresh_117:"reconnect"},ping:{ok:"pull!",error:"ping",error_stale:"reconnect!"},reconnect:{ok:"init!",error:"reconnect",sys_online:"reconnect",sys_timetravel:"reconnect"},shutdown:{},_all:{error_max:"shutdown!",error_shutdown:"shutdown!",sys_owner:"reconnect",sys_nonowner:"idle!",sys_online:"ping",sys_offline:"idle!",sys_timetravel:"ping"}},n={state:new(b("ChatProxyConnectionState"))(),userActive:Date.now(),created:Date.now(),ready:!1,seqTurSentAt:-1,queueMade:"",sequenceId:0,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,pws:"fresh",estimatedReceived:0,sessionID:b("ChannelClientID").getID(),capabilities:b("PresenceProperties").getProperties(),streamingCapable:!1,inStreaming:!1,shouldSuppressPresence:b("cr:1579987")?b("cr:1579987").shouldSuppress():!1,LONGPOLL_TIMEOUT:6e4,STREAMING_TIMEOUT:6e4,P_TIMEOUT:3e4,IFRAME_LOAD_TIMEOUT:3e4,MIN_RETRY_INTERVAL:5e3,MAX_RETRY_INTERVAL:32e4,MIN_12002_TIMEOUT:9e3,MIN_504_TIMEOUT:2e4,STALL_THRESHOLD:18e4,JUMPSTART_THRESHOLD:9e4,MIN_INIT_PROBE_DELAY:3e3,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12e3,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:1e4,PROBE_DELAY:6e4,PROBE_HEARTBEATS_INTERVAL_LOW:1e3,PROBE_HEARTBEATS_INTERVAL_HIGH:5e3,STREAMING_EXIT_STATE_ON_CONTINUE:!1},o=1,p={},q=0;function r(){b("ODS").bumpEntityKey(2231,"ChannelManager","getLastSuccess.cleanup");var a=b("AsyncRequest").lastSuccessTime;return a?Math.round((Date.now()-a)/1e3):-1}function s(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","_getConfig.cleanup");return Object.prototype.hasOwnProperty.call(n,a)?n[a]:c}function t(){b("ODS").bumpEntityKey(2231,"ChannelManager","_getInfo.cleanup");var a={};s("host")&&(a[s("user_channel")]=s("seq",0));return a}function u(a){b("ODS").bumpEntityKey(2231,"ChannelManager","_bumpDelay.cleanup"),a?(q=0,p={}):q++}a={state:"idle",nextState:null,proxyDown:!1,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],backoff:!1,sessionRegistered:!1,_initTimer:null,_deferredTransition:null,_transportRate:null,_shutdownHint:null,init:function(a,c){var d=this;b("ODS").bumpEntityKey(2231,"ChannelManager","init.cleanup");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"initializing sessionid:%s at iris-seq:%s",n.sessionID,n.sequenceId);this.init=b("emptyFunction");b("Arbiter").subscribe(b("ChannelConstants").GET_RTI_SESSION_REQUEST,function(a,b){d.informCurrentSession()});b("Arbiter").subscribe(b("ChannelConstants").CONSOLE_LOG,function(a,b){});b("requestAnimationFrameAcrossTransitions")(function(){b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"using session id: %s at seq: %s {%s} with sticky: %s/%s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool),b("UserActivity").subscribe(function(){var a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"user activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,d.state,a);d.state=="pull"&&(n.userActive=Date.now(),b("ChannelTransport").sendActivePing(n))}),b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(a){a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entity presence activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,d.state,a);d.state=="pull"&&(n.userActive=Date.now())})});b("PresenceCookieManager").register("ch",t);var e=this.getConfig("max_conn",2);n.subdomain=b("ChannelSubdomain").allocate(e);b("ChannelTransport").isSubdomain(n.subdomain)||(b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"invalid subdomain from ChannelSubdomain: %s",n.subdomain),n.subdomain=null);this._transportRate=new(b("MovingStat"))(3e4);e=b("AjaxRequest").supportsCORS()?"CORSTransport":"IframeTransport";b("ODS").bumpEntityKey(2966,"ChannelManager","transport_chosen."+e);this.transport=new(b("ChannelTransport")[e])(this);k(this.transport);a&&this.enterState(a,c);b("requestAnimationFrameAcrossTransitions")(function(){d._initMonitors()});if(this.getConfig("fullHost")&&b("AjaxRequest").supportsCORS()){if(this.getConfig("tryStreaming")){e=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._probeTest,e)}if(this.getConfig("trySSEStreaming")){a=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._sseProbeTest,a)}}},_mqttInit:function(){var a=this;b("ODS").bumpEntityKey(2231,"ChannelManager","_mqttInit.cleanup");b("FBMqttChannel").subscribe("/legacy_web",function(c){try{c=JSON.parse(c);a._processMqttMessage(c)}catch(a){b("ODS").bumpEntityKey(2966,"ChannelManager","mqttInit."+a.message)}})},configure:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","configure.cleanup");for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];j.log("configure",JSON.stringify(c));c.forEach(function(a){return Object.assign(n,a)});this._indicateLbInfoUpdated("reconnect",JSON.stringify(c));b("Arbiter").inform(b("ChannelConstants").ON_CONFIG,this)},getConfig:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","getConfig.cleanup");return s(a,c)},getCompleteConfig:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","getCompleteConfig.cleanup");return n},isShutdown:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","isShutdown.cleanup");return this.state=="shutdown"},shouldIdle:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","shouldIdle.cleanup");return!(b("SystemEvents").isPageOwner()&&b("SystemEvents").isOnline())},_sendIframeError:function(a){b("ODS").bumpEntityKey(2231,"ChannelManager","_sendIframeError.cleanup");a=new(b("AsyncRequest"))().setURI("/ajax/presence/reconnect.php").setData({reason:a,fb_dtsg:b("DTSG").getToken()}).setOption("suppressErrorHandlerWarning",!0).setOption("retries",1).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0);a.specifiesWriteRequiredParams()&&a.send()},_getDelay:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","_getDelay.cleanup");var a=Math.min(n.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,q-1)),n.MAX_RETRY_INTERVAL);this.proxyDown&&"proxy_down_delay_millis"in n&&(a=n.proxy_down_delay_millis);this.proxyDown=!1;return Math.floor(a*(1+Math.random()*.5))},resetDelay:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","resetDelay.cleanup"),u(!0)},enterState:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","enterState.cleanup");this._inEnterState&&(j.warn("enterstate_recursion",JSON.stringify({state:this.state,args:arguments})),b("ChatReliabilityInstrumentation").logERROR("enterstate_recursion"));this._inEnterState=!0;try{this._enterState.apply(this,arguments),this._inEnterState=!1}catch(a){this._inEnterState=!1;throw a}},_enterState:function(a){var c=this;b("ODS").bumpEntityKey(2231,"ChannelManager","_enterState.cleanup");if(!(/init/.test(a)||/reconnect/.test(a)))return;var d=this.backoff?this._getDelay():0;this.backoff=!1;if(this.isShutdown()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"not executing state due to shutdown mode: %s",a);return}if(a!="idle!"&&this.shouldIdle()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"forced idleness");return}o++;n.stateId=o;b("clearTimeout")(this._deferredTransition);this._deferredTransition=null;!this.transport?(l.then(function(a){return a.enterState("idle")}),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState("idle");this.state="idle";this.nextState=null;if(/!$/.test(a)){if(this._transportRate){var e=this._transportRate.tally().timeAverage,f=this.getConfig("MAX_CHANNEL_STATES_PER_SEC",1);e>=f&&(this._throttled||(this._throttled=!0,j.warn("throttled","{}"),b("Arbiter").inform(b("ChannelConstants").THROTTLED,e)),d=1e3/f)}}else/#$/.test(a)||(d=this._getDelay());a=a.replace(/\W*$/,"");if(!m[a]){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"invalid state: %s",a);throw new Error("invalid state:"+a)}var g=Array.from(arguments),h={};if(d<=0){h.state=a;this._transportRate&&this._transportRate.add(1);this.state=a;var i=this["_enter_"+this.state];i&&(g.shift(),i.apply(this,g));/init|idle|pull|ping/.test(this.state)&&(n.streamingCapable&&/pull/.test(this.state)&&(this.heartbeats=[]),n.is_offline=!b("ChatVisibility").isOnline(),n.capabilities=b("PresenceProperties").getProperties(),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entering transport state: %s",this.state),!this.transport?(l.then(function(a){return a.enterState(c.state,n)}),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState(this.state,n),this.state=="ping"&&(h.url=b("ChannelTransport").getURI(n).toString(),h.port=n.port||"undefined"))}else this.state="idle",this.nextState=a,h.state=this.state,h.delay=d,h.nextState=a,g[0]=a+"#",this._deferredTransition=b("setTimeoutAcrossTransitions")(function(){c._deferredTransition=null,c.enterState.apply(c,g)},d);/pull/.test(a)&&(h.client_id=n.sessionID,h.streaming=n.inStreaming);b("Arbiter").inform(b("ChannelConstants").ON_ENTER_STATE,h)},exitState:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","exitState.cleanup");var d=a.stateId,e=a.status;if(this.isShutdown()||d<o)return;var f=this.state,g=Array.from(arguments);g[0]=a.status;var h={state:f,status:e};/pull/.test(f)&&(h.client_id=n.sessionID,h.streaming=n.inStreaming);/ping/.test(f)&&e!=b("ChannelConstants").OK&&(h.url=b("ChannelTransport").getURI(n).toString());this.nextState&&(h.nextState=this.nextState);c&&c.errorType?(n.lastRequestErrorReason=c.errorType,h.xhr=c.toJSON?c.toJSON():c,c.errorType==b("AjaxError").SERVICE_UNAVAILABLE&&(b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got 5xx http status code, setting long delay"),this.proxyDown=!0),delete h.xhr.json):e!=b("ChannelConstants").OK&&(n.lastRequestErrorReason=e);c&&c.json&&(c.json.t&&(h.t=c.json.t),c.json.reason&&(h.reason=c.json.reason),c.json.seq&&(h.seq=c.json.seq));b("Arbiter").inform(b("ChannelConstants").ON_EXIT_STATE,h);var i=this["_exit_"+f];i&&(e=i.apply(this,g)||e);e!=b("ChannelConstants").OK&&(u(),p[f]=(p[f]||0)+1);var k=m[this.nextState||f][e]||m._all[e],l=k&&k.replace(/!*$/,"");l||(j.error("terminal_transition",JSON.stringify(h)),this._shutdownHint=b("ChannelConstants").HINT_INVALID_STATE,k="shutdown!",b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"entering shutdown state"));this._lastState=f;this._lastStatus=e;this.enterState(k)},_processTransportData:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","_processTransportData.cleanup"),this._processTransportData0(a,c,c.json)},_processTransportData0:function(a,c,d){b("ODS").bumpEntityKey(2231,"ChannelManager","_processTransportData0.cleanup");var e=d.t;"s"in d&&(d.seq=d.s,delete d.s);if(d.u&&n.user&&d.u!=n.user){j.warn("misguided_msg",JSON.stringify({user:n.user,target:d.u}));this._reportProxyMisguidedMsg(d.u,n.user);return}var f=n.seq;"seq"in d&&(n.seq=d.seq,b("cr:1579987")&&b("cr:1579987").doSync());switch(e){case"continue":n.inStreaming&&this.heartbeats.length<1&&(n.streamingCapable=!1,j.log("switch_to_longpoll","{}"),b("setTimeoutAcrossTransitions")(this._probeTest,n.PROBE_DELAY));u(!0);(!n.inStreaming||n.STREAMING_EXIT_STATE_ON_CONTINUE)&&this.exitState({status:b("ChannelConstants").OK,stateId:a});break;case"refresh":case"refreshDelay":b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got refresh with reason: %s",d.reason);this.exitState({status:"refresh_"+(d.reason||0),stateId:a},c);break;case"backoff":b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"server told client to back off");u();this.backoff=!0;break;case"lb":var g=d.lb_info;if(g){n.sticky_token=g.sticky;"pool"in g&&(n.sticky_pool=g.pool);if("sd"in g){var h=g.subdomain;b("ChannelTransport").isSubdomain(h)&&(n.subdomain=g.subdomain)}"vip"in g&&(n.host=g.vip);this._indicateLbInfoUpdated("chatproxy",JSON.stringify(d))}else j.error("missing_lb_info","{}");break;case"test_streaming":b("setTimeoutAcrossTransitions")(this._probeTest,500);break;case"fullReload":b("PresenceCookieManager").clear();j.log("full_reload","{}");this.sessionRegistered=!0;this.informCurrentSession();b("Arbiter").inform(b("ChannelConstants").ON_INVALID_HISTORY);u(!0);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"full reload incurred");h=b("ChannelConstants").OK;this.exitState({status:h,stateId:a},c);"ms"in d&&this._processMessages(d,f);break;case"msg":u(!0);this._processMessages(d,f);break;case"heartbeat":if(n.inStreaming){g=Date.now();var i;this.heartbeats.length>0&&(i=g-this.heartbeats[this.heartbeats.length-1]);j.log("heartbeat_interval",JSON.stringify({client_id:n.sessionID,interval:i}));this.heartbeats.push(g)}break;case"batched":h=d.batches;for(var f=0;f<h.length;f++)this._processTransportData0(a,c,h[f]);break;default:b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got an unknown protocol message: %s",e);j.error("unknown_msg_type",JSON.stringify({type:e}));break}},_processMqttMessage:function(a){b("ODS").bumpEntityKey(2231,"ChannelManager","_processMqttMessage.cleanup");if(b("DesktopWebMessageTypesSitevarConfig").ChatProxySupportedMessageTypes.get(a.type)===!0&&b("DesktopWebMessageTypesSitevarConfig").MQTTMigrationExcludeMessageTypes.get(a.type)!==!0)if(a.type==="rtc_live_json")b("ODS").bumpEntityKey(2966,"ChannelManager","processMqttMessages.dropped."+a.type);else{var c=b("ChannelConstants").getArbiterType(a.type);b("Arbiter").inform(c,{obj:a});b("ODS").bumpEntityKey(2966,"ChannelManager","processMqttMessages."+a.type)}else b("ODS").bumpEntityKey(2966,"ChannelManager","processMqttMessages.dropped."+a.type)},_processMessages:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","_processMessages.cleanup");"tr"in a&&(n.trace_id=a.tr);a=a.ms;var d=n.seq-a.length;for(var e=0;e<a.length;e++,d++){n.estimatedReceived++;if(d>=c){var f=a[e];if(f.type){b("ODS").bumpEntityKey(2966,"ChannelManager","messageReceive."+f.type);if(b("DesktopWebMessageTypesSitevarConfig").ChatProxySupportedMessageTypes.get(f.type)!==!0){b("ODS").bumpEntityKey(2966,"ChannelManager","processMessages.dropped."+f.type);continue}var g=b("ChannelConstants").getArbiterType(f.type);f.type==="skywalker"?g=b("ChannelConstants").SKYWALKER:f.type==="delta"&&(n.sequenceId=f.iseq);try{f.type=="buddylist_overlay"&&f.buffered==1?b("ODS").bumpEntityKey(2966,"ChannelManager","processMessages.buddylist_overlay.dropped"):b("DesktopWebMessageTypesSitevarConfig").MQTTMigrationExcludeMessageTypes.get(f.type)!==!0?f.type==="rtc_live_json"?b("Arbiter").inform(g,{obj:f}):b("ODS").bumpEntityKey(2966,"ChannelManager","processMessages.migration.list."+f.type):b("Arbiter").inform(g,{obj:f})}catch(a){b("ODS").bumpEntityKey(2966,"ChannelManager","processMessages.error."+f.type),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"message threw exception: %s %s",a,f)}}}else j.warn("seq_regression",JSON.stringify({last_seq:c,messages:a.length,seq:d}))}},_enter_init:function(){var a=this;b("ODS").bumpEntityKey(2231,"ChannelManager","_enter_init.cleanup");if(p.init>=this.getConfig("MAX_INIT_FAILS",2))return b("setTimeoutAcrossTransitions")(function(){return a.exitState({status:b("ChannelConstants").ERROR_MAX,stateId:o})},0);this._initTimer=b("setTimeoutAcrossTransitions")(function(){return a.exitState({status:b("ChannelConstants").ERROR,stateId:o},"timeout")},n.IFRAME_LOAD_TIMEOUT)},_enter_reconnect:function(a){var c=this;b("ODS").bumpEntityKey(2231,"ChannelManager","_enter_reconnect.cleanup");j.warn("enter_reconnect",a);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entered reconnect with reason: %s",a);var d=o;if(!b("PresenceUtil").hasUserCookie()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"user has no cookie???");j.warn("no_user_cookie","{}");b("setTimeoutAcrossTransitions")(function(){c._shutdownHint=b("ChannelConstants").HINT_AUTH,c.exitState({status:b("ChannelConstants").ERROR_SHUTDOWN,stateId:d})},0);return}a={reason:a,fb_dtsg:b("DTSG").getToken()};b("ISB").token&&(a.fb_isb=b("ISB").token);var e=new(b("FBAjaxRequest"))("GET","/ajax/presence/reconnect.php",a);e.onSuccess=function(){c.configure(e.json),b("PresenceCookieManager").store(),c.exitState({status:b("ChannelConstants").OK,stateId:d})};e.onError=function(){var a=e.json&&e.json.error;b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"reconnect error: %s",e.errorType);(e.errorType==b("AjaxError").TRANSPORT_ERROR||e.errorType==b("AjaxError").PROXY_ERROR||e.errorType==b("AjaxError").SERVICE_UNAVAILABLE)&&(c._shutdownHint=b("ChannelConstants").HINT_CONN);a&&a==1356007?c._shutdownHint=b("ChannelConstants").HINT_MAINT:a==1357001||a==1357004||a==1348009?c._shutdownHint=b("ChannelConstants").HINT_AUTH:c._shutdownHint=null;c.exitState({status:c._shutdownHint?b("ChannelConstants").ERROR_SHUTDOWN:b("ChannelConstants").ERROR,stateId:d},e)};e.onSuccess()},_exit_init:function(a){b("ODS").bumpEntityKey(2231,"ChannelManager","_exit_init.cleanup"),this._initTimer&&(this._initTimer=b("clearTimeout")(this._initTimer)),a==b("ChannelConstants").ERROR_MAX&&this._sendIframeError(b("ChannelConstants").reason_IFrameLoadGiveUp)},_reportProxyMisguidedMsg:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","_reportProxyMisguidedMsg.cleanup");b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"misguided message to %s meant for %s",c,a);var d=Date.now();if(d-this.lastReportOnMisguidedMsgTime<=n.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=d;d={received_uid:a,expected_uid:c};n.sticky_token&&(d.sticky_token=n.sticky_token);a=new(h||(h=b("URI")))("/err_misguided_msg").setDomain(n.host+"."+n.domain).setPort(n.port).setSecure(new h(window.location.href).isSecure()).setQueryData(d);c=new(b("AjaxRequest"))("GET",a);b("AjaxRequest").supportsCORS()&&(c.xhr.withCredentials=!0);c.onSuccess=function(a){};c.onError=function(a){};c.onJSON=function(a){};c.send()},_initMonitors:function(){var a=this,c;b("ODS").bumpEntityKey(2231,"ChannelManager","_initMonitors.cleanup");var d=Date.now(),e=Date.now(),f={};f.total=0;var g="idle",h=!1;(c=b("SystemEvents")).subscribe([c.USER,c.ONLINE,c.TIME_TRAVEL],function(c,d){u(!0);e=null;a.lastPullTime=Date.now();var f;switch(c){case b("SystemEvents").USER:f=b("SystemEvents").isPageOwner()?b("ChannelConstants").SYS_OWNER:b("ChannelConstants").SYS_NONOWNER;break;case b("SystemEvents").ONLINE:f=d?b("ChannelConstants").SYS_ONLINE:b("ChannelConstants").SYS_OFFLINE;break;case b("SystemEvents").TIME_TRAVEL:if(n.skipTimeTravel)return;if(0<d){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"skipping time travel failure. %s",d);return}f=b("ChannelConstants").SYS_TIMETRAVEL;break}a.exitState({status:f,stateId:o})});c=function(a,c){var h=Date.now(),i=null;c?(d=h,i=c.nextState||c.state):i=g;b("SystemEvents").checkTimeTravel();if(e){c=Math.round((h-e)/1e3);c>0&&(f[g]=(f[g]||0)+c,f.total+=c)}g=i;e=h;a||(f.lastSuccessTime=r(),f.online=b("SystemEvents").isOnline(),j.log("rollup",JSON.stringify(f)))};b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,c);b("setIntervalAcrossTransitions")(c,6e4);c=function(){if(a.isShutdown()||a.shouldIdle())return;b("SystemEvents").checkTimeTravel();var c=Date.now()-(a.lastPullTime||(i||(i=b("Env"))).start);if(!h&&c>n.STALL_THRESHOLD){var e=r();j.error("stall",JSON.stringify({lastSuccessTime:e,rollupState:g}));b("ChatReliabilityInstrumentation").logCHANNEL_STALLED(c.toString());h=!0}e=Date.now()-(d||0);a.state=="pull"&&e>n.JUMPSTART_THRESHOLD&&(d=null,j.warn("jumpstart",JSON.stringify({state:a.state,dormant:e})),b("Arbiter").inform(b("ChannelConstants").JUMPSTART,e),a.enterState("init"))};b("setIntervalAcrossTransitions")(c,5e3)},_indicateLbInfoUpdated:function(a,c){b("ODS").bumpEntityKey(2231,"ChannelManager","_indicateLbInfoUpdated.cleanup");var d=!b("AjaxRequest").supportsCORS(),e=b("ChannelTransport").isSubdomain(n.subdomain);!e||d?n.fullHost=n.host:n.fullHost=n.subdomain+"-"+n.host;b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"received lb info: %s at seq: %s{%s} with ".concat("sticky: %s/%s, subdomain: %s, fullHost: %s, state: %s,").concat(" source: %s, args: %s"),n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,n.subdomain,n.fullHost,this.state,a,c)},_probeTest:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","_probeTest.cleanup");n.streamingCapable=!1;var a=[],c={mode:"stream",format:"json"};n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(h||(h=b("URI")))("/probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new h(window.location.href).isSecure()).setQueryData(c);b("ODS").bumpEntityKey(2966,"ChannelManager","probe.attempt");c=new(b("AjaxRequest"))("GET",c);c.onJSON=function(c,d){if(c&&c.json&&c.json.t==="heartbeat"){a.push(Date.now());if(a.length>=2){d=a[1]-a[0];d>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&d<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(n.streamingCapable=!0,b("ODS").bumpEntityKey(2966,"ChannelManager","probe.switch_to_streaming"),j.log("switch_to_streaming","{}")):b("ODS").bumpEntityKey(2966,"ChannelManager","probe.failure.delayed")}}};c.onSuccess=function(c){a.length!=2&&(n.streamingCapable=!1,b("ODS").bumpEntityKey(2966,"ChannelManager","probe.failure.data_loss"),j.error("probe_error",JSON.stringify({error:"beats.length = "+a.length}))),b("ODS").bumpEntityKey(2966,"ChannelManager","probe.success"),j.log("probe_success","{}")};c.onError=function(a){n.streamingCapable=!1,b("ODS").bumpEntityKey(2966,"ChannelManager","probe.failure.error"),j.error("probe_error",JSON.stringify(a))};c.send()},_sseProbeTest:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","_sseProbeTest.cleanup");if(!window.EventSource){b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.failure.no_event_source");j.log("sse_probe.failure.no_event_source","{}");return}var a=[],c={mode:"sse",format:"json"};n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(h||(h=b("URI")))("/sse_probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new h(window.location.href).isSecure()).setQueryData(c);b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.attempt");var d=new EventSource(c.toString()),e=b("setTimeoutAcrossTransitions")(function(){d.close(),b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.failure.timeout"),j.log("sse_probe.failure.timeout","{}")},n.PROBE_HEARTBEATS_INTERVAL_HIGH*6);d.addEventListener("heartbeat",function(c){a.push(Date.now());if(a.length>=2){c=a[1]-a[0];c>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&c<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.success"),j.log("sse_probe.success","{}")):(b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.failure.delayed"),j.log("sse_probe.failure.delayed","{}"));b("clearTimeout")(e);d.close()}});d.onerror=function(a){b("ODS").bumpEntityKey(2966,"ChannelManager","sse_probe.failure.error"),j.error("sse_probe.failure.error",JSON.stringify(a)),b("clearTimeout")(e),d.close()}},startChannelManagerForApp:function(a){b("ODS").bumpEntityKey(2231,"ChannelManager","startChannelManagerForApp.cleanup"),this.startChannelManager!==b("emptyFunction")&&this.startChannelManager(),b("ChannelInitialData").channelConfig&&n&&(n.profile=a)},startChannelManager:function(){b("ODS").bumpEntityKey(2231,"ChannelManager","startChannelManager.cleanup"),b("ChannelInitialData").channelConfig?(this.configure(b("ChannelInitialData").channelConfig),/shutdown/.test(b("ChannelInitialData").state)&&(this._shutdownHint=b("ChannelConstants")[b("ChannelInitialData").reason]),this.init(b("ChannelInitialData").state,b("ChannelInitialData").reason),this._mqttInit(),b("ChatReliabilityInstrumentation").logCHANNEL_INIT(),this.startChannelManager=b("emptyFunction")):b("ChatReliabilityInstrumentation").logCHANNEL_NOCONFIG()}};e.exports=a}),null);
__d("ChannelConnection",["Arbiter","ArbiterMixin","ChannelConnectionEvents","ChannelConstants","ChannelManager","Run","SystemEvents","Visibility","clearTimeout","emptyFunction","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=null,i=null,j=null,k=null,l=0;a.__comet_ssr_is_server_env_DO_NOT_USE!==!0&&a.__is_archon!==!0&&d("ChannelManager").startChannelManager();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.CONNECTED=d("ChannelConnectionEvents").CONNECTED,c.RECONNECTING=d("ChannelConnectionEvents").RECONNECTING,c.SHUTDOWN=d("ChannelConnectionEvents").SHUTDOWN,c.MUTE_WARNING="chat-connection/mute",c.UNMUTE_WARNING="chat-connection/unmute",c.unmuteWarning=o,b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.disconnected=function(){return k===m.SHUTDOWN||k===m.RECONNECTING&&!i&&l>1};e.isShutdown=function(){return k===m.SHUTDOWN};e.reconnect=function(a){a===void 0&&(a=!1);if(d("ChannelManager").state==="ping"||d("ChannelManager").state==="pull"||d("ChannelManager").isShutdown())return;m.inform(m.RECONNECTING,0);a?(h!==null&&(c("clearTimeout")(h),h=null),d("ChannelManager").enterState("ping!")):h||(h=c("setTimeoutAcrossTransitions")(function(){d("ChannelManager").enterState("ping!"),h=null},d("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC));d("ChannelManager").resetDelay()};e.mockAfterLoad=function(){s(),t()};return b}(c("mixin")(d("ArbiterMixin")));var m=new b();d("Run").onBeforeUnload(c("emptyFunction"),!1);function n(){i&&(c("clearTimeout")(i),i=null)}function o(){n(),m.inform(m.UNMUTE_WARNING)}function p(a){n(),i=c("setTimeoutAcrossTransitions")(o,a),m.inform(m.MUTE_WARNING)}function q(){j&&(c("clearTimeout")(j),j=null)}function r(a,b){q();if(a===d("ChannelConstants").ON_ENTER_STATE&&(b.nextState||b.state)==="pull"){if(k!==m.CONNECTED){var e=!k;k=m.CONNECTED;l=0;m.inform(m.CONNECTED,{init:e})}}else a===d("ChannelConstants").ON_ENTER_STATE&&((b.nextState||b.state)==="ping"||!b.nextState&&b.state==="idle")?j=c("setTimeoutAcrossTransitions")(function(){var c=null;b.state==="idle"&&!b.nextState||(c=b.delay||0);k=m.RECONNECTING;b.state==="idle"&&l++;l>1?m.inform(m.RECONNECTING,c):!b.nextState&&b.state==="idle"&&r(a,b)},500):a===d("ChannelConstants").ON_SHUTDOWN&&(k=m.SHUTDOWN,l=0,m.inform(m.SHUTDOWN,b.reason))}function s(){d("ChannelManager").isShutdown()?r(d("ChannelConstants").ON_SHUTDOWN,d("ChannelManager")._shutdownHint):r(d("ChannelConstants").ON_ENTER_STATE,{state:d("ChannelManager").state,nextState:d("ChannelManager").nextState,delay:0}),c("Visibility").addListener(c("Visibility").VISIBLE,m.reconnect)}d("Run").onAfterLoad(s);function t(){c("Arbiter").subscribe([d("ChannelConstants").ON_ENTER_STATE,d("ChannelConstants").ON_SHUTDOWN],r),c("Arbiter").subscribe(d("ChannelConstants").ATTEMPT_RECONNECT,function(){m.disconnected()&&m.reconnect()}),c("SystemEvents").subscribe(c("SystemEvents").TIME_TRAVEL,function(){m.reconnect(),p(d("ChannelConstants").MUTE_WARNING_TIME_MSEC)}),d("Run").onBeforeUnload(q,!1)}d("Run").onAfterLoad(t);e=m;g["default"]=e}),99);
__d("ChatproxyPresence",["Arbiter","AvailableListConstants","AvailableListInitialData","ChannelConstants","ChatReliabilityEvents","ChatReliabilityInstrumentation","LastActiveTimes","ODS","PresenceStatus","debounceAcrossTransitions"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a,this.$2=!1,this.$3=b("AvailableListInitialData").chatNotif,this.$4=!1}var c=a.prototype;c.subscribe=function(){var a=this,c,d;(c=b("Arbiter")).subscribe((d=b("ChannelConstants")).getArbiterType("chatproxy-presence"),this.updatePresenceInfo.bind(this));c.subscribe(d.ON_INVALID_HISTORY,function(){b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").ON_INVALID_HISTORY),a.$2=!0});c.subscribe(d.RTI_SESSION,function(c,d){b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").RTI_SESSION),d&&(a.$4=d)});c.subscribe(d.getArbiterType("get_debug_presence"),function(c,d){b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").GET_DEBUG_PRESENCE);c=b("PresenceStatus").getAllDebugInfo();d=b("LastActiveTimes").getDebugData();for(var e in d){var f=c[e];f===void 0&&(f={},c[e]=f);f.l=Math.floor(d[e])}a.$4.issueRequest("/debug_presence",{},c,function(){b("ODS").bumpEntityKey(2966,"ChatproxyPresence","debug_presence.sucess")})})};c.getRTISession=function(){return this.$4};c.updatePresenceInfo=function(a,c){var d=this;this.$2&&(this.$2=!1,b("PresenceStatus").resetPresenceData());c=c.obj;a=!1;c.chatNotif!==void 0&&(a=this.$3!==c.chatNotif);a&&(this.$3=c.chatNotif);c.gamers&&b("PresenceStatus").setPlayingCanvasGameFriends(c.gamers);a&&this.$1(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,this.$3);b("debounceAcrossTransitions")(function(){d.$1(b("AvailableListConstants").ON_AVAILABILITY_CHANGED)},0)()};c.getWebChatNotification=function(){return this.$3};return a}();e.exports=a}),null);
__d("ChatDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("ExplicitRegistrationDispatcher"));b=new a({strict:!1});g["default"]=b}),98);
__d("PresenceStatusActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({AVAILABILITY_CHANGED:null});g["default"]=a}),98);
__d("AvailableList",["Arbiter","ArbiterMixin","AsyncRequest","AvailableListConstants","Bootloader","ChannelConstants","ChatConfig","ChatDispatcher","ChatReliabilityInstrumentation","ChatVisibility","ChatproxyPresence","CurrentUser","FBIDCheck","FBLogger","LastActiveTimes","ODS","PresencePrivacy","PresenceStatus","PresenceStatusActionTypes","Run","ServerTime","TypingStates","debounceAcrossTransitions","emptyFunction","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";d("ODS").setEntitySample("presence",1e-4);var h=babelHelpers["extends"]({},c("AvailableListConstants"),d("ArbiterMixin")),i=/\D/;h.subscribe([c("AvailableListConstants").ON_AVAILABILITY_CHANGED,c("AvailableListConstants").ON_UPDATE_ERROR],function(a,b){c("Arbiter").inform(a,b)});c("PresenceStatus").subscribe("change",c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED)},0));var j=c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED),c("ChatDispatcher").dispatch({type:c("PresenceStatusActionTypes").AVAILABILITY_CHANGED})},0);function k(a,b,d,e,f){if(a===c("CurrentUser").getID())return;b=c("PresenceStatus").set(a,b,d,e,f);if(b){d=c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED,a),c("ChatDispatcher").dispatch({type:c("PresenceStatusActionTypes").AVAILABILITY_CHANGED,id:a})},0);d()}}function l(a){a=a.payload.availability||{};for(var b in a)k(b&&b.toString(),a[b].a,!0,"mercury_tabs",a[b].c)}function m(a){if(!a||a==="0"||i.test(a)){d("ChatReliabilityInstrumentation").logERROR("bad id for available list: "+a);return}new(c("AsyncRequest"))("/ajax/mercury/tabs_presence.php").setData({target_id:a}).setHandler(l).setErrorHandler(c("emptyFunction")).setAllowCrossPageTransition(!0).send()}var n=void 0;try{n=new(c("ChatproxyPresence"))(function(a){h.inform(a)}),n.subscribe()}catch(a){c("FBLogger")("chat").catching(a).mustfix("Failed to subscribe to chat proxy presence"),d("ChatReliabilityInstrumentation").logERROR(a.getMessage())}Object.assign(h,{getChatproxyPresenceObject:function(){return n},get:function(a){return c("PresenceStatus").get(a)},updateForID:function(a){if(d("ChatConfig").get("presence_page_green_dot_sub")&&!d("FBIDCheck").isUser_deprecated(a))return;m(a);c("PresencePrivacy").getVisibility()==c("PresencePrivacy").ONLINE&&d("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessengerMQTTPresence"],function(b){b.sendAdditionalBuddyRequest(a)},"AvailableList")})},getWebChatNotification:function(){return n&&n.getWebChatNotification()},isReady:function(){return!!n},set:function(a,b,c,d){k(a,b,!0,c,d)}});c("PresencePrivacy").subscribe(["privacy-changed","privacy-availability-changed","privacy-user-presence-response"],j);c("requireWeak")("ChannelConnection",function(a){return a.subscribe([a.CONNECTED,a.RECONNECTING,a.SHUTDOWN,a.MUTE_WARNING,a.UNMUTE_WARNING],j)});c("Bootloader").loadModules(["MercurySyncEventsProxy"],function(a){c("Arbiter").subscribe([a.getArbiterTypeForFBID(c("CurrentUser").getID(),a.Events.TYP)],function(a,b){a=b.obj;if(a.st===c("TypingStates").TYPING){b=a.from;if(d("ChatVisibility").isOnline()){d("ODS").bumpEntityKey(3303,"presence","stale_presence_check_typing");a=c("PresenceStatus").get(b);if(a!=c("AvailableListConstants").ACTIVE){a=d("LastActiveTimes").get(b)*1e3;var e=d("ServerTime").get();if(!a)d("ODS").bumpEntityKey(3303,"presence","no_detailed_presence_typing");else if(e-a>5*60*1e3){var f="stale_presence_typing";e=e-a;e<10*60*1e3?f+="600":e<60*60*1e3&&(f+="3600");d("ODS").bumpEntityKey(3303,"presence",f)}}}h.set(b&&b.toString(),c("AvailableListConstants").ACTIVE,"channel-typing")}})},"AvailableList");c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("messaging"),function(a,b){if(!d("ChatVisibility").isOnline())return;a=b.obj;if(a.message&&a.message.timestamp&&a.message.sender_fbid){b=d("ServerTime").get();var e=a.message.timestamp;if(b-e<2*60*1e3){d("ODS").bumpEntityKey(3303,"presence","stale_presence_check");b=a.message.sender_fbid;a=c("PresenceStatus").get(b);if(a==c("AvailableListConstants").ACTIVE)return;a=d("LastActiveTimes").get(b)*1e3;if(!a)d("ODS").bumpEntityKey(3303,"presence","no_detailed_presence");else if(e-a>5*60*1e3){b="stale_presence";e=e-a;e<10*60*1e3?b+="600":e<60*60*1e3&&(b+="3600");d("ODS").bumpEntityKey(3303,"presence",b)}}}});a=h;g["default"]=a}),98);
__d("ChatSidebarActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({AFTER_DOM_LOAD:null,INIT:null,LOADED:null,SET_ENABLED:null,SHOW:null});g["default"]=a}),98);
__d("ChatSidebarPresencePrivacyActions",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({PRIVACY_CHANGED:null,USER_PRESENCE_CHANGED:null});g["default"]=a}),98);
__d("ChatSidebarRecentCallsActions",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({RECENT_CALLS_UPDATED:null});b=a;g["default"]=b}),98);
__d("ChatSidebarActions",["ChatDispatcher","ChatSidebarActionTypes","ChatSidebarPresencePrivacyActions","ChatSidebarRecentCallsActions"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").INIT})}function b(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").AFTER_DOM_LOAD})}function d(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").LOADED})}function e(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SET_ENABLED,enabled:!1,sidebarType:"buddylist"})}function f(a){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SET_ENABLED,enabled:!0,sidebarType:a})}function h(a){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SHOW,sidebarType:a})}function i(){c("ChatDispatcher").dispatch({type:c("ChatSidebarPresencePrivacyActions").USER_PRESENCE_CHANGED})}function j(){c("ChatDispatcher").dispatch({type:c("ChatSidebarPresencePrivacyActions").PRIVACY_CHANGED})}function k(a){c("ChatDispatcher").dispatch({type:c("ChatSidebarRecentCallsActions").RECENT_CALLS_UPDATED,calls:a})}g.init=a;g.afterDomLoad=b;g.loaded=d;g.disable=e;g.enable=f;g.show=h;g.userPresenceChanged=i;g.privacyChanged=j;g.recentCallsUpdated=k}),98);
__d("ChatSidebarDropdownConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({SOUND:"sound",ADVANCED_SETTINGS:"advanced_settings",BLOCK_SETTINGS:"block_settings",TURN_OFF_DIALOG:"turn_off_dialog",CLOSE_ALL_TABS:"close_all_tabs",LOWER_ALL_TABS:"lower_all_tabs",TOGGLE_DISCOVER_BOTS:"toggle_discover_bots",SIDEBAR:"sidebar",HIDE_GROUPS:"hide_groups",ONLINE:"online",VIDEOCALL_ON:"videoon",VIDEOCALL_OFF:"videooff",PAUSE:"pause",SHOW_APPS:"show_apps",HIDE_APPS:"hide_apps",HIDE_MARKETPLACE:"hide_marketplace",SHOW_TICKER:"show_ticker",HIDE_TICKER:"hide_ticker",HIDE_ADMINED_PAGES:"hide_admined_pages",HIDE_BUSINESSES:"hide_businesses",EMOJI_SETTINGS:"emoji_settings",TURN_OFF_CHAT_TABS:"turn_off_chat_tabs",SOLID_REACTION:"solid_reaction"});f["default"]=a}),66);
__d("FBRTCDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("Dispatcher_DEPRECATED"))();g["default"]=a}),98);
__d("FBRTCStore",["FBRTCDispatcher","FluxStore"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,c("FBRTCDispatcher"))||this}var d=b.prototype;d.__emitChange=function(){this.__emitter.emit(this.__changeEvent)};return b}(c("FluxStore"));a.__moduleID=f.id;g["default"]=a}),98);
__d("FBRTCCallBlockingStore",["Arbiter","AsyncRequest","Bootloader","ChannelConstants","FBRTCDispatcher","FBRTCStore","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=0,j=null,k="call_block_setting_changed";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.init=function(a){this.$FBRTCCallBlockingStore1(a),c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("videocall_block_setting"),this.$FBRTCCallBlockingStore2.bind(this))};e.__onDispatch=function(a){if(a.type!==k)return;this.$FBRTCCallBlockingStore1(a.data)};e.$FBRTCCallBlockingStore1=function(a){switch(a){case 0:h=!1;this.$FBRTCCallBlockingStore3();break;case-1:h=!0;this.$FBRTCCallBlockingStore3();break;default:h=!0,this.$FBRTCCallBlockingStore4(a)}this.__emitChange()};e.$FBRTCCallBlockingStore4=function(a){j===null&&(j=c("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),a*1e3))};e.getBlockingStatus=function(){return h};e.turnOnVideoCalling=function(){new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};e.turnOffVideoCalling=function(a){i=a,new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:a}).send()};e.$FBRTCCallBlockingStore3=function(){j&&(c("clearTimeout")(j),j=null)};e.$FBRTCCallBlockingStore5=function(){c("FBRTCDispatcher").dispatch({type:k,data:0}),c("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logCheckpoint({checkpoint:"rtc_enabled"})},"FBRTCCallBlockingStore")};e.$FBRTCCallBlockingStore6=function(){c("FBRTCDispatcher").dispatch({type:k,data:i}),c("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logCheckpoint({checkpoint:i===-1?"rtc_disabled_permanently":"rtc_disabled_temporarily"})},"FBRTCCallBlockingStore")};e.$FBRTCCallBlockingStore2=function(a,b){c("FBRTCDispatcher").dispatch({type:k,data:b.obj.value})};return b}(c("FBRTCStore"));b=new a();g["default"]=b}),98);
__d("ChatOptions",["Arbiter","ArbiterMixin","Bootloader","ChannelConstants","ChatOptionsInitialData","ChatSidebarActions","ChatSidebarDropdownConstants","FBRTCCallBlockingStore","PresenceUtil","mixin"],(function(a,b,c,d,e,f,g){var h={};(function(){var a=b("ChatOptionsInitialData");for(var d in a){var e=a[d];switch(d){case"call_blocked_until":c("FBRTCCallBlockingStore").init(e);break;case c("ChatSidebarDropdownConstants").TURN_OFF_CHAT_TABS:e!==-1&&(h[d]=!!e);break;default:h[d]=!!e}}})();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.getSetting=function(a){return h[a]};e.setSetting=function(a,b,e){if(a==="sidebar_mode"){c("Bootloader").loadModules(["ChatSidebarVisibility"],function(a){return a.shouldShowSidebarIgnoreEnabled(null,function(a,c){b?d("ChatSidebarActions").enable(a?"sidebar":"buddylist"):d("ChatSidebarActions").disable()})},"ChatOptions");return}if(this.getSetting(a)==b)return;h[a]=!!b;c("Arbiter").inform("chat/option-changed",{name:a,value:b})};return b}(c("mixin")(d("ArbiterMixin")));c("Arbiter").subscribe(d("ChannelConstants").getArbiterType("setting"),function(a,b){a=b.obj;if(a.window_id===d("PresenceUtil").getSessionID())return;i.setSetting(a.setting,!!a.value,"channel")});var i=new a();e=i;g["default"]=e}),98);
__d("ChatUnreadCountActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({COUNT_UPDATED:null});g["default"]=a}),98);
__d("ChatSidebarPreloadStore",["InitialChatFriendsList"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a({buddies:c("InitialChatFriendsList").list,groups:c("InitialChatFriendsList").groups,shortProfiles:c("InitialChatFriendsList").shortProfiles,nearby:c("InitialChatFriendsList").nearby,adminedPages:c("InitialChatFriendsList").adminedPages,marketplaceThreads:c("InitialChatFriendsList").marketplaceThreads,pageListModule:c("InitialChatFriendsList").pageListModule,pymmList:c("InitialChatFriendsList").pymmList||{},recentPageList:c("InitialChatFriendsList").recentPageList,profiles:[]})}g.onLoaded=a}),98);
__d("XChatUserInfoAllAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/user_info_all/",{viewer:{type:"Int",required:!0}})}),null);
__d("ShortProfilesBootstrapper",["AsyncRequest","CurrentUser","ODS","Promise","XChatUserInfoAllAsyncController"],(function(a,b,c,d,e,f){"use strict";var g=5,h=1e4,i=b("XChatUserInfoAllAsyncController").getURIBuilder().setInt("viewer",b("CurrentUser").getID()).getURI();a=function(){function a(a){var c=this;this.$1=a;this.$2=new(b("Promise"))(function(a,b){c.$3=a,c.$4=b});this.$5=!1;this.$6=null;this.$7=0;this.$8=0;this.$9=0;this.$10=!1;this.$11=!1}var c=a.prototype;c.fetchAll=function(){var a=this;this.$12();if(this.$5||this.$6)return this.$2;if(this.$7>=g){this.$13();return this.$2}this.$7++;this.$14();this.$6=new(b("AsyncRequest"))(i).setHandler(function(b){a.$6=null,a.$5=!0,a.$15(),a.$1(b.payload),a.$3()}).setErrorHandler(function(){a.$6=null,a.$8++,a.$16()}).setTimeoutHandler(h,function(){a.$6=null,a.$9++,a.$17(),a.fetchAll()}).setAllowCrossPageTransition(!0);this.$6.send();return this.$2};c.isBootstrapped=function(){return this.$5};c.isBootstrapping=function(){return!!this.$6};c.getAttemptCount=function(){return this.$7};c.getErrorCount=function(){return this.$8};c.getTimeoutCount=function(){return this.$9};c.$12=function(){this.$10||(b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.starts"),this.$10=!0)};c.$14=function(){b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.attempts")};c.$15=function(){b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.successes"),this.$7>1&&b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.successes_after_retries")};c.$16=function(){b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.errors")};c.$17=function(){b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.timeouts")};c.$13=function(){this.$11||(b("ODS").bumpEntityKey(3303,"chat.web","typeahead.bootstrap.giveups"),this.$11=!0,this.$4())};return a}();e.exports=a}),null);
__d("XChatUserInfoAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/user_info/",{ids:{type:"IntVector",defaultValue:[]}})}),null);
__d("ShortProfiles",["AjaxLoader","CurrentUser","FBLogger","ShortProfilesBootstrapper","URI","XChatUserInfoAsyncController","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=new(c("AjaxLoader"))(c("XChatUserInfoAsyncController").getURIBuilder().getURI().toString(),"profiles");function a(a,b){this.getMulti([a],function(c){return b(c[a],a)})}function b(a,b){if(c("gkx")("2421")){var d=new Error("chat user info is being used");d.stack;c("FBLogger")("messenger_comet").catching(d).warn("chat user info is being used here")}i.get(a,b||c("emptyFunction"))}function j(a){if(c("gkx")("2421")){var b=new Error("chat user info is being used");b.stack;c("FBLogger")("messenger_comet").catching(b).warn("chat user info is being used here")}return i.getNow(a)||null}function d(a){var b={};a.forEach(function(a){return b[a]=j(a)});return b}function e(){if(c("gkx")("2421")){var a=new Error("chat user info is being used");a.stack;c("FBLogger")("messenger_comet").catching(a).warn("chat user info is being used here")}return i.getCachedKeys()}function f(){return!!h&&h.isBootstrapped()}function k(){if(c("gkx")("2421")){var a=new Error("chat user info is being used");a.stack;c("FBLogger")("messenger_comet").catching(a).warn("chat user info is being used here")}h||(h=new(c("ShortProfilesBootstrapper"))(function(a){i.set(a)}));return h.fetchAll()}function l(a,b){var c={};c[a]=b;this.setMulti(c)}function m(a){if(c("gkx")("2421")){var b=new Error("chat user info is being used");b.stack;c("FBLogger")("messenger_comet").catching(b).warn("chat user info is being used here")}if(c("CurrentUser").isWorkUser()){var d={};Object.keys(a).forEach(function(b){var e=a[b];(e.type!=="fb4c"||!e.uri)&&(d[b]=e);var f=new(c("URI"))(e.uri).setDomain("").setProtocol("").toString();d[b]=babelHelpers["extends"]({},e,{uri:f})});a=d}i.set(a)}g.get=a;g.getMulti=b;g.getNow=j;g.getMultiNow=d;g.getCachedProfileIDs=e;g.hasAll=f;g.fetchAll=k;g.set=l;g.setMulti=m}),98);
__d("ChatSortUsers",["ShortProfiles","TokenizeUtil"],(function(a,b,c,d,e,f){var g={};function h(a){if(g[a])return g[a];var c=(b("ShortProfiles").getNow(a)||{}).name;return c?g[a]=b("TokenizeUtil").flatten(c):"~"}a={sortAlphabetical:function(a,b){a=h(a);b=h(b);return a!==b?a<b?-1:1:0}};e.exports=a}),null);
__d("PresenceOrderedList",["ChatSidebarPreloadStore","ChatSortUsers","PresencePrivacy","PresenceStatus"],(function(a,b,c,d,e,f,g){function h(a){return a.map(function(a){var b=a.slice(0,-2);a=Number(a.slice(-1));return[b,a]})}function i(a,b){var d=[];a.forEach(function(a){var e=a[0];a=a[1];if(d.length>=b)return;if(c("PresencePrivacy").getFriendVisibility(e)==c("PresencePrivacy").BLACKLISTED)return;a==c("PresenceStatus").get(e)&&d.push(e)});return d}a=function(){function a(){this.$1=null}var b=a.prototype;b.getSorted=function(a,b){var c=this;if(this.$1){b(i(this.$1,a));return}d("ChatSidebarPreloadStore").onLoaded(function(d){d=d.buddies;c.$1=h(d);b(i(c.$1,a))})};b.getAvailableSorted=function(a){var b=c("PresenceStatus").getOnlineIDs();a&&(b=b.filter(function(b){return a&&a.indexOf(b)===-1}));return b.sort(d("ChatSortUsers").sortAlphabetical)};b.getAllSorted=function(a){var b=[],e=this.$1||[];c("PresenceStatus").getAllIDs().concat(e.map(function(a){return a[0]})).forEach(function(a){return b.indexOf(a)===-1&&b.push(a)});a&&(b=b.filter(function(b){return a&&a.indexOf(b)===-1}));return b.sort(d("ChatSortUsers").sortAlphabetical)};return a}();b=new a();g["default"]=b}),98);
__d("PresenceStatusStore",["ChatDispatcher","FluxStore","PresenceStatus","PresenceStatusActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,c("ChatDispatcher"))||this}var d=b.prototype;d.__onDispatch=function(a){a=a.type;switch(a){case c("PresenceStatusActionTypes").AVAILABILITY_CHANGED:this.__emitChange();break;default:break}};d.get=function(a){return c("PresenceStatus").get(a)};d.getIsPlaying=function(a){return c("PresenceStatus").isPlayingCanvasGameUser(a)};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("ShortProfilesActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({PROFILE_UPDATED:null});g["default"]=a}),98);
__d("ChatProfileStore",["ChatSidebarPreloadStore"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(){d("ChatSidebarPreloadStore").onLoaded(function(a){var b=a.profiles,c=a.nearby;return b.filter(function(a){return!c||c.indexOf(a.id)===-1}).forEach(function(a){var b=new Date();b=a.birthdate&&b.getDate()===a.birthdate.day&&b.getMonth()+1===a.birthdate.month;var c=a.profile_picture&&a.profile_picture.uri?a.profile_picture.uri:null;h[a.id]={id:a.id,is_birthday:b,thumbSrc:c,name:a.name,is_messenger_only:!!a.is_messenger_only}})})}function b(a){return h[a]}g.init=a;g.get=b}),98);
__d("ShortProfilesStore",["ChatDispatcher","ChatProfileStore","FluxStore","ShortProfiles","ShortProfilesActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,c("ChatDispatcher"))||this;b.$ShortProfilesStore1=function(){c("ChatDispatcher").dispatch({type:c("ShortProfilesActionTypes").PROFILE_UPDATED})};return b}var e=b.prototype;e.__onDispatch=function(a){a=a.type;switch(a){case c("ShortProfilesActionTypes").PROFILE_UPDATED:this.__emitChange();break;default:break}};e.getNow=function(a){var b=d("ChatProfileStore").get(a);b||(b=d("ShortProfiles").getNow(a));return b};e.getMulti=function(a){d("ShortProfiles").getMulti(a,this.$ShortProfilesStore1)};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("ChatSidebarStore",["AvailableListConstants","ChatConfig","ChatDispatcher","ChatOptions","ChatOptionsInitialData","ChatSidebarActionTypes","ChatUnreadCountActionTypes","CurrentUser","FluxStore","InitialChatFriendsList","PresenceOrderedList","PresencePrivacy","PresenceStatus","PresenceStatusActionTypes","PresenceStatusStore","ShortProfiles","ShortProfilesActionTypes","ShortProfilesStore","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.map(function(a){var b=a.slice(0,-2);a=Number(a.slice(-1));return[b,a]})}function i(a,b,d){d===void 0&&(d=[]);return a.reduce(function(a,e){var f=e[0];e=e[1];a.length<b&&c("PresencePrivacy").getFriendVisibility(f)!==c("PresencePrivacy").BLACKLISTED&&e===c("PresenceStatus").get(f)&&!d.includes(f)&&a.push(f);return a},[])}function j(a){return c("PresencePrivacy").getVisibility()==c("PresencePrivacy").ONLINE?a.filter(function(a){return c("PresencePrivacy").allows(a)}):a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,c("ChatDispatcher"))||this;b.$ChatSidebarStore2={enabled:!1,initTime:0,initialized:!1,isAfterDomLoad:!1,loaded:!1,visible:null};b.setupShortProfiles();b.$ChatSidebarStore3={enabled:!!c("ChatOptionsInitialData").sidebar_mode,initTime:c("performanceAbsoluteNow")(),initialized:!1,isAfterDomLoad:!1,loaded:!1,visible:null};return b}var e=b.prototype;e.setupShortProfiles=function(){var a=c("InitialChatFriendsList").shortProfiles;a&&d("ShortProfiles").setMulti(a)};e.__onDispatch=function(a){var b=a.type;this.$ChatSidebarStore2=babelHelpers["extends"]({},this.$ChatSidebarStore3);switch(b){case c("ChatSidebarActionTypes").INIT:this.$ChatSidebarStore2.initialized||(this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{initTime:c("performanceAbsoluteNow")()}));this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{initialized:!0});break;case c("ChatSidebarActionTypes").AFTER_DOM_LOAD:this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{isAfterDomLoad:!0});break;case c("ChatSidebarActionTypes").LOADED:this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{loaded:!0});break;case c("ChatSidebarActionTypes").SHOW:this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{visible:a.sidebarType});break;case c("ChatSidebarActionTypes").SET_ENABLED:this.$ChatSidebarStore3=babelHelpers["extends"]({},this.$ChatSidebarStore3,{enabled:a.enabled,visible:a.sidebarType});break}if(b===c("PresenceStatusActionTypes").AVAILABILITY_CHANGED||b===c("ShortProfilesActionTypes").PROFILE_UPDATED||b===c("ChatUnreadCountActionTypes").COUNT_UPDATED){this.__emitChange();return}for(var a in this.$ChatSidebarStore3)if(Object.prototype.hasOwnProperty.call(this.$ChatSidebarStore3,a)&&this.$ChatSidebarStore3[a]!==this.$ChatSidebarStore2[a]){this.__emitChange();break}};e.getPrevState=function(){return this.$ChatSidebarStore2};e.getState=function(){return this.$ChatSidebarStore3};e.isInitialized=function(){return this.$ChatSidebarStore3.initialized};e.isLoaded=function(){return this.$ChatSidebarStore3.loaded};e.isAfterDomLoad=function(){return this.$ChatSidebarStore3.isAfterDomLoad};e.isEnabled=function(){return this.$ChatSidebarStore3.enabled};e.getInitTime=function(){return this.$ChatSidebarStore3.initTime};e.getVisibleType=function(){return this.$ChatSidebarStore3.visible};e.getUsersData=function(a){a=this.getOrderedPresenceUserList(a);var b=c("InitialChatFriendsList").nearby,d=c("CurrentUser").isWorkUser()?c("PresenceOrderedList").getAllSorted(a.concat(b)).filter(function(a){a=c("ShortProfilesStore").getNow(a);return!a||a.type==="fb4c"}):c("PresenceOrderedList").getAvailableSorted(a.concat(b)),e=c("CurrentUser").isWorkUser()?c("PresenceOrderedList").getAllSorted(a.concat(b)).filter(function(a){a=c("ShortProfilesStore").getNow(a);return a&&a.type!=="fb4c"}):[];a=a.filter(function(a){return!b||b.indexOf(a)===-1});var f=j(a);a=c("PresencePrivacy").getOnlinePolicy()===c("PresencePrivacy").ONLINE_TO_WHITELIST&&c("PresencePrivacy").getVisibility()?a.filter(function(a){return!c("PresencePrivacy").allows(a)}):[];return{availableUsers:d,topUsers:f,workOthers:e,offlineUsers:a}};e.getExtraData=function(a){var b=c("InitialChatFriendsList").groups,e=c("InitialChatFriendsList").nearby,f=c("InitialChatFriendsList").adminedPages,g=c("InitialChatFriendsList").marketplaceThreads,h=c("InitialChatFriendsList").pageListModule,i=c("InitialChatFriendsList").pymmList;a--;d("ChatConfig").get("show_header")&&a--;var k=!c("ChatOptions").getSetting("hide_businesses")&&i&&i.pages;k&&(a-=3);f=c("ChatOptions").getSetting("hide_admined_pages")?[]:f;f.length&&(a-=f.length+1);var l=a,m=a;b=this.getGroupsToShow(b);var n=b.length;n===0&&!c("ChatOptions").getSetting("hide_groups")&&n++;n>0&&(m-=n+1);d("ChatConfig").get("nearby_friends_www_chatbar")&&e.length>0&&(m-=e.length+1);d("ChatConfig").get("show_admined_pages")&&f.length>0&&(m-=f.length+1);n=k&&i?i:{pages:[]};d("ChatConfig").get("show_businesses")&&n.pages.length>0&&(m-=2);m=Math.min(a,Math.max(m,d("ChatConfig").get("min_top_friends")||0));k=j(e);return{isUserOffline:c("PresencePrivacy").isUserOffline(),groups:b,numTopFriends:m,nearby:k,marketplaceThreads:g,maxThreadSlots:l,adminedPages:f,pageListModule:h,pymmList:n}};e.getGroupsToShow=function(a){if(c("ChatOptions").getSetting("hide_groups"))return[];return a.length>1?a.sort(function(a,b){return c("PresenceStatus").getGroup(b.mercury_thread.participants)-c("PresenceStatus").getGroup(a.mercury_thread.participants)}).slice(0,d("ChatConfig").getNumber("num_groups_to_show")):a};e.getOrderedPresenceUserList=function(a){if(this.$ChatSidebarStore1&&Array.isArray(this.$ChatSidebarStore1))return i(this.$ChatSidebarStore1,a);this.$ChatSidebarStore1=h(c("InitialChatFriendsList").list)||[];return i(this.$ChatSidebarStore1,a)};e.getStatusMap=function(a,b){var d={},e={};a.forEach(function(a){if(b){var f=c("PresenceStatusStore").getIsPlaying(a);d[a]=f}f=c("PresenceStatusStore").get(a);f===c("AvailableListConstants").ACTIVE&&(e[a]=f)});return{statusMap:e,playingMap:d}};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("ChatSidebarHideReason",[],(function(a,b,c,d,e,f){a=Object.freeze({VIEWPORT_INCAPABLE:0,LOW_FRIEND_COUNT:1,NOT_ENABLED:2,OFF_HOMEPAGE:3});f["default"]=a}),66);
__d("ChatSidebarParticipantTooltipBuilder",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";d("react");var i=10,j="\n";function a(a,b){var c=[],d=Math.min(i,a.length);a=a.slice(0,d);a.forEach(function(a){a=a.name;a&&c.push(a)});d<b&&c.push(h._(/*FBT_CALL*/"and {num} more..."/*FBT_CALL*/,[h._param("num",b-d)]));return c.join(j)}g.MAX_NUM_PARTICIPANTS_TO_RENDER=i;g.buildParticipantsTooltip=a}),98);
__d("OrderedFriendsList",["AvailableListConstants","ChatProfileStore","ChatSidebarParticipantTooltipBuilder","ChatSidebarPreloadStore","CurrentUser","MercuryIDs","PresenceStatus","SearchableEntry","ShortProfiles","createArrayFromMixed","isValidUniqueID"],(function(a,b,c,d,e,f){"use strict";var g=null,h={},i=[],j={};function k(a){a=String(a);return b("MercuryIDs").isValid(a)?a:b("MercuryIDs").getParticipantIDFromUserID(a)}function l(a,c){a=b("createArrayFromMixed")(a);c(a.filter(function(a){a=b("ShortProfiles").getNow(a);return!a||o(a)||a.is_nonfriend_messenger_contact}))}function m(a){g=[];var c=0;a.forEach(function(a){var d=a.slice(0,-2);a=a.slice(-1);b("PresenceStatus").get(d)==a&&(g[c]=d,h[d]=c++)})}function n(a){var c=0;a.forEach(function(a){var d=a.slice(0,-2);a=a.slice(-1);a==b("AvailableListConstants").ACTIVE&&(i[c]=d,j[d]=c++)})}function o(a){return a.type==="friend"||b("CurrentUser").isWorkUser()&&a.type==="fb4c"}var p={contains:function(a){return a in h},getList:function(a){if(g&&g.length){l(g,a);return}b("ChatSidebarPreloadStore").onLoaded(function(b){b=b.buddies;m(b);l(g,a)})},getSearchableEntries:function(a,c,d){p.getList(function(e){b("ChatSidebarPreloadStore").onLoaded(function(f){var g=f.groups,h=f.recentPageList;b("ShortProfiles").getMulti(e.slice(0,a),function(a){var b=[];for(var e in a)b.push(p.normalizeProfileEntry(a[e],e));a=c?g.map(p.normalizeThreadEntry):[];e=h.map(p.normalizePageEntry);d(b.concat(a,e).filter(function(a){return!!a}).sort(function(a,b){return a.getOrder()-b.getOrder()}))})})})},normalizePageEntry:function(a,c){var d=a.searchTokens||[],e=a.name,f=null;return new(b("SearchableEntry"))({uniqueID:a.id||c,keywordString:d.join(" "),order:c,photo:a.imgSrc,title:e,subtitle:f,type:"page",uri:a.uri,auxiliaryData:{isVerified:a.isVerified}})},normalizeProfileEntry:function(a,c){var d=a.searchTokens||[],e=a.name,f=null;return new(b("SearchableEntry"))({uniqueID:a.id||c,keywordString:d.join(" "),order:p.getRank(a.id||c),photo:a.thumbSrc,title:e,subtitle:f,type:a.type,uri:a.uri,auxiliaryData:{isMessengerUser:a.is_messenger_user}})},normalizeThreadEntry:function(a,c){var d=a.mercury_thread,e=a.participants_to_render.map(function(a){return babelHelpers["extends"]({},a,{id:k(a.id)})});d.participants=d.participants.map(k);var f=a.text,g=null;f||(f=d.name);var h=b("ChatSidebarParticipantTooltipBuilder").buildParticipantsTooltip(e,d.participants.length-1),i=e.map(function(a){return a.name}).join(", ");!f?f=i:g=i;i=a.uid;return!f||!b("isValidUniqueID")(i)?null:new(b("SearchableEntry"))({uniqueID:i,order:c,photo:d.image_src,title:f,subtitle:g,type:"thread",auxiliaryData:{participantsToRender:e,tooltipContent:h,thread:d}})},getRank:function(a){return a in h?h[a]:g?g.length:0},getActiveList:function(a){if(i.length>0){a(i);return}p.getList(function(b){return a(b)})},getActiveRank:function(a){return a in j?j[a]:p.getRank(a)}};(function(){b("ChatSidebarPreloadStore").onLoaded(function(a){var c=a.buddies;a=a.shortProfiles;b("ShortProfiles").setMulti(a);n(c);m(c)}),b("ChatProfileStore").init()})();e.exports=p}),null);
__d("ChatSidebarVisibility",["ChatConfig","ChatSidebarHideReason","ChatSidebarStore","OrderedFriendsList","URI","getViewportDimensions"],(function(a,b,c,d,e,f,g){"use strict";var h=d("ChatConfig").get("sidebar.min_friends"),i=d("ChatConfig").get("sidebar.minimum_width"),j=d("ChatConfig").get("sidebar.hide_divebar_off_homepage");function k(){return c("getViewportDimensions")()}function a(a,b,d){l(a,function(a,d){var e=c("ChatSidebarStore").isEnabled();b(a&&e,e?d:d.concat([c("ChatSidebarHideReason").NOT_ENABLED]))},d)}function l(a,b,e){d("OrderedFriendsList").getActiveList(function(d){var f=a||k();f=f.width>i;d=d.length<h;var g=!0,l=[];j&&!m(e)&&(g=!1,l.push(c("ChatSidebarHideReason").OFF_HOMEPAGE));f||(g=!1,l.push(c("ChatSidebarHideReason").VIEWPORT_INCAPABLE));d&&(g=!1,l.push(c("ChatSidebarHideReason").LOW_FRIEND_COUNT));b(g,l)})}function m(a){a=a?a.getPath():new(c("URI"))(window.location.href).getPath();return a==="/"}function b(){return c("ChatSidebarStore").getVisibleType()==="sidebar"}function e(){return c("ChatSidebarStore").getVisibleType()==="buddylist"}g.getViewport=k;g.shouldShowSidebar=a;g.shouldShowSidebarIgnoreEnabled=l;g.isOnHomepage=m;g.isSidebarVisible=b;g.isBuddyListVisible=e}),98);
__d("MeetupExperiments",["RTWebIncomingRingConfiguration","ZenonSignalingProtocol","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return!(c("gkx")("1224637")||c("gkx")("1443572"))}function b(){return c("gkx")("1456547")}function e(){return d("RTWebIncomingRingConfiguration").isSupportedClientForProtocol(c("ZenonSignalingProtocol").MW)&&c("gkx")("1545140")}g.sendCreatorNotifications=a;g.supportJoinerWaitingLobby=b;g.supportLinkCreation=e}),98);
__d("XMessengerNewProductQPImpressionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/new_product_qp/log_impression/",{})}),null);
__d("BuddyListNub",["csx","cx","fbt","Arbiter","AsyncRequest","AvailableList","BootloadedComponent.react","CSS","ChannelConnection","ChatOptions","ChatSidebarActions","ChatSidebarStore","ChatSidebarVisibility","ChatVisibility","DOM","Dock","Event","JSResource","KeyboardShortcuts","Keys","MeetupExperiments","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","PresenceUtil","ReactDOM","Run","Style","Toggler","XMessengerNewProductQPImpressionController","emptyFunction","intlNumUtils","react","translateKey"],(function(a,b,c,d,e,f,g,h,i){var j,k=j||b("react"),l=40,m=253,n="277px",o=b("MeetupExperiments").supportLinkCreation();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){var g;g=a.call(this)||this;a.prototype.init.call(babelHelpers.assertThisInitialized(g),c);g.root=c;g.orderedList=d;g.button=b("DOM").find(c,"a.fbNubButton");g.unreadCount=b("DOM").find(c,"span._5ayx");g.label=b("DOM").find(c,"span.label");g.buddyListTitle=b("DOM").find(c,".titlebarTextWrapper");g.body=b("DOM").scry(c,"div.fbNubFlyoutBody")[0];g.container=b("Parent").bySelector(c,"._56ox");g._exposedMessengerDesktopUpsell=!1;var h=b("DOM").find(c,"div.fbNubFlyoutTitlebar");b("Toggler").createInstance(h).setSticky(!1);b("Toggler").createInstance(c).setSticky(!0);var j=b("DOM").scry(c,"._7oue");f&&b("Run").onAfterLoad(function(){g.dropdown=b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:"buddylist"}),f)});d.subscribeOnce("render",g.flyoutContentChanged.bind(babelHelpers.assertThisInitialized(g)));b("Run").onAfterLoad(function(){var a=b("DOM").find(h,"div._4k48");a&&b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);a=b("DOM").find(g.button,"div._1us9");a&&b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);if(o){a=b("DOM").find(h,"div._8_wi");b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarVideoCallLink.react").__setRef("BuddyListNub"),className:"_8_v6"}),a);a=b("DOM").find(g.button,"div._8_v8");b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarVideoCallLink.react").__setRef("BuddyListNub"),className:"_8_v6"}),a)}a=b("DOM").find(g.button,"div._1usa");a&&b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:"buddylist_nub"}),a);a=b("DOM").find(h,"div._3gl7");a&&b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub")}),a);a=b("DOM").find(g.button,"div._3gll");a&&b("ReactDOM").render(k.jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:k.jsx("span",{}),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub"),className:"newGCF"}),a)});d.setScrollContainer(g.body);b("AvailableList").subscribe("buddylist/availability-changed",g._updateCount.bind(babelHelpers.assertThisInitialized(g)));b("Arbiter").subscribe("chat/connect",function(){return g._handleConnect(!0)});b("Arbiter").subscribe("chat/option-changed",function(a,b){b.name=="hide_groups"?g.onResize():b.name==="hide_buddylist"&&(b.value?g.hide():g.show())});b("ChannelConnection").subscribe(b("ChannelConnection").CONNECTED,function(){return g._updateView()});b("ChannelConnection").subscribe(b("ChannelConnection").SHUTDOWN,function(){return g._updateView()});b("ChannelConnection").subscribe(b("ChannelConnection").RECONNECTING,function(){return g._updateView()});b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],function(){return g._updateView()});g.subscribe("show",g.onShow.bind(babelHelpers.assertThisInitialized(g)));g.subscribe("hide",g.onHide.bind(babelHelpers.assertThisInitialized(g)));g.subscribe("resize",g.onResize.bind(babelHelpers.assertThisInitialized(g)));b("Event").listen(c,"keydown",g._onKeyDown.bind(babelHelpers.assertThisInitialized(g)));b("Event").listen(g.button,"click",g.onButtonClick.bind(babelHelpers.assertThisInitialized(g)));b("KeyboardShortcuts").register("q",function(a){g._isOpen||(g.onButtonClick(),g.show()),a.prevent()},{persistOnTransition:!0,shortcutInfo:{displayKeys:[b("translateKey")("q")],description:i._(/*FBT_CALL*/"Search Messenger contacts"/*FBT_CALL*/)}});b("Arbiter").subscribe("minisidebar/show",g.hide.bind(babelHelpers.assertThisInitialized(g)));b("Arbiter").subscribe("sidebar/visibility",function(a,b){b?g.hide():g._onSidebarHide()});b("Style").set(g.body,"min-height",n);b("Arbiter").subscribe("sidebar/typeahead/active",function(a,c){c?(g._typeaheadActive=!0,b("CSS").hide(g.body.parentNode),g.orderedList.hide(),g.onResize()):(g._typeaheadActive=!1,g.onResize(),b("CSS").show(g.body.parentNode),g.orderedList.show())});b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&b("ChatSidebarStore").getVisibleType()==="buddylist"&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.length>0&&g.show(),b("Event").listen(h,"click",function(a){b("CSS").matchesSelector(a.target,".titlebarTextWrapper")&&g._syncHideBuddylist(!0)}),j.forEach(function(a){var c=this;b("Event").listen(a,"click",function(a){c._syncHideBuddylist(!0)})},babelHelpers.assertThisInitialized(g)),g._updateView()});return g}var d=c.prototype;d._handleVisibilityChange=function(){this._updateView(),b("ChatVisibility").isOnline()||this.hide()};d._updateView=function(a){var c;if(!b("ChatVisibility").isOnline())a=i._(/*FBT_CALL*/"Chat"/*FBT_CALL*/);else if(b("ChannelConnection").disconnected())a=i._(/*FBT_CALL*/"{Chat} (Disconnected)"/*FBT_CALL*/,[i._param("Chat",i._(/*FBT_CALL*/"Chat"/*FBT_CALL*/))]);else{var d=b("PresenceStatus").getOnlineCount();if(d){var e=b("DOM").create("span",{className:"count"},"("+b("intlNumUtils").formatNumberWithThousandDelimiters(d)+")");a=i._(/*FBT_CALL*/{"*":"{Chat} {number-available}"}/*FBT_CALL*/,[i._param("number-available",e,[0,d]),i._param("Chat",i._(/*FBT_CALL*/"Chat"/*FBT_CALL*/))])}else a=i._(/*FBT_CALL*/"Chat"/*FBT_CALL*/),c=!0}this._setPresenceIcon();this._setUnread();this._setLabel(a,c);this._updateBuddyListTitle();this.buttonContentChanged()};d._updateBuddyListTitle=function(){var a,c=i._(/*FBT_CALL*/"Chat"/*FBT_CALL*/),d="_6d4h";if(!b("ChatVisibility").isOnline()||b("ChannelConnection").disconnected())a=b("DOM").create("div",{"class":d},c);else{var e=b("PresenceStatus").getOnlineCount(),f;e&&(d="_6d4h _6d4i",f=b("DOM").create("div",{"class":"_6d4j"},i._(/*FBT_CALL*/"{subTitle} online"/*FBT_CALL*/,[i._param("subTitle",b("intlNumUtils").formatNumberWithThousandDelimiters(e))])));e=b("DOM").create("div",{"class":d},c);f&&b("DOM").appendContent(e,f);a=e}d=this.buddyListTitle.textContent||this.buddyListTitle.innerText;if(a&&d!==a){c=this.buddyListTitle.cloneNode(!0);b("DOM").setContent(c,a);b("DOM").replace(this.buddyListTitle,c);this.buddyListTitle=c}};d._setPresenceIcon=function(){b("CSS").conditionClass(this.root,"offline",!b("ChatVisibility").isOnline()||b("ChannelConnection").disconnected())};d.onButtonClick=function(){if(!b("ChatSidebarStore").isInitialized())return!0;b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){c=b("ChatSidebarStore").isEnabled();!c&&a?b("ChatSidebarActions").enable("sidebar"):b("ChatSidebarActions").show(c&&a?"sidebar":"buddylist")})};d.onHide=function(){this._isOpen=!1,this._buddyListRenderSubscription&&(this.orderedList.unsubscribe(this._buddyListRenderSubscription),this._buddyListRenderSubscription=null),this._hideBuddyList(),b("Arbiter").inform("buddylist/hide")};d._onKeyDown=function(a){a=b("Event").getKeyCode(a);if(a===b("Keys").ESC&&!b("CSS").hasClass(this.root,"menuOpened")){this.hide();return!1}else a==b("Keys").RETURN&&b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){b("ChatSidebarActions").enable(a?"sidebar":"buddylist")})};d._onSidebarHide=function(a){var c=this;b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.lenth>0?c.show():c.hide()})};d.onResize=function(){var a=this._typeaheadActive?b("Dock").getMaxFlyoutHeight(this.root)-60:m;b("Arbiter").inform("buddyList/resized",a,"persistent");this._typeaheadActive?b("Style").set(this.body,"max-height","none"):b("Style").set(this.body,"max-height",n);a=Math.max(250,a);a=Math.floor(a/l);this.orderedList.setNumTopFriends(a,!1,"buddylist")};d._showBuddyList=function(){var a=this;this._buddyListRenderSubscription=this.orderedList.subscribe("render",function(){b("Style").get(a.body,"height")!=n&&b("Style").set(a.body,"height",n)});this.orderedList.show()};d._hideBuddyList=function(){this.orderedList.hide()};d.onShow=function(){this._isOpen=!0;b("ChannelConnection").disconnected()?(b("ChannelConnection").reconnect(),this._showBuddyList()):b("ChatVisibility").goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(!1);if(!this._exposedMessengerDesktopUpsell){this._exposedMessengerDesktopUpsell=!0;var a=b("XMessengerNewProductQPImpressionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").send()}};d._setLabel=function(a,c){var d=this.label.textContent||this.label.innerText;if(d!==a){d=this.label.cloneNode(!0);b("DOM").setContent(d,a);b("DOM").replace(this.label,d);this.label=d}this.throbber&&b("CSS").conditionShow(this.throbber,!!c)};d._setUnread=function(a){b("CSS").conditionShow(this.unreadCount,!!a)};d._updateCount=function(){this._updateView()};d._syncHideBuddylist=function(a){b("ChatOptions").setSetting("hide_buddylist",a,"buddylist"),new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(b("emptyFunction")).setErrorHandler(b("emptyFunction")).setData({hide_buddylist:a,window_id:b("PresenceUtil").getSessionID()}).setAllowCrossPageTransition(!0).send()};return c}(b("NubController"));e.exports=a}),null);
__d("ChatHovercard",["Arbiter","AsyncLoader","Bootloader","TimeSlice","debounce","emptyFunction","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=5,h=new(b("AsyncLoader"))("/ajax/chat/hovercard/sidebar.php","hover");b("Arbiter").subscribe("Hovercard/dirty",h.reset.bind(h));function i(a,c){var d=function(){h.get(a,c)};b("TimeSlice").guard(d,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}function j(a,c){if(!a)return;i(a,function(d){b("setTimeoutAcrossTransitions")(function(){if(!d)return;b("Bootloader").loadModules(["Hovercard"],function(b){b=b.getDialog(d);if(!b)return;a==c.getActiveID()&&c.showHovercard(a,b)},"ChatHovercard")},0)})}function k(a,b){var c=[];function d(b){b>=0&&b<a.length&&c.push(a[b])}b=a.indexOf(b);if(b>-1){d(b);for(var e=1;e<g;e++)d(b+e),d(b-e)}return c.filter(function(a){return a})}function l(a,c){c=c.getActiveID();if(c){a=a.getShowingUsers();a=k(a,c);i(a,b("emptyFunction"))}}function a(a){var c=a.getHoverController();c.registerDefault(j);c.subscribe("hover",b("debounce")(l.bind(null,a,c),100))}e.exports=a}),null);
__d("ChatOrderedListHover",["csx","ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","clearTimeout","gkx","mixin","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f,g){var h;function i(a){b("CSS").addClass(a,"fetching")}function j(a){b("CSS").removeClass(a,"fetching")}a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d._orderedList=c;d._root=c.getRoot();b("Event").listen(d._root,"mouseover",d._mouseOver.bind(babelHelpers.assertThisInitialized(d)));b("Event").listen(d._root,"mouseleave",d._mouseLeave.bind(babelHelpers.assertThisInitialized(d)));c.subscribe("click",b("shield")(d._hide,babelHelpers.assertThisInitialized(d)));return d}var d=c.prototype;d._mouseOver=function(a){if(this._paused)return;a=a.getTarget();a=b("Parent").bySelector(a,"._42fz")||b("Parent").bySelector(a,"._5a58");a&&this._setActiveItem(a)};d._mouseLeave=function(a){this._setActiveItem(null)};d._clearTimeouts=function(){this._showTimeout&&b("clearTimeout")(this._showTimeout),this._showTimeout=null,this._hideTimeout&&b("clearTimeout")(this._hideTimeout),this._hideTimeout=null,this._hoverTimeout&&b("clearTimeout")(this._hoverTimeout),this._hoverTimeout=null};d._hide=function(){this._showingDialog&&(this._showingDialog.hide(),this._showingDialog=null,this._showingID=null)};d._show=function(){var a=this.getActiveID(),c=!1;this._defaultHandler&&(c=!0,(h||(h=b("ErrorUtils"))).applyWithGuard(this._defaultHandler,{},[a,this]));c&&this._showingID!=this.getActiveID()&&i(this._activeItem)};d._setActiveItem=function(a){var c=this;if(a!=this._activeItem){this._clearTimeouts();this._activeItem&&j(this._activeItem);if(a){this._activeItem=a;a=b("gkx")("1353340");var d=a?1100:this._showingDialog?0:600;this._showTimeout=b("setTimeoutAcrossTransitions")(function(){return c._show()},d);a?this._hoverTimeout=b("setTimeoutAcrossTransitions")(function(){c.inform("hover")},1e3):this.inform("hover")}else this._activeItem=null,this._hideTimeout=b("setTimeoutAcrossTransitions")(function(){return c._hide()},10),this.inform("leave")}};d.registerDefault=function(a){this._defaultHandler=a};d.getActiveID=function(){var a=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return a||null};d.showHovercard=function(a,c){var d=this;if(a==this.getActiveID()&&a!=this._showingID){this._clearTimeouts();j(this._activeItem);this._hide();this._showingDialog=c;this._showingID=a;var e=c.subscribe("mouseenter",this._setActiveItem.bind(this,this._activeItem)),f=c.subscribe("mouseleave",function(){e.unsubscribe(),d._setActiveItem(null)}),g=c.subscribe("hide",function(){d.inform("hovercard_hide"),e.unsubscribe(),f.unsubscribe(),g.unsubscribe()});c.enableBehavior(b("LayerHideOnBlur")).setContext(this._activeItem).setPosition("left").show();this.inform("hovercard_show")}};return c}(b("mixin")(b("ArbiterMixin")));Object.assign(a.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_hoverTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});e.exports=a}),null);
__d("ChatSidebarConstants",[],(function(a,b,c,d,e,f){"use strict";var g=32;function a(){return g}function b(){return g+8}f.IMAGE_SIZE=g;f.getImageSize=a;f.getItemHeight=b}),66);
__d("ChatSidebarUserDetailsFactory",["AvailableListConstants","LastActiveTimes","PresencePrivacy","PresenceStatusStore","ShortProfilesStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d={},e=[];a.forEach(function(a){if(!Object.prototype.hasOwnProperty.call(d,a)){var c=h(a,b);d[a]=c;c||e.push(a)}});e.length>0&&c("ShortProfilesStore").getMulti(e);return d}function h(a,b){var e=c("ShortProfilesStore").getNow(a);if(e){var f=c("PresenceStatusStore").get(a);return{shortProfile:e,presencePrivacyAllows:c("PresencePrivacy").allows(a),lastActiveTime:d("LastActiveTimes").getShortDisplay(a),unreadCount:0,isPlaying:b?c("PresenceStatusStore").getIsPlaying(a):!1,status:f===c("AvailableListConstants").ACTIVE?f:null}}return null}g.getUsersDetailedData=a;g._getDetailsForUserId=h}),98);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=[],i=!1;function a(a){a=c("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:c("TimeSlice").PropagationType.ORPHAN});i?c("requestIdleCallback")(a):h.push(a)}c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){["all_pagelets_displayed","e2e"].indexOf(b.event)>-1&&!i&&(i=!0,h.forEach(function(a){c("requestIdleCallback")(a)}))});g["default"]=a}),98);
__d("ChatOrderedList",["csx","Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","Bootloader","CSS","ChatConfig","ChatHovercard","ChatOptions","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarPreloadStore","ChatSidebarStore","ChatSidebarUserDetailsFactory","CurrentUser","DOM","DataStore","Event","MessengerDivebarSizingTypedLogger","Parent","PresenceOrderedList","PresencePrivacy","ReactDOM","ShortProfilesStore","debounceAcrossTransitions","emptyFunction","gkx","mixin","onAfterDisplay","qex","react"],(function(a,b,c,d,e,f,g){var h,i=h||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g){var h;h=a.call(this)||this;h._debouncedRender=b("emptyFunction");h._render=function(){if(!h._isVisible||h._isHovering){h._isHovering&&(h._skippedRenderDuringHover=!0);return}b("PresenceOrderedList").getSorted(h._numTopFriends,function(a){var c=b("CurrentUser").isWorkUser()?b("PresenceOrderedList").getAllSorted(a.concat(h._nearby)).filter(function(a){a=b("ShortProfilesStore").getNow(a);return!a||a.type==="fb4c"}):b("PresenceOrderedList").getAvailableSorted(a.concat(h._nearby)),d=b("CurrentUser").isWorkUser()?b("PresenceOrderedList").getAllSorted(a.concat(h._nearby)).filter(function(a){a=b("ShortProfilesStore").getNow(a);return a&&a.type!=="fb4c"}):[];a=a.filter(function(a){return!h._nearby||h._nearby.indexOf(a)===-1});var e=b("PresencePrivacy").getVisibility()==b("PresencePrivacy").ONLINE?h._nearby.filter(function(a){return b("PresencePrivacy").allows(a)}):h._nearby,f=b("PresencePrivacy").getVisibility()==b("PresencePrivacy").ONLINE?a.filter(function(a){return b("PresencePrivacy").allows(a)}):a;a=b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_WHITELIST&&b("PresencePrivacy").getVisibility()?a.filter(function(a){return!b("PresencePrivacy").allows(a)}):[];var g=b("ChatSidebarStore").isAfterDomLoad(),j=h._chatSidebarRecentCallsStore?h._chatSidebarRecentCallsStore.getState():{},k=h._chatSidebarRecentCallsStore?h._chatSidebarRecentCallsStore.getParticipants():[];k=b("ChatSidebarUserDetailsFactory").getUsersDetailedData([].concat(c,e,a,f,k,d),g);g=h._orderedListComponent;b("ReactDOM").render(i.jsx(g,{adminedPages:h._adminedPages,availableUsers:c,groups:h._groups,isAfterDomLoad:b("ChatSidebarStore").isAfterDomLoad(),isSidebar:h._isSidebar,isUserOffline:b("PresencePrivacy").isUserOffline(),marketplaceThreads:h._marketplaceThreads,maxItemSlots:h._maxItemSlots+1,nearby:e,offlineUsers:a,pageListModule:h._pageListModule,pymmList:h._pymmList,recentCalls:j,scrollContainer:h._scrollContainer,topUsers:f,usersDetailedData:k,workOthers:d}),h._orderedList);h.inform("render")})};h._debouncedRender=b("debounceAcrossTransitions")(h._render,300);h._typeAheadActive=!1;h._root=d;h._isVisible=!1;h._excludedIds={};h._numTopFriends=5;h._adminedPages=[];h._marketplaceThreads=[];h._pageListModule=null;h._pymmList={config:null,pages:[]};h._groups=[];h._nearby=[];h._hoverController=null;h._isHovering=!1;h._skippedRenderDuringHover=!1;h._isSidebar=c;h._maxItemSlots=0;h._orderedListComponent=g;h._chatSidebarRecentCallsStore=null;h._orderedList=b("DOM").find(h._root,".fbChatOrderedList");b("Event").listen(h._orderedList,"mouseover",function(){h.isSidebar&&(h._isHovering=!0)});b("Event").listen(h._orderedList,"mouseout",function(){h._isHovering=!1,h._skippedRenderDuringHover&&(h._skippedRenderDuringHover=!1,h._debouncedRender())});h._scrollableOrderedList=b("Parent").byClass(h._root,"scrollableOrderedList");h._scrollableArea=b("Parent").byClass(h._root,"scrollable");c&&new(b("ChatHovercard"))(babelHelpers.assertThisInitialized(h));b("Arbiter").subscribe("jslogger/dump",function(a,c){h.getSortedList(function(a){c.chat_lists=c.chat_lists||{sorted_list:a,available_list:b("PresenceOrderedList").getAvailableSorted(),excluded_list:h._excludedIds}})});b("Arbiter").subscribe("sidebar/typeahead/active",function(a,b){h._typeAheadActive=b,h._render()});b("ShortProfilesStore").addListener(function(){return h._debouncedRender()});b("ChatSidebarStore").addListener(function(){return h._debouncedRender()});e=b("qex")._("890");e&&b("Bootloader").loadModules(["ChatSidebarRecentCallsStore"],function(a){h._chatSidebarRecentCallsStore=a,a.addListener(function(){return h._debouncedRender()})},"ChatOrderedList");b("onAfterDisplay")(function(){b("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return h._debouncedRender()}),b("AvailableList").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(){return h._debouncedRender()})});return h}var d=c.prototype;d.getShowingUsers=function(){return b("DOM").scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode)};d.getUserForNode=function(a){return b("DataStore").get(a,"id")||b("DataStore").get(a,"serverthreadid")};d.getHoverController=function(){this._hoverController||(this._hoverController=new(b("ChatOrderedListHover"))(this));return this._hoverController};d.getItemHeight=function(){return b("ChatSidebarConstants").getItemHeight()};d.getRoot=function(){return this._root};d.getSortedList=function(a){b("PresenceOrderedList").getSorted(this._numTopFriends,function(b){return a(b)})};d.hide=function(){if(!this._isVisible)return;this._isVisible=!1;b("CSS").hide(this._scrollableOrderedList||this._root);this.inform("hide")};d.setNumTopFriends=function(a,c,d){var e=this;b("ChatSidebarPreloadStore").onLoaded(function(f){var g=f.groups,h=f.nearby,i=f.adminedPages,j=f.marketplaceThreads,k=f.pageListModule;f=f.pymmList;var l=new(b("MessengerDivebarSizingTypedLogger"))();l.setMaxItemSlots(a).setSidebarType(d);a--;b("ChatConfig").get("show_header")&&a--;var m=!b("ChatOptions").getSetting("hide_businesses")&&f.pages&&d!=="buddylist";m&&(a-=3);i=b("ChatOptions").getSetting("hide_admined_pages")?[]:i;i.length&&d!=="buddylist"&&(a-=i.length+1);var n=(j==null?void 0:j.length)&&!b("ChatOptions").getSetting("hide_marketplace");n&&b("qex")._("892")&&d!=="buddylist"&&(e._marketplaceThreads=j,a-=j.length);e._maxItemSlots=a;n=a;j=b("ChatSidebarStore").getGroupsToShow(g||[])||[];g=m?f:{config:null,pages:[]};m=j.length;m===0&&b("gkx")("678261")&&!b("ChatOptions").getSetting("hide_groups")&&m++;m>0&&(n-=m+1);b("ChatConfig").get("nearby_friends_www_chatbar")&&h.length>0&&(n-=h.length+1);b("ChatConfig").get("show_admined_pages")&&i.length>0&&d!=="buddylist"&&(n-=i.length+1);b("ChatConfig").get("show_businesses")&&g.pages.length>0&&d!=="buddylist"&&(n-=2);f=n;n=Math.min(a,Math.max(n,b("ChatConfig").get("min_top_friends")||0));if(n!==e._numTopFriends||j.length!==e._groups.length||h.length!==e._nearby.length||i.length!==e._adminedPages.length||g.pages.length!==e._pymmList.pages.length){e._groups=j;e._numTopFriends=n;e._nearby=h;e._adminedPages=i;e._pageListModule=k;e._pymmList=g;l.setNumTopFriends(n).setNumNearby(h.length).setNumGroups(j.length).setNumAdminedPages(i.length).setNumPymm(g.pages.length);m=0;d==="buddylist"&&i.length>0&&(m+=i.length+1,l.setNumAdminedPages(0));d==="buddylist"&&g.pages.length>0&&(l.setNumPymm(0),m+=2);f+=m;n>f&&(f+=1);l.setNumTopFriendsShown(Math.max(f,0));b("ChatSidebarStore").getVisibleType()===d&&l.log();c?(typeof e._debouncedRender.reset==="function"&&e._debouncedRender.reset(),e._render()):e._debouncedRender()}})};d.show=function(){if(this._isVisible)return;this._isVisible=!0;b("CSS").show(this._scrollableOrderedList||this._root);this._render();this.inform("show")};d.isVisible=function(){return this._isVisible};d.setScrollContainer=function(a){b("DOM").contains(a,this._root)&&(this._scrollContainer=a)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("MercuryBootloadOnInteraction.react",["createCancelableFunction","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.state={Component:null},d.$3=function(a){a=d.state.interactionType==="click"?"click":a.type;d.setState({interactionType:a},function(){c("promiseDone")(d.props.loader.load(),function(a){d.props.takeOverRender?d.props.takeOverRender(function(){return d.$1(a)}):d.$1(a)})})},d.$2=function(a){d.setState({Component:a})},d.$4=function(a){d.state.interactionType!=="click"&&d.setState({interactionType:void 0})},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.componentDidMount=function(){this.$1=c("createCancelableFunction")(this.$2)};d.componentWillUnmount=function(){this.$1.cancel()};d.render=function(){var a={onFocus:this.$3,onMouseOver:this.$3,onClick:this.$3,onBlur:this.$4};if(!this.state.Component)return h.cloneElement(this.props.placeholder,a);a=this.state.Component;var b={};switch(this.state.interactionType){case"focus":b.autoFocus=!0;break;case"click":b.clicked=!0;break}return h.cloneElement(this.props.component,babelHelpers["extends"]({},b,{LazyLoadedComponent:a}))};return b}(h.PureComponent);g["default"]=a}),98);
__d("ChatTypeaheadCore",["csx","cx","fbt","Bootloader","CurrentUser","DOM","JSResource","LazyComponent.react","MeetupExperiments","MercuryBootloadOnInteraction.react","ReactDOM","emptyFunction","ge","onAfterDisplay","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react"),l,m="",n=[],o={search:"._58al",settings:"._5vmb",compose:"._5q85",groupcreate:"._1-4-",startvideocall:"._8_v6"},p=!1,q=c("emptyFunction"),r=d("MeetupExperiments").supportLinkCreation();function s(a,b){n.push(a),a==="search"&&(m=b?b:"")}function t(){p=!0}function u(){p=!1,q(),q=c("emptyFunction")}function v(a){!p?a():q===c("emptyFunction")&&(q=a)}function a(){n.forEach(function(a){if(!o[a])return;var b=c("DOM").scry(c("ge")("chatsearch"),o[a]);b&&b[0]&&(a!=="search"?b[0].click():l=b[0],b[0].focus())})}function b(a,b){if(!l){a=c("DOM").scry(a,"._3rhb input");a.length>0&&(l=a[0])}l&&(l.focus(),b.prevent())}function e(){return m}function w(a){c("onAfterDisplay")(function(){c("Bootloader").loadModules(["ChatSidebarSheet.react"],function(b){var e=c("ge")("chatsidebarsheet");d("ReactDOM").render(k.jsx(b,{className:"fbChatSidebarMessage",viewer:c("CurrentUser").getID(),isSideBar:a}),e)},"ChatTypeaheadCore")})}function f(a,b,e){w(e);var f=k.jsx("a",{href:"#",className:"_3a-4 _5q85",onClick:function(){return s("compose")}}),g=k.jsx("div",{className:"_46fv",children:k.jsx("a",{href:"#",className:"_1-4-",onClick:function(){return s("groupcreate")}})}),h=r?k.jsx("a",{href:"#",className:"_918g",onClick:function(){return s("startvideocall")}}):null,i=k.jsx("div",{className:"_5qth _6a _6e",children:k.jsx("a",{href:"#",className:"button _5vmb",onClick:function(){return s("settings")}})});d("ReactDOM").render(k.jsxs("div",{children:[k.jsx("div",{id:"chatsidebarsheet"}),k.jsx(c("MercuryBootloadOnInteraction.react"),{loader:c("JSResource")("ChatTypeaheadWrapper.react").__setRef("ChatTypeaheadCore"),placeholder:k.jsxs("div",{children:[k.jsx("div",{className:"_1nq2",children:k.jsx("div",{className:"_5iwm _5iwn _62it",children:k.jsx("label",{className:"_58ak _3rhb",children:k.jsx("input",{className:"_58al",type:"text",onChange:function(a){return s("search",a.target.value)},onFocus:function(a){return s("search",a.target.value)},onCompositionStart:t,onCompositionEnd:u,placeholder:j._(/*FBT_CALL*/"Search"/*FBT_CALL*/)})})})}),e?r?k.jsxs("div",{className:"_531b",children:[f,g,h,i]}):k.jsxs("div",{className:"_531b",children:[i,f,g]}):null]}),takeOverRender:v,component:k.jsx(c("LazyComponent.react"),{id:b,isSidebar:e})})]}),a)}g._handleInteraction=s;g._handleCompositionStart=t;g._handleCompositionEnd=u;g.takeOverRender=v;g.processInteractionsQueue=a;g.focusSearchField=b;g.getLastSearchQuery=e;g.deferRenderChatSidebarSheet=w;g.init=f}),98);
__d("MWCount.re",["MWCount.bs"],(function(a,b,c,d,e,f){c=(a=b("MWCount.bs")).Blue.load;f.Blue_load=c;d=a.Blue.killed;f.Blue_killed=d;e=a.Blue.NewMessage.Process.newMessage;f.Blue_NewMessage_Process_newMessage=e;b=a.Blue.NewMessage.Process.logMessage;f.Blue_NewMessage_Process_logMessage=b;c=a.Blue.NewMessage.Process.messagesReceived;f.Blue_NewMessage_Process_messagesReceived=c;d=a.Blue.NewMessage.reject;f.Blue_NewMessage_reject=d;e=a.Blue.NewMessage.Reject.old;f.Blue_NewMessage_Reject_old=e;b=a.Blue.NewMessage.Reject.suppress;f.Blue_NewMessage_Reject_suppress=b;c=a.Blue.NewMessage.lift;f.Blue_NewMessage_lift=c;d=a.Blue.Cookie.Lift.none;f.Blue_Cookie_Lift_none=d;e=a.Blue.Cookie.Lift.some;f.Blue_Cookie_Lift_some=e;b=a.Blue.Cookie.Lift.many;f.Blue_Cookie_Lift_many=b;c=a.Blue.Cookie.Show.none;f.Blue_Cookie_Show_none=c;d=a.Blue.Cookie.Show.one;f.Blue_Cookie_Show_one=d;e=a.Blue.Cookie.Show.many;f.Blue_Cookie_Show_many=e;b=a.Blue;f.Blue=b}),null);
__d("SUIModalCard.react",["cx","Locale","SUICloseButton.react","SUIErrorBoundary.react","SUITheme","joinClasses","react","withSUITheme"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.$1=function(a,b,c){return a+"px       "+b+"px       "+c+"px"};e.$2=function(a){a=i.Children.count(a)===1?a:Array.isArray(a)?a[0]:null;return i.isValidElement(a)?i.Children.only(a):null};e.render=function(){var a=this.props,b=a.children,e=a.footer,f=a.header,g=a.isFullBleed;g=g===void 0?!1:g;var h=a.shouldShowCloseButton;h=h===void 0?!1:h;a=a.height;var j=c("SUITheme").get(this),k=j.SUIModalCard,l=k.closeButtonPosition;l=l+c("SUICloseButton.react").getHeightForSize(j,"large");l=f?k.bodyVerticalMargin:l;var m=this.$2(b);m=m!=null?m.props.hasPadding!==!1:!1;m=g&&!f&&m;j=c("SUICloseButton.react").getHeightForSize(j,"large");return i.jsxs("div",{className:"_1py_",ref:this.props.cardRef,style:babelHelpers["extends"]({backgroundColor:k.backgroundColor,boxShadow:k.modalBoxShadow,height:(a=a)!=null?a:"inherit"},k.borderRadius!=null?{borderRadius:k.borderRadius}:{}),children:[h?i.jsx("span",{className:c("joinClasses")("layerCancel","_2ph_","_6ued"),style:{height:j,width:j,zIndex:2},children:i.jsx(c("SUICloseButton.react"),{"data-testid":void 0,layerCancel:!0,shade:this.props.shade,size:"large"})}):null,f,i.jsx("div",{className:"_jmh",style:babelHelpers["extends"]({},k.typeStyle,(a={},a[d("Locale").isRTL()?"marginLeft":"marginRight"]=m?"32px":null,a.padding=g?null:this.$1(l,k.bodyHorizontalMargin,k.bodyVerticalMargin),a)),children:i.jsx(c("SUIErrorBoundary.react"),{children:b})}),e]})};return b}(i.PureComponent);a.defaultProps={shouldShowCloseButton:!0};b=c("withSUITheme")(a);g["default"]=b}),98);
__d("SUIModalContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({labelID:void 0});c=b;g["default"]=c}),98);
__d("SUIModalFillViewportHeight",["csx","cx","CSS","DOM"],(function(a,b,c,d,e,f,g,h,i){a=function(){function a(a){this.$1=a}var b=a.prototype;b.enable=function(){this.$2=c("DOM").find(this.$1.getRoot(),"._1py_"),this.$3=c("DOM").create("div",{className:"_61mx"}),c("DOM").insertBefore(this.$2,this.$3),c("DOM").appendContent(this.$3,this.$2),d("CSS").addClass(this.$2,"_1rb6")};b.disable=function(){d("CSS").removeClass(this.$3,"_61mx"),d("CSS").removeClass(this.$2,"_1rb6")};return a}();g["default"]=a}),98);
__d("SUIModal.react",["csx","cx","AbstractDialog.react","LayerFadeOnShow","LayerHideOnBlur","LayerHideOnEscape","ReactLayer","SUIModalCard.react","SUIModalContext","SUIModalFillViewportHeight","joinClasses","react","uniqueID","withSUITheme"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={labelID:null},c.$1=function(a){c.props.onHide(a)},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){var d=b.labelID!==null;a=a.label==null&&a.labelledBy==null&&a.header!=null;return d===a?b:{labelID:a?c("uniqueID")():null}};var d=b.prototype;d.render=function(){var a=this.props,b=a["data-close-testid"],d=a.behaviors,e=a.cardRef,f=a.children,g=a.footer,h=a.header,i=a.interactionArea,l=a.isFullBleed,m=a.isShown,n=a.shade,o=a.shouldShowCloseButton,p=a.labelledBy,q=a.height;a=babelHelpers.objectWithoutPropertiesLoose(a,["data-close-testid","behaviors","cardRef","children","footer","header","interactionArea","isFullBleed","isShown","shade","shouldShowCloseButton","labelledBy","height"]);var r=o===!0?d.LayerHideOnBlur!==null:d.LayerHideOnBlur===c("LayerHideOnBlur"),s=o===!0?d.LayerHideOnEscape!==null:d.LayerHideOnEscape===c("LayerHideOnEscape");d.LayerHideOnBlur;d.LayerHideOnEscape;d=babelHelpers.objectWithoutPropertiesLoose(d,["LayerHideOnBlur","LayerHideOnEscape"]);var t;q!=null?t=babelHelpers["extends"]({},d,{SUIModalFillViewportHeight:c("SUIModalFillViewportHeight")}):t=d;p=(d=p)!=null?d:this.state.labelID;return j.jsx(c("SUIModalContext").Provider,{value:this.state,children:j.jsx(k,babelHelpers["extends"]({},a,{behaviors:t,className:c("joinClasses")("_d2i",i),hideOnEscape:s,includeHideSource:!0,isStrictlyControlled:!0,labelledBy:p,layerHideOnBlur:r,onHide:this.$1,shown:m,children:j.jsx(c("SUIModalCard.react"),{cardRef:e,"data-close-testid":b,footer:g,header:h,height:q,isFullBleed:l,shade:n,shouldShowCloseButton:o,children:f})}))})};return b}(j.PureComponent);a.defaultProps={behaviors:{},causalElementRef:function(){return null},isFullBleed:!1,preserveThemeFromContext:!1,shouldShowCloseButton:!0,width:400};var k=d("ReactLayer").createClass(d("AbstractDialog.react").createSpec({displayName:"SUIModal",addedBehaviors:{LayerFadeOnShow:c("LayerFadeOnShow")},titleClass:"._604x"}));b=c("withSUITheme")(a);g["default"]=b}),98);
__d("getSUILayerFooterUniform.fds",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{isFullBleed:!0,topBorderColor:a.layout.borderColor}}f["default"]=a}),66);
__d("getSUILayerHeaderUniform.fds",["cssVar","FDSPrivateTypeStyles"],(function(a,b,c,d,e,f,g,h){"use strict";var i=4;function a(a){var b=d("FDSPrivateTypeStyles").createTypeStyleGetter(a),c=a.borderRadius;return{backgroundColor:"#FFFFFF",bottomBorderColor:a.layout.borderColor,errorIconMarginLeft:"8px",horizontalPadding:16,typeStyle:b({color:"#1C1E21",fontSize:"16px",fontWeight:"bold"}),borderRadius:c.layer===i?void 0:c.layer}}g["default"]=a}),98);
__d("getSUIModalCardUniform.fds",["cssVar","FDSPrivateTypeStyles"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=d("FDSPrivateTypeStyles").createTypeStyleGetter(a);return{backgroundColor:"#FFFFFF",bodyHorizontalMargin:12,bodyVerticalMargin:20,cardBoxShadow:a.layout.card.boxShadow,closeButtonPosition:14,modalBoxShadow:a.layout.modal.boxShadow,typeStyle:b({color:"#1C1E21",fontSize:"12px"}),borderRadius:a.borderRadius.layer}}g["default"]=a}),98);
__d("FDSModal.react",["FDSPrivateCardSectionContext","FDSPrivateLoggingRegion.react","FDSPrivateThemeContext.react","SUIModal.react","SUIModalFillViewportHeight","getSUICloseButtonUniform.fds","getSUILayerFooterUniform.fds","getSUILayerHeaderUniform.fds","getSUIModalCardUniform.fds","makeFDSStandardComponent","makeSUIThemeGetter","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("makeSUIThemeGetter")({SUICloseButton:c("getSUICloseButtonUniform.fds"),SUILayerHeader:c("getSUILayerHeaderUniform.fds"),SUILayerFooter:c("getSUILayerFooterUniform.fds"),SUIModalCard:c("getSUIModalCardUniform.fds")});a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props;return h.jsx(c("FDSPrivateCardSectionContext").Provider,{value:!0,children:h.jsx(c("FDSPrivateLoggingRegion.react"),{name:"FDSModal",children:function(b){return h.jsx(c("FDSPrivateThemeContext.react").Consumer,{children:function(d){return h.jsx(c("SUIModal.react"),{behaviors:babelHelpers["extends"]({LayerFadeOnShow:null,SUIModalFillViewportHeight:c("SUIModalFillViewportHeight")},a.behaviors),cardRef:b,causalElementRef:a.getCausalElementRef,children:a.children,"data-close-testid":a["data-close-testid"],"data-testid":void 0,fixedTopPosition:a.fixedTopPosition,footer:a.footer,header:a.header,height:a.height,interactionArea:a.interactionArea,isFullBleed:!0,isShown:a.isShown,label:a.label,labelledBy:a.labelledBy,onHide:a.onHide,shade:a.shade,theme:i(d),titleID:a.labelledBy,width:a.width})}})}})})};return b}(h.Component);a.defaultProps={behaviors:{},getCausalElementRef:function(){return null},shade:"dark",width:600};b=c("makeFDSStandardComponent")("FDSModal",a);g["default"]=b}),98);
__d("SUIHorizontalLayout.react",["Locale","SUITheme","joinClasses","prop-types","react","withSUITheme"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(){return d("Locale").isRTL()?"marginLeft":"marginRight"}var j={display:"inline-block"};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a,b=this.props,d=b.children,e=b.className,f=b.display,g=b.margin,k=b.wrapChildren;b.theme;b=babelHelpers.objectWithoutPropertiesLoose(b,["children","className","display","margin","wrapChildren","theme"]);var l=c("SUITheme").get(this).SUIHorizontalLayout,m=(a={},a[i()]=l.margin,a.display="inline-block",a);f=f==="inline"?"inline-block":f;var n=k?function(b,c,a){return h.jsx("div",{style:a,children:b},c)}:function(b,c,a){return h.cloneElement(b,{style:a,key:c})};d=h.Children.toArray(d).filter(function(a){return!!a}).map(function(a,b,c){return b!==c.length-1?n(a,a.key||b,m):n(a,a.key||b,j)});l=c("joinClasses")(e||"",g||"");l&&(b=babelHelpers["extends"]({},b,{className:l}));return h.jsx("div",babelHelpers["extends"]({},b,{style:{display:f},children:d}))};return b}(h.PureComponent);a.propTypes={"data-testid":c("prop-types").string,display:c("prop-types").oneOf(["block","inline","flex"]).isRequired,theme:c("prop-types").instanceOf(c("SUITheme")),margin:c("prop-types").string,wrapChildren:c("prop-types").bool.isRequired};a.defaultProps={display:"inline",wrapChildren:!0};b=c("withSUITheme")(a);g["default"]=b}),98);
__d("SUILayerFooter.react",["cx","Locale","SUIHorizontalLayout.react","SUITheme","react","withSUITheme"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a=c("SUITheme").get(this).SUILayerFooter;return i.jsxs("div",{className:"_4iyh"+(a.isFullBleed===!1?" _3-8t":"")+(a.isFullBleed===!0?" _2pia":"")+" _2pi4",style:{borderTop:"1px solid "+a.topBorderColor},children:[i.jsx("span",{className:d("Locale").isRTL()?"_4iyi ellipsis":"ellipsis",children:this.props.leftContent}),i.jsx("span",{className:d("Locale").isRTL()?null:"_4iyi",children:i.jsxs(c("SUIHorizontalLayout.react"),{children:[this.props.secondaryButton,this.props.primaryButton]})})]})};return b}(i.PureComponent);b=c("withSUITheme")(a);g["default"]=b}),98);
__d("getSUIHorizontalLayoutUniform.fds",[],(function(a,b,c,d,e,f){"use strict";function a(){return{margin:8}}f["default"]=a}),66);
__d("FDSPrivateLayerFooter.react",["FDSPrivateThemeContext.react","SUILayerFooter.react","getSUIHorizontalLayoutUniform.fds","getSUILayerFooterUniform.fds","makeFDSStandardComponent","makeSUIThemeGetter","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("react").PureComponent;var i=c("makeSUIThemeGetter")({SUIHorizontalLayout:c("getSUIHorizontalLayoutUniform.fds"),SUILayerFooter:c("getSUILayerFooterUniform.fds")});b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=i(this.context);return h.jsx(c("SUILayerFooter.react"),{leftContent:a.leftContent,primaryButton:a.primaryButton,secondaryButton:a.secondaryButton,theme:b})};return b}(a);b.contextType=c("FDSPrivateThemeContext.react");e=c("makeFDSStandardComponent")("FDSPrivateLayerFooter",b);g["default"]=e}),98);
__d("FDSModalFooter.react",["FDSPrivateLayerFooter.react","FDSPrivateLoggingRegion.react","makeFDSStandardComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this;return h.jsx(c("FDSPrivateLoggingRegion.react"),{isDependentRegion:!0,name:"FDSModalFooter",children:function(b){return h.jsx(c("FDSPrivateLayerFooter.react"),babelHelpers["extends"]({},a.props,{forwardedRef:b}))}})};return b}(h.PureComponent);b=c("makeFDSStandardComponent")("FDSModalFooter",a);g["default"]=b}),98);
__d("SUIErrorComponentUtil",["cx","PositionEnum","Tooltip","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");h={errorMessage:c("prop-types").node,warningMessage:c("prop-types").node,errorTooltipPosition:c("PositionEnum").propType};d={errorTooltipPosition:"above"};function j(a){if(Boolean(a.errorMessage))return"error";return Boolean(a.warningMessage)?"warning":"none"}function k(a){return j(a)!=="none"}function a(a){var b;return!k(a)?Object.freeze({}):babelHelpers["extends"]({},c("Tooltip").propsFor((b=a.errorMessage)!=null?b:a.warningMessage,a.errorTooltipPosition),{"data-tooltip-alignh":"right"})}function b(a,b){a=j(a);if(a==="none")return null;b=b.SUIError;return a==="error"?b.error.borderColor:b.warning.borderColor}function e(a,b,d){a=j(a);if(a==="none")return null;b=b.SUIError;a=a==="error"?b.error.icon:b.warning.icon;return i.cloneElement(a,{className:c("joinClasses")("_1vvf",d)})}e.displayName=e.name+" [from "+f.id+"]";g.propTypes=h;g.defaultProps=d;g.getErrorLevel=j;g.hasError=k;g.getErrorTooltipProps=a;g.getErrorBorderColor=b;g.getErrorIcon=e}),98);
__d("SUILayerHeader.react",["cx","FlexLayout.react","SUIBorderUtils","SUICloseButton.react","SUIErrorComponentUtil","SUIModalContext","SUIText.react","SUITheme","autoFlipStyleProps","react","withSUITheme"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=12,k=12,l=["topLeft","topRight"];a=babelHelpers["extends"]({},d("SUIErrorComponentUtil").defaultProps,{hasCloseButton:!0});b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a=this,b=c("SUITheme").get(this),e=b.SUILayerHeader,f=this.props.fdsOverride_auxContent||this.props.button||this.props.link||this.props["switch"]||this.props.menu||null,g=e.horizontalPadding+(this.props.hasCloseButton?k+c("SUICloseButton.react").getHeightForSize(b,"large"):0),h=Boolean(this.props.subtitle)?i.jsx("div",{className:"_2pic",children:i.jsx(c("SUIText.react"),{color:"secondary",size:"body2",theme:b,children:this.props.subtitle})}):null,m=d("SUIErrorComponentUtil").getErrorIcon(this.props,b,"_34di"),n=(b=d("SUIErrorComponentUtil").getErrorBorderColor(this.props,b))!=null?b:e.typeStyle.color,o=Boolean(e.borderRadius)?d("SUIBorderUtils").getBorderRadiusStyles(l,e.borderRadius):void 0;return i.jsx(c("SUIModalContext").Consumer,{children:function(b){return i.jsx("div",{className:"_3lxv",style:c("autoFlipStyleProps")(babelHelpers["extends"]({backgroundColor:e.backgroundColor,borderBottom:"1px solid "+e.bottomBorderColor,padding:j,paddingLeft:e.horizontalPadding,paddingRight:g},o)),children:i.jsxs(c("FlexLayout.react"),{align:"center",justify:"all",children:[i.jsxs("div",{className:"_3lxw",children:[i.jsxs(c("FlexLayout.react"),{align:"center",children:[i.jsx("div",{"aria-level":"1",className:"ellipsis","data-hover":"tooltip","data-tooltip-display":"overflow",id:b.labelID,role:"heading",style:babelHelpers["extends"]({},e.typeStyle,{color:n}),children:a.props.title}),m&&i.cloneElement(m,babelHelpers["extends"]({},d("SUIErrorComponentUtil").getErrorTooltipProps(a.props),{style:c("autoFlipStyleProps")({marginLeft:e.errorIconMarginLeft})}))]}),i.jsx("div",{children:h})]}),f!=null&&i.jsx("div",{className:"_8mlk",children:f})]})})}})};return b}(i.PureComponent);b.defaultProps=a;e=c("withSUITheme")(b);g["default"]=e}),98);
__d("SUITextUniform.fds",["cssVar","FDSSystemFonts"],(function(a,b,c,d,e,f,g,h){"use strict";a={header1:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:24,lineHeight:28},header2:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:20,lineHeight:24},header3:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:16,lineHeight:20},header4:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:18},body1:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:18},body1_DEPRECATED:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:16,lineHeight:20},body2:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:13,lineHeight:17},body2_DEPRECATED:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:18},body3:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:12,lineHeight:16},body3_DEPRECATED:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:13,lineHeight:17},meta1:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:12,lineHeight:16},display:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:40,lineHeight:48},heading:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:24,lineHeight:32},subheading:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:20,lineHeight:24},headline:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:16,lineHeight:24},regular:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:20},regularUI:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:16},large:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:16,lineHeight:20},letterSpacing:"normal",medium:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:14,lineHeight:18},shade:{dark:"#1d2129",light:"#90949c",link:"#365899",medium:"#4b4f56",white:"#FFFFFF"},small:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:12,lineHeight:16},color:{blueLink:"#385898",disabled:"#BEC3C9",disabledDark:"#373737",interactive:"#1877F2",negative:"#FA383E",placeholder:"#8D949E",positive:"#00A400",primary:"#1C1E21",primaryDark:"#cccccc",secondary:"#606770",secondaryDark:"#4A4A4A",white:"#FFFFFF"},xlarge:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:18,lineHeight:24},xsmall:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:11,lineHeight:14},xxlarge:{fontFamily:d("FDSSystemFonts").FONT_FAMILY,fontSize:24,lineHeight:30}};b=a;g["default"]=b}),98);
__d("getSUIErrorUniform.fds",["cssVar","ix","Image.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(){return{error:{borderColor:"#FA383E",icon:j.jsx(c("Image.react"),{src:i("480267")})},warning:{borderColor:"#FFBA00",icon:j.jsx(c("Image.react"),{src:i("480789")})}}}g["default"]=a}),98);
__d("getSUILinkUniform.fds",["cssVar"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return{normalColor:a.colors.text.blueLink,hoverColor:a.colors.text.blueLink,inverseColor:"#FFFFFF",inverseHoverColor:"#FFFFFF"}}g["default"]=a}),98);
__d("FDSPrivateLayerHeader.react",["FDSPrivateThemeContext.react","SUIErrorComponentUtil","SUILayerHeader.react","SUITextUniform.fds","getSUICloseButtonUniform.fds","getSUIErrorUniform.fds","getSUILayerHeaderUniform.fds","getSUILinkUniform.fds","makeSUIThemeGetter","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("makeSUIThemeGetter")({SUICloseButton:c("getSUICloseButtonUniform.fds"),SUIError:c("getSUIErrorUniform.fds"),SUILayerHeader:c("getSUILayerHeaderUniform.fds"),SUILink:c("getSUILinkUniform.fds"),SUIText:function(){return c("SUITextUniform.fds")}});a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=i(this.context);b={errorMessage:a.errorMessage,errorTooltipPosition:a.errorTooltipPosition,hasCloseButton:a.hasCloseButton,subtitle:a.subtitle,theme:b,title:a.title,warningMessage:a.warningMessage};if(a.fdsOverride_auxContent)return h.jsx(c("SUILayerHeader.react"),babelHelpers["extends"]({},b,{fdsOverride_auxContent:a.fdsOverride_auxContent}));if(a["switch"])return h.jsx(c("SUILayerHeader.react"),babelHelpers["extends"]({},b,{"switch":a["switch"]}));if(a.button)return h.jsx(c("SUILayerHeader.react"),babelHelpers["extends"]({},b,{button:a.button}));return a.menu?h.jsx(c("SUILayerHeader.react"),babelHelpers["extends"]({},b,{menu:a.menu})):h.jsx(c("SUILayerHeader.react"),babelHelpers["extends"]({},b,{link:a.link?a.link:void 0}))};return b}(h.PureComponent);a.contextType=c("FDSPrivateThemeContext.react");a.defaultProps=d("SUIErrorComponentUtil").defaultProps;g["default"]=a}),98);
__d("FDSModalHeader.react",["FDSPrivateLayerHeader.react","FDSPrivateLoggingRegion.react","SUIErrorComponentUtil","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this;return h.jsx(c("FDSPrivateLoggingRegion.react"),{isDependentRegion:!0,name:"FDSModalHeader",children:function(b){return h.jsx(c("FDSPrivateLayerHeader.react"),babelHelpers["extends"]({},a.props,{forwardedRef:b,hasCloseButton:!0}))}})};return b}(h.PureComponent);a.defaultProps=d("SUIErrorComponentUtil").defaultProps;g["default"]=a}),98);
__d("SRXUIBadge.react",["cx","invariant","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i){var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.isInt=function(a){return parseInt(a,10)===a};d.render=function(){var a=this.props.count,b=this.props.maxcount;b==null&&(b=20);this.isInt(a)||i(0,186);this.isInt(b)||i(0,187);var d="_5ugh _5ugf _51lp"+(a>b?" _51lr":"")+(a===0?" hidden_elem":"");return j.jsx("span",{className:c("joinClasses")(this.props.className,d),children:a>b?b:a})};return b}(j.Component);g["default"]=a}),98);
__d("DockTabsViewportCalculator",["csx","Arbiter","DOM","DataStore","Dock","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=50;b=35;var j=b,k="dock-tab-viewport-inst";function l(a){return a?c("Vector").getElementDimensions(a).x:0}var m=function(){function a(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=!1,this.$7=!1,this.$8=!1,this.$2=new(c("SubscriptionsHandler"))(),this.$9(),this.$10()}var b=a.prototype;b.$9=function(){var a=this,b=this.$11.bind(this);this.$2.addSubscriptions(c("Event").listen(window,"resize",b),c("Dock").subscribe("resize",b),c("Arbiter").subscribeOnce("sidebar/initialized",b,"new"),c("FullScreen").subscribe("changed",function(){c("FullScreen").isFullScreen()?(a.$6=!0,a.$7=!1):(a.$6=!1,a.$7&&(c("setImmediate")(function(){b()}),a.$7=!1))}))};b.registerFantaTabCallbacks=function(a){this.$5=a};b.forceRecalculateFBDockWidth=function(){this.$10(),this.$12({forceRecalculateChatTabs:!1})};b.forceRecalculateChatTabs=function(){this.$12({forceRecalculateChatTabs:!0})};b.$11=function(){if(c("FullScreen").isFullScreen()||this.$6){this.$7=!0;return}this.forceRecalculateFBDockWidth()};b.$12=function(a){a=a.forceRecalculateChatTabs;var b=this.$13();b=b.chatTabAvailableWidth;this.$14(b,!!a)};b.$14=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};b.$13=function(){var a=this.$3;return{chatTabAvailableWidth:a}};b.$10=function(){this.$3=this.$15(),this.$16("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};b.$17=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var b=l(a),d=l(c("DOM").find(a,"._56ox"));a=l(c("DOM").scry(a,"._56oy")[0]);b=Math.max(b-d-a,0);return{buddyListNubWidth:d,employeeNubsWidth:b}};b.$15=function(){var a=c("getViewportDimensions").withoutScrollbars().width;a-=c("ViewportBounds").getLeft()+c("ViewportBounds").getRight();a-=i;var b=this.$17(),d=b.buddyListNubWidth;b=b.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,b);a-=this.$4;a-=j;return Math.max(a,0)};b.enableTestInforms_FOR_TEST_ONLY=function(){this.$8=!0};b.$16=function(a){this.$8&&c("Arbiter").inform(a)};b.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$13().chatTabAvailableWidth};b.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};return a}();function a(a){var b=c("ge")("pagelet_dock");if(!b||!c("DOM").contains(b,a))return null;a=d("DataStore").get(b,k);if(a instanceof m)return a;var e=c("DOM").scry(b,".fbDockWrapperRight .fbDock")[0];a=new m(e);d("DataStore").set(b,k,a);return a}g.getInstance=a}),98);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";e=9;var g=284,h=g+e;function a(){return h+1}function b(a){return Math.floor(a/h)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}f.getMinRequiredWidthForFirstFantaTab=a;f.getTabCountToFitWidth=b;f.getFantaTabModelFromCallbacks=c;f.getNumFantaTabsFromModel=d}),66);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(c("ExplicitRegistrationReactDispatcher"));b=new a({strict:!1});g["default"]=b}),98);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null});function a(a,b){c("FBPaymentsDispatcher").dispatch({type:h.SHOW_DIALOG,data:{dialogClass:a,dialogProps:b}})}function b(){c("FBPaymentsDispatcher").dispatch({type:h.HIDE_DIALOG,data:{}})}g.types=h;g.showDialog=a;g.hideDialog=b}),98);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,c("FBPaymentsDispatcher"))||this;b.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};return b}var e=b.prototype;e.__onDispatch=function(a){var b=a.type;a=a.data;switch(b){case d("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:a.dialogClass,dialogProps:a.dialogProps};this.__emitChange();break;case d("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};e.getState=function(){return this.$FBPaymentsDialogStore1};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.calculateState=function(){return c("FBPaymentsDialogStore").getState()};b.getStores=function(){return[c("FBPaymentsDialogStore")]};var d=b.prototype;d.UNSAFE_componentWillMount=function(){c("FBPaymentsDispatcher").explicitlyRegisterStore(c("FBPaymentsDialogStore"))};d.render=function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return h.createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};return b}(h.Component);b=c("FluxContainer").create(a);g["default"]=b}),98);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","ReactDOM","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){d("ReactDOM").render(h.jsx(c("FBPaymentsDialogContainer.react"),{}),a)}g.mount=a}),98);
__d("BootloaderGamesPresenceIconContainer.react",["BootloadOnRender.react","JSResource","LazyComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("BootloadOnRender.react"),{component:h.jsx(c("LazyComponent.react"),{userID:a.userID}),loader:c("JSResource")("GamesPresenceIconContainer.react").__setRef("BootloaderGamesPresenceIconContainer.react"),placeholder:h.jsx("div",{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FantaConst",[],(function(a,b,c,d,e,f){"use strict";b=2;c=10;var g={PERSONAL_COOKIE_ID:"t3",PERSONAL_FOCUS_COOKIE_ID:"lm3",PERSONAL_TIME_COOKIE_ID:"utc3",WORK_COOKIE_ID:"t3w",WORK_FOCUS_COOKIE_ID:"lm3w",WORK_TIME_COOKIE_ID:"utc3w"};function a(){return[g.PERSONAL_COOKIE_ID,g.PERSONAL_FOCUS_COOKIE_ID,g.PERSONAL_TIME_COOKIE_ID,g.WORK_COOKIE_ID,g.WORK_FOCUS_COOKIE_ID,g.WORK_TIME_COOKIE_ID]}f.DEFAULT_ALLOWED_RAISED_TABS=b;f.DEFAULT_MESSAGE_COUNT=c;f.cookieIDs=g;f.getCookieIDs=a}),66);
__d("PresenceState",["ErrorUtils","FantaConst","PresenceCookieManager","PresenceInitialData","debounceAcrossTransitions","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=c("PresenceInitialData").cookiePollInterval||2e3,i=c("PresenceInitialData").shouldSuppress||!1,j=[],k=[],l=null,m=null,n=0,o=null,p=0,q=["sb2","tr","tw","at","wml"].concat(d("FantaConst").getCookieIDs());function r(){return d("PresenceCookieManager").getSubCookie("state")}function s(){n=Date.now(),d("PresenceCookieManager").store(),w(m)}var t=c("debounceAcrossTransitions")(s,0);function u(a){(a==void 0||isNaN(a)||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)&&(a=0);return a}function v(a){var b={};a&&q.forEach(function(c){a&&a[c]&&(b[c]=a[c])});b.ut=n;for(var d=0,e=j.length;d<e;d++)c("ErrorUtils").applyWithGuard(j[d],null,[b]);m=b;return m}function w(a){p++;n=u(a&&a.ut);l||(l=c("setIntervalAcrossTransitions")(z,h));m=a;o===null&&(o=a);for(var b=0,d=k.length;b<d;b++)c("ErrorUtils").applyWithGuard(k[b],null,[a]);p--}function x(a){return a&&a.ut&&n<a.ut?!0:!1}function y(){var a=r();x(a)&&(m=a);return m}function z(){var a=r();x(a)&&w(a)}d("PresenceCookieManager").register("state",v);(function(){var a=y();if(a)w(a);else{w(v());return}})();function a(a){if(p)return;a?s():t()}function b(a){j.push(a)}function e(a){k.push(a)}function f(){return y()}function A(){return o}function B(){return i}g.verifyNumber=u;g.doSync=a;g.registerStateStorer=b;g.registerStateLoader=e;g.get=f;g.getInitial=A;g.shouldSuppress=B}),98);
__d("ChatActivity",["ArbiterMixin","Event","MercuryConfig","PresenceState","UserActivity","mixin"],(function(a,b,c,d,e,f,g){var h=c("MercuryConfig").activity_limit||6e4,i=c("MercuryConfig").idle_limit||18e5;a=c("MercuryConfig").idle_poll_interval||3e5;var j=Date.now(),k=!0;function l(){var a=Date.now();return!!(k&&a-j<h)}b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.isActive=l,b)||babelHelpers.assertThisInitialized(c)}return b}(c("mixin")(d("ArbiterMixin")));var m=new b();function n(){var a=j;j=Date.now();j-a>i&&d("PresenceState").doSync();m.inform("activity")}c("Event").listen(window,"focus",function(){k=!0,n()});c("Event").listen(window,"blur",function(){k=!1});c("UserActivity").subscribe(function(){n()});function o(a){a=a&&a.at&&d("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),b=o(d("PresenceState").get());b=Math.max(j,b);a-b>i&&m.inform("idle",a-b)},a);d("PresenceState").registerStateStorer(function(a){var b=o(a);b<j&&(a.at=j);return a});e=m;g["default"]=e}),98);
__d("ChatAppActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null});g["default"]=a}),98);
__d("ChatAppActions",["ChatAppActionTypes","ChatDispatcher"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").TTI})}function b(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").HIDE})}function d(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").UNHIDE})}function e(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").INITIAL_DISPLAY_DONE})}function f(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").LOAD})}g.tti=a;g.hide=b;g.unhide=d;g.setInitialDisplayDone=e;g.load=f}),98);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,c("ChatDispatcher"))||this;b.$ChatAppStore2={initialDisplayDone:!1,isHidden:!1,isInitialized:!1,isLoaded:!1};b.$ChatAppStore1=babelHelpers["extends"]({},b.$ChatAppStore2);return b}var d=b.prototype;d.__onDispatch=function(a){a=a.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(a){case c("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=!0;this.__emitChange();break;case c("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=!0;this.__emitChange();break;case c("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=!1;this.__emitChange();break;case c("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break;case c("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break}};d.getPreviousState=function(){return this.$ChatAppStore1};d.getState=function(){return this.$ChatAppStore2};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("ChatPerfInstrumentation",["BaseEventEmitter","ChatPerfTypedLogger","CurrentUser","FantaConst","PresenceState","Promise","emptyFunction","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g;a=b("CurrentUser").isWorkUser();c=a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID;d=b("PresenceState").getInitial();var h=d&&d[c]?d[c].length:0,i,j={_startTime:Number,_sidebarStartTime:Number,init:function(){j._startTime=(g||(g=b("performanceAbsoluteNow")))();return new(b("Promise"))(function(a){return a()})},initDivebar:function(){j._sidebarStartTime=(g||(g=b("performanceAbsoluteNow")))()},_log:function(a,c){c=(g||(g=b("performanceAbsoluteNow")))()-(c||j._startTime);i&&i.emit(a,c);var d=new(b("ChatPerfTypedLogger"))();d.setEvent(a).setDuration(c);d.setTabsOpen(h);d.log()},addPerfTimingsListener:function(a,c){i||(i=new(b("BaseEventEmitter"))());return i.once(a,c)},logInitStores:function(){j.logInitStores=b("emptyFunction"),j._log("chat_init_stores")},logInitData:function(){j.logInitData=b("emptyFunction"),j._log("chat_init_data")},logInitUI:function(){j.logInitUI=b("emptyFunction"),j._log("chat_init_ui")},logInitSound:function(){j.logInitSound=b("emptyFunction"),j._log("chat_init_sound")},logDisplayDone:function(){j.logDisplayDone=b("emptyFunction"),j._log("chat_display_done")},logTTI:function(){j.logTTI=b("emptyFunction"),j._log("tti")},logCHAT_CONVERSATION_TTI:function(){j.logCHAT_CONVERSATION_TTI=b("emptyFunction"),j._log("chat_conversation_tti")},logSIDEBAR_FROM_CLIENT_TTI:function(){j.logSIDEBAR_FROM_CLIENT_TTI=b("emptyFunction"),j._log("sidebar_from_client_tti",j._sidebarStartTime)},logSIDEBAR_DISPLAY_DONE:function(){j.logSIDEBAR_DISPLAY_DONE=b("emptyFunction"),j._log("sidebar_display_done",j._sidebarStartTime)}};e.exports=j}),null);
__d("ChatPrivacyActionController",["ChatVisibility","PresencePrivacy"],(function(a,b,c,d,e,f){a=function a(c,d){var e=this;this._userID=c;this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){var c=this;switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline())break;b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(c._userID)||c._togglePrivacy()});break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);break}};c=function(){d&&d(e._getState())};c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("MercuryNotificationRenderer",["fbt","CurrentUser","MercuryAssert","MercuryIDs","MercuryViewer","MessengerParticipants.bs","MessengerState.bs"],(function(a,b,c,d,e,f,g,h){var i="source:messenger_growth:event_upcoming_bump";function a(a,b){d("MercuryAssert").isThreadID(a),d("MessengerState.bs").getThreadMeta(c("CurrentUser").getID(),a,function(e){d("MessengerState.bs").getThreadMessagesRange(c("CurrentUser").getID(),a,0,1,function(c){c=c.length&&c[c.length-1];var f=[];c.tags!==void 0&&(f=f.concat(c.tags));c.log_message_data&&(c.log_message_data.message_type=="confirm_friend_request"||c.log_message_data.message_type=="work_invite_claimed")?b(h._(/*FBT_CALL*/"New contact added"/*FBT_CALL*/)):f.indexOf(i)!==-1?b(h._(/*FBT_CALL*/"You have an upcoming event."/*FBT_CALL*/)):c&&c.author!=d("MercuryViewer").getID()&&c.author!=null?d("MessengerParticipants.bs").get(c.author,function(c){var f=c.short_name,g=e.custom_nickname;if(g){c=d("MercuryIDs").getUserIDFromParticipantID(c.id);g[c]&&(f=g[c])}e.name?b(h._(/*FBT_CALL*/"{senderName} messaged {groupName}"/*FBT_CALL*/,[h._param("senderName",f),h._param("groupName",e.name)])):d("MercuryIDs").isGroupChat(a)?b(h._(/*FBT_CALL*/"{name} messaged your group"/*FBT_CALL*/,[h._param("name",f)])):b(h._(/*FBT_CALL*/"{name} messaged you"/*FBT_CALL*/,[h._param("name",f)]))}):b(h._(/*FBT_CALL*/"New message"/*FBT_CALL*/))})})}g.renderDocumentTitle=a}),98);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","MercuryNotificationRenderer","MercuryThreadInformer","PresenceState"],(function(a,b,c,d,e,f){"use strict";d=b("MercuryThreadInformer").get();var g=null,h=0,i=!1,j=0;function k(){if(g){g.stop();g=null;return!0}return!1}function l(a){a=a||j;h<=a&&(h=a,(k()||i)&&b("PresenceState").doSync())}f={blink:function(a,c){!g&&h<c&&(j=c,b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){g||(g=b("DocumentTitle").blink(a))}))},stopBlinking:function(){l()},blinkingElsewhere:function(){i=!0}};function m(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=h?null:a}function a(a){a=a&&m(a);a&&(h=a,k(),i=!1)}function c(a){var b=m(a);b||(a.sb2=h,i=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=0;for(var c in b)b[c].mark_as_read&&b[c].timestamp>=j&&b[c].timestamp>a&&(a=b[c].timestamp);a&&l(a)});b("ChatActivity").subscribe("activity",function(){return l()});c=b("PresenceState").getInitial();c&&(h=m(c)||0);e.exports=f}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MessengerServerPayloadTransformer.bs","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a,this.$2=new(c("KeyedCallbackManager"))(),this.$3=c("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4={},this.$7(),this.$8(),this.$6={}}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};var b=a.prototype;b.getCanonicalGroupThreadIDForParticipants=function(a,b){a=this.$9(a);var c=this.$10(a);c=this.$2.executeOrEnqueue(c,b);this.$11(a);return c};b.unsubscribe=function(a){a&&this.$2.unsubscribe(a)};b.$10=function(a){return a.sort().join(",")};b.$12=function(a,b){b=d("MercuryIDs").getThreadIDFromThreadFBID(b);this.$2.setResource(a,b);this.$4[b]=a};b.$11=function(a){var b=this.$10(a);b={canonical_group_key:b,participants:a};d("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",b,null,this.$1)};b.$7=function(){var a=this;d("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$1,mode:d("MercuryServerDispatcher").IMMEDIATE,handler:function(b){a.handleUpdate(b)}}})};b.$9=function(a){a.indexOf(this.$1)===-1&&a.push(this.$1);return a};b.handleUpdate=function(a){if(a.graphql_payload){var b=d("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,a.graphql_payload,a.for_page);this.$3.handleUpdate({threads:[b],payload_source:"server_search"})}b=a.canonical_group;if(b)for(var a in b)this.$12(a,b[a])};b.getNow=function(a){a=this.$10(this.$9(a));return this.$2.getResource(a)};b.$8=function(){var a=this;c("Bootloader").loadModules(["MercuryThreadInformer"],function(b){b=b.getForFBID(a.$1);var d=new(c("SubscriptionsHandler"))();d.addSubscriptions(b.subscribe("threads-deleted",function(b,c){for(var b in c)a.$4[b]&&(a.$2.setResource(a.$4[b],void 0),delete a.$4[b])}));a.$5=d},"MercuryCanonicalGroupThreadManager")};return a}();var h=new(c("MercurySingletonProvider"))(a);g["default"]=a}),98);
__d("FantaGetMessageActions",["FantaDispatcher","FantaTabActions","MercuryCanonicalGroupThreadManager","MercuryIDs","keyMirror","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";var h;c("requireWeak")("FantaAppStore",function(a){return h=a});var i=c("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_PARTICIPANT_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,ON_GET_THREAD_HREF_RESPONSE:null,REFRESH_THREAD:null,THREADS_UPDATED:null});function a(a,b){var e=b.length===1&&b[0].getInfo().render_type==="thread",f;if(e){e=b[0].getInfo().mercury_thread;e=d("MercuryIDs").getThreadIDFromThreadFBID(e.thread_fbid);d("FantaTabActions").replaceTab(a,e);return}if(b.length===1){e=b[0].info&&b[0].info.uid;e&&(f=d("MercuryIDs").getThreadIDFromUserID(e))}else if(b.length===0){c("FantaDispatcher").dispatch({type:i.CLEAR_PARTICIPANTS,tabID:a});return}else{var g=c("MercuryCanonicalGroupThreadManager").get();e=b.map(function(a){return a.info.uid});c("FantaDispatcher").dispatch({type:i.CLEAR_PREVIEW,tabID:a,tokens:b});var j=g.getCanonicalGroupThreadIDForParticipants(Array.from(e),function(d){g.unsubscribe(j);if(h){var e=h.getState();if(!e.tabGroup.tabs.get(a))return}d&&c("FantaDispatcher").dispatch({type:i.ADD_PARTICIPANTS,previewTabID:d,tabID:a,tokens:b})})}f&&c("FantaDispatcher").dispatch({type:i.ADD_PARTICIPANTS,previewTabID:f,tabID:a,tokens:b})}function b(a,b){c("FantaDispatcher").dispatch({type:i.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:b})}function e(a){c("FantaDispatcher").dispatch({type:i.REFRESH_THREAD,threadID:a})}function f(a){c("FantaDispatcher").dispatch({type:i.ON_GET_THREAD_RESPONSE,thread:a})}function j(a,b){c("FantaDispatcher").dispatch({type:i.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:b})}function k(a){c("FantaDispatcher").dispatch({type:i.ON_GET_PARTICIPANT_RESPONSE,tabID:a})}function l(a){c("FantaDispatcher").dispatch({type:i.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})}function m(a){c("FantaDispatcher").dispatch({type:i.THREADS_UPDATED,threads:a})}function n(a,b){c("FantaDispatcher").dispatch({type:i.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:b})}function o(a,b){c("FantaDispatcher").dispatch({type:i.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:b})}function p(a,b){c("FantaDispatcher").dispatch({type:i.ON_GET_THREAD_HREF_RESPONSE,tabID:a,href:b})}g.Types=i;g.addParticipants=a;g.onBootloadTypeahead=b;g.refreshThread=e;g.onGetThreadResponse=f;g.onGetThreadPreviewResponse=j;g.onParticipantResponse=k;g.onShowContextBannerTimer=l;g.threadsUpdated=m;g.onPrivacyStateChange=n;g.onPageNullResponse=o;g.onGetThreadHrefResponse=p}),98);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_SOLID_REACTION_SHEET:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null,OPEN_SOLID_REACTION_SHEET:null}),i=d("LogHistory").getInstance("fanta_sheets");function j(a){c("FantaDispatcher").dispatch(a),i.log(a.type,a.tabID)}function a(a){j({type:h.OPEN_SOLID_REACTION_SHEET,tabID:a})}function b(a){j({type:h.CLOSE_SOLID_REACTION_SHEET,tabID:a})}function e(a){j({type:h.OPEN_USER_FOCUS_SHEET,tabID:a})}function f(a){j({type:h.OPEN_BYPASS_FOCUS_SHEET,tabID:a})}function k(a){j({type:h.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})}function l(a){j({type:h.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})}function m(a){j({type:h.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})}function n(a){j({type:h.CLOSE_ADD_FRIENDS_SHEET,tabID:a})}function o(a){j({type:h.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})}function p(a){j({type:h.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})}function q(a){j({type:h.OPEN_READ_ONLY_SHEET,tabID:a})}function r(a){j({type:h.CLOSE_READ_ONLY_SHEET,tabID:a})}function s(a){j({type:h.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})}function t(a){j({type:h.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})}function u(a){j({type:h.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})}function v(a){j({type:h.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})}function w(a){j({type:h.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})}function x(a){j({type:h.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})}function y(a){j({type:h.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})}function z(a,b){j({type:h.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})}function A(a,b,c){j({type:h.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})}function B(a,b,c){j({type:h.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}g.Types=h;g.openSolidReactionSheet=a;g.closeSolidReactionSheet=b;g.openUserFocusSheet=e;g.openBypassFocusSheet=f;g.closeUserFocusAndBypassSheet=k;g.openAddMoreFriendsSheet=l;g.closeAddMoreFriendsSheet=m;g.closeAddFriendsSheet=n;g.openNameConversationSheet=o;g.closeNameConversationSheet=p;g.openReadOnlySheet=q;g.closeReadOnlySheet=r;g.openReadOnlyPermanentSheet=s;g.closeReadOnlyPermanentSheet=t;g.openEmployeePersonalUserSheet=u;g.closeEmployeePersonalUserSheet=v;g.openEmployeeWorkUserSheet=w;g.closeEmployeeWorkUserSheet=x;g.openMentorshipProgramSheet=y;g.onIsPageTab=z;g.onWorkDoNotDisturbResponse=A;g.onMentorshipProgramResponse=B}),98);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h={ChatThreadSolidReactionSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatGroupNameComposerTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatIntegrityLandingScreenSheet:{isPermanent:!0,isSheetWithInput:!1}};function a(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0}function b(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b}function d(a){if(typeof a==="string"&&h[a])return h[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b}function e(a){if(typeof a==="string"&&h[a])return h[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b}f=c("keyMirror")(h);g.canReplaceOpenSheet=a;g.getType=b;g.isPermanent=d;g.isSheetWithInput=e;g.sheets=f}),98);
__d("MessageThreadAssociatedObjectUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&a.room_type==="GROUP"&&!a.is_workplace_community}function b(a){return a&&a.room_type==="GROUP"&&!a.is_workplace_community}f.shouldRender=a;f.isLinkedToGroupChat=b}),66);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","QE2Logger","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return j.isJoinableThread(a)&&j.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(j.isJoinableThread(a)&&a&&a.approval_mode===1)},isWorkSyncedGroupChat:function(a){return!!(a==null?void 0:a.work_associated_group)},isWorkFroup:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name!=null&&a.tags&&(a.tags.indexOf("source:work:groupchat:creation")!==-1||a.tags.indexOf("source:work:defaultgroupchat:creation")!==-1))},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf("source:work:groupchat:member_sync")!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(j.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode==="INVITE")},isApprovalOpenThread:function(a){return!!((b("CurrentUser").isWorkUser()||b("gkx")("678598"))&&a&&a.approval_mode===0)},isAdminRequired:function(a){return!!(a&&a.admin_model_status==="required")},isOwner:function(a,b){return a&&(j.isJoinableThread(b)||j.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("CurrentUser").isWorkUser(),e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&j.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){c=j.isAdmin(a.admins,c);var d=b("MessageRequestUtils").isMessageRequest(a);return c&&j.isAdminRequired(a)&&!d},canSeeBotsInGroupTypeahead:function(){return b("CurrentUser").isWorkUser()},canMakeOthersAdmins:function(a,b,c){return j.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(j.isJoinableThread(b)||j.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,b,c,d){if(j.isAdminRequired(d)&&Object.keys(d.admins).length===1)return!1;switch(c){case 2:return!1;default:return j.isOwner(a,d)&&b}},canRemoveFromGroup:function(a,b,c){switch(b){case 2:return!1;default:return j.isAdminRequired(c)||j.isWorkFroup(c)?a:j.isOwner(a,c)||!j.isJoinableThread(c)}},showGroupOptionsSection:function(a){return a.group_thread_subtype!==14},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=j.getPendingRequestNumber(a);if(a&&j.isAdminRequired(a))return j.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return j.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=j.isWorkSyncedGroupChat(a);if(e)return c;e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return d!=null&&a[d]!==void 0}return a[c]!==void 0},getLeaveGroupBodyText:function(a,b){a=j.isOwner(a,b);var c=j.isWorkSyncedGroupChat(b);return!c?a?g._(/*FBT_CALL*/"Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."/*FBT_CALL*/):g._(/*FBT_CALL*/"You will stop receiving messages from this conversation and people will see that you left."/*FBT_CALL*/):a?b.participants.length===1?g._(/*FBT_CALL*/"Are you sure you want to leave this group? As you're the last member, leaving now will also delete this group."/*FBT_CALL*/):g._(/*FBT_CALL*/"Leaving this group will remove you as an owner and allow other members to manage the chat thread. You will no longer be able to send or receive new messages. You will also be removed from the group."/*FBT_CALL*/):g._(/*FBT_CALL*/"You will stop receiving messages from this conversation and people will see that you left. You will also be removed from the group."/*FBT_CALL*/)},getLeaveGroupTitleText:function(a,b){return j.isWorkSyncedGroupChat(b)?b.participants.length===1?g._(/*FBT_CALL*/"Delete group and chat?"/*FBT_CALL*/):g._(/*FBT_CALL*/"Leave group and chat?"/*FBT_CALL*/):j.isOwner(a,b)?g._(/*FBT_CALL*/"Leave this conversation?"/*FBT_CALL*/):g._(/*FBT_CALL*/"Leave conversation?"/*FBT_CALL*/)},getLeaveGroupButtonText:function(a,b){return j.isOwner(a,b)?b.participants.length===1?g._(/*FBT_CALL*/"Leave and delete"/*FBT_CALL*/):g._(/*FBT_CALL*/"Leave conversation"/*FBT_CALL*/):g._(/*FBT_CALL*/"Leave"/*FBT_CALL*/)},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._(/*FBT_CALL*/"As a group admin, you will be able to manage who can join and customize this conversation."/*FBT_CALL*/):g._(/*FBT_CALL*/"As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation."/*FBT_CALL*/,[g._param("owner's name",c)]);else return b?g._(/*FBT_CALL*/"As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."/*FBT_CALL*/):g._(/*FBT_CALL*/"As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners."/*FBT_CALL*/,[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._(/*FBT_CALL*/"Become group admin?"/*FBT_CALL*/):g._(/*FBT_CALL*/"Add group admin?"/*FBT_CALL*/);else return b?g._(/*FBT_CALL*/"Become group owner?"/*FBT_CALL*/):g._(/*FBT_CALL*/"Add group owner?"/*FBT_CALL*/)},getMakeOwnerButtonText:function(a,b){if(a)return b?g._(/*FBT_CALL*/"Become admin"/*FBT_CALL*/):g._(/*FBT_CALL*/"Make admin"/*FBT_CALL*/);else return b?g._(/*FBT_CALL*/"Become owner"/*FBT_CALL*/):g._(/*FBT_CALL*/"Make owner"/*FBT_CALL*/)},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._(/*FBT_CALL*/"You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group."/*FBT_CALL*/);else if(b&&!c)return a?g._(/*FBT_CALL*/"You will no longer be able to manage who can join and customize this conversation."/*FBT_CALL*/):g._(/*FBT_CALL*/"You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group."/*FBT_CALL*/);else return a?g._(/*FBT_CALL*/"\"{owner's name}\" will no longer be able to manage who can join and customize this conversation."/*FBT_CALL*/,[g._param("owner's name",d)]):g._(/*FBT_CALL*/"\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group."/*FBT_CALL*/,[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._(/*FBT_CALL*/"Remove as group admin?"/*FBT_CALL*/):g._(/*FBT_CALL*/"Remove as group owner?"/*FBT_CALL*/)},getRemoveOwnerButtonText:function(a){return a?g._(/*FBT_CALL*/"Remove"/*FBT_CALL*/):g._(/*FBT_CALL*/"Remove owner"/*FBT_CALL*/)},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&j.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MessengerAdminGroupUtils","gkx","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b.type){case d("FantaGetMessageActions").Types.ON_GET_THREAD_RESPONSE:case d("FantaGetMessageActions").Types.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=h(a,c,b)}return a}function h(a,b,c){b.participants.length===0&&(a=i(a,c,b),a=k(a,c,d("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function b(a,b){switch(b.type){case d("FantaGetMessageActions").Types.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=i(a,c,b)}return a}function i(a,b,e){var f=a.mercury.tabContents.get(b);if(!f||f.typeahead)return a;c("ifRequired")("ChatTabTypeaheadRenderer",function(g){c("ifRequired")("ContextualTypeaheadView",function(h){c("ifRequired")("ChatTabAddMemberTypeaheadView",function(i){c("ifRequired")("MercuryTypeahead",function(i){if(!a.mercury.tabContents.get(b))return;var j=!!(e&&e.participants&&e.participants.length===0),k=!!(e&&e.associated_object&&e.associated_object.privacy_mode===0),l=j?c("MercuryDataSourceWrapper").chat_typeahead_source:k?c("MercuryDataSourceWrapper").chat_add_people_froup_source:e.work_associated_group!=null&&c("gkx")("995147")?c("MercuryDataSourceWrapper").chat_add_people_restrict_extenal_members:c("MercuryDataSourceWrapper").chat_add_people_source;l.setShowThreads(j);j?l.setShowDefaultList(d("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):k||l.setShowDefaultList(d("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());k&&l.setQueryData({thread_id:e.thread_fbid});j=h;k=new i(l,j);k.setViewOption("renderer",g);k.setExcludedParticipantsFromThreadMeta(e);f=f.merge({typeahead:k});a=a.setIn(["mercury","tabContents",b],f)},function(){return j(b,e)})},function(){return j(b,e)})},function(){return j(b,e)})},function(){return j(b,e)});return a}function e(a,b){switch(b.type){case d("FantaTabSheetActions").Types.OPEN_ADD_MORE_FRIENDS_SHEET:var c=b.tabID,e=a.mercury.tabContents.get(c).thread;if(e){a=i(a,c,e);return k(a,b.tabID,d("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function j(a,b){c("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","ChatTabAddMemberTypeaheadView","MercuryTypeahead"],function(c,e,f,g){d("FantaGetMessageActions").onBootloadTypeahead(a,b)},"FantaComposeViewReducers")}function k(a,b,c){var e=a.mercury.tabContents.get(b),f=a.tabGroup.tabs.get(b);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!d("MercurySheetPolicy").canReplaceOpenSheet(f,c))return a;e=e.merge({openSheet:c});a=a.setIn(["mercury","tabContents",b],e);return a}function f(a,b){switch(b.type){case d("FantaGetMessageActions").Types.ADD_PARTICIPANTS:var c=b.tokens;b=b.tabID;c=c.length===1&&c[0].getInfo().render_type==="thread";if(!c)return k(a,b,d("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}g.onGetThreadResponse=a;g.onBootloadTypeahead=b;g.openAddMoreFriends=e;g.addParticipants=f}),98);
__d("FantaMessageActions",["Bootloader","CurrentUser","FantaDispatcher","MWCount.re","MercuryIDs","MercuryLocalIDs","MercuryViewer","MessengerState.bs","emptyFunction","ifRequired","keyMirror","requireWeak","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h;c("requireWeak")("FantaAppStore",function(a){return h=a});var i=c("keyMirror")({ADD_GROUP_PARTICIPANTS:null,ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:null,ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:null,CANCEL_FILE_UPLOAD:null,CANCEL_REPLY_TO_MESSAGE:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,REPLY_TO_MESSAGE:null,SEND_GIF:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,SET_NEW_GROUP_NAME_LOCALLY:null,UPDATE_GROUP_NAME:null,UPDATE_USER_INPUT_REQUESTED:null});function j(a){var b=d("MercuryViewer").getID();if(!a.length)return null;a=a.filter(function(a){return a!==b});var e;if(a.length===0)return null;else a.length===1?e=c("MercuryIDs").getThreadIDFromParticipantID(a[0]):(e=d("MercuryLocalIDs").generateThreadID(),a.unshift(b),c("MessengerState.bs").createNewLocalThread(c("CurrentUser").getID(),e,a));return e}var k={Types:i,prepareFilesForSend:function(a,b,d,e){var f={type:i.PREPARE_FILES_FOR_SEND,tabID:a,files:b,composer:d};k.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch(f),e&&e()})},replyToMessage:function(a,b){c("FantaDispatcher").dispatch({type:i.REPLY_TO_MESSAGE,threadID:b,message:a})},cancelReplyToMessage:function(a){c("FantaDispatcher").dispatch({type:i.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,b){var d={type:i.CANCEL_FILE_UPLOAD,tabID:a,uploadID:b};k.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch(d)})},linkPreview:function(a,b){k.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:i.LINK_PREVIEW,tabID:a,uri:b})})},loadedShareData:function(a,b,d){k.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:i.LOADED_SHARE_DATA,tabID:a,attachmentData:b,composer:d})})},loadingShareData:function(a,b){k.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:i.LOADING_SHARE_DATA,composer:b,tabID:a})})},removeSharePreview:function(a,b){k.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:i.REMOVE_SHARE_PREVIEW,tabID:a,composer:b})})},receivedNewMessage:function(a,b){c("MWCount.re").Blue.NewMessage.lift(),c("FantaDispatcher").dispatch({type:i.RECEIVED_NEW_MESSAGE,tabID:a,message:b})},updateGroupName:function(a,b){k.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:i.UPDATE_GROUP_NAME,threadID:a,newName:b})})},setNewGroupNameLocally:function(a,b){k.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:i.SET_NEW_GROUP_NAME_LOCALLY,threadID:a,newName:b})})},addParticipants:function(a,b){c("ifRequired")("FantaAppStore",function(d){d=d.getState().mercury.tabContents.get(a);if(!d)return;var e=d.thread;d=d.typeahead;if(!d||!e)return;var f=c("MessengerState.bs").isEmptyLocalThread(c("CurrentUser").getID(),a);if(e.is_canonical_user||f){f=d.getSelectedParticipantIDs();d=e.participants;d=j(d.concat(f));d?e.is_canonical_user?k.addGroupParticipantsAsOpenTab(d,a,b):k.addGroupParticipantsAsReplaceTab(d,a,b):k.addGroupParticipant(a,b)}else k.addGroupParticipant(a,b)})},addGroupParticipant:function(a,b){k.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:i.ADD_GROUP_PARTICIPANTS,threadID:a,onSendSuccess:b})})},addGroupParticipantsAsOpenTab:function(a,b,d){k.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB,fromTabID:b,onSendSuccess:d,tabID:a})})},addGroupParticipantsAsReplaceTab:function(a,b,d){k.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB,newTabID:a,onSendSuccess:d,tabID:b})})},sendMessage:function(a,b,d,e){k.dispatchOrBootloadSendMessages(function(){var f={type:i.SEND_MESSAGE,threadID:a,message:b,composer:d,onSendSuccess:e};c("FantaDispatcher").dispatch(f)})},sendPhoto:function(a,b,d){k.dispatchOrBootloadSendMessages(function(){var e={type:i.SEND_PHOTO,clearComposerOnSend:!0,onSendSuccess:d,photoData:b,threadID:a};c("FantaDispatcher").dispatch(e)})},sendGif:function(a,b,d){k.dispatchOrBootloadSendMessages(function(){var e={type:i.SEND_GIF,clearComposerOnSend:!1,onSendSuccess:d,photoData:b,threadID:a};c("FantaDispatcher").dispatch(e)})},sendHotLike:function(a,b,d,e,f){k.dispatchOrBootloadSendMessages(function(){var g={type:i.SEND_HOT_LIKE,emoji:b,onSendSuccess:f,size:d,source:e,threadID:a};c("FantaDispatcher").dispatch(g)})},sendSticker:function(a,b,d){k.dispatchOrBootloadSendMessages(function(){var e={type:i.SEND_STICKER,threadID:a,stickerID:b,onSendSuccess:d};c("FantaDispatcher").dispatch(e)})},composerTextUpdate:function(a,b,d){b.length>0&&c("ifRequired")("FantaReducersSendMessages",c("emptyFunction"),function(){return k.dispatchOrBootloadSendMessages(c("emptyFunction"))}),k.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:i.COMPOSER_TEXT_UPDATE,composer:d,message:b,threadID:a})})},dispatchOrBootloadMessages:function(a){c("ifRequired")("FantaReducersMessages",function(){c("setImmediate")(a)},function(){c("Bootloader").loadModules(["FantaReducersMessages"],function(b){h&&(h.addReducers(b),c("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadSendMessages:function(a){c("ifRequired")("FantaReducersSendMessages",function(){c("setImmediate")(a)},function(){c("Bootloader").loadModules(["FantaReducersSendMessages"],function(b){h&&(h.addReducers(b),c("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){c("ifRequired")("FantaReducersFileUploader",function(){a()},function(){c("Bootloader").loadModules(["FantaReducersFileUploader"],function(b){h&&(h.addReducers(b),a())},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){c("ifRequired")("FantaReducersSharePreview",function(){a()},function(){c("Bootloader").loadModules(["FantaReducersSharePreview"],function(b){h&&(h.addReducers(b),a())},"FantaMessageActions")})},updateUserInputRequested:function(a,b,d){k.dispatchOrBootloadMessages(function(){c("FantaDispatcher").dispatch({type:i.UPDATE_USER_INPUT_REQUESTED,isUserInputRequested:a,requestNumResults:b,requestType:d})})}};f.exports=k}),34);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=c("throttle").acrossTransitions(d("PresenceState").doSync,500);function a(a,b){switch(b.type){case d("FantaMessageActions").Types.RECEIVED_NEW_MESSAGE:case d("FantaTabActions").Types.CLOSE_ALL_TABS:case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:case d("FantaTabActions").Types.CLOSE_TAB:case d("FantaTabActions").Types.DELETE_TAB:case d("FantaTabActions").Types.MINIMIZE_ALL_TABS:case d("FantaTabActions").Types.MINIMIZE_TAB:case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaTabActions").Types.REPLACE_TAB:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:case d("FantaTabActions").Types.UNMINIMIZE_TAB:case d("FantaTabActions").Types.OPT_IN_OPEN_TAB_WITH_BLOCKEES:h();return i(a)}return a}function b(a,b){switch(b.type){case d("FantaTabActions").Types.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===void 0?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function i(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}g.updateCookie=a;g.loadFromData=b}),98);
__d("FantaReducersDockCalculator",["Arbiter","FantaMessageActions","FantaTabActions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(a){h=a,c("setImmediate")(function(){c("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function j(a){if(!h||a.size!==h.size)i(a);else{var b=!1;a.forEach(function(a){var c=h&&h.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&i(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case d("FantaTabActions").Types.CLOSE_ALL_TABS:case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:case d("FantaTabActions").Types.CLOSE_TAB:case d("FantaTabActions").Types.DELETE_TAB:case d("FantaTabActions").Types.MINIMIZE_ALL_TABS:case d("FantaTabActions").Types.MINIMIZE_TAB:case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaTabActions").Types.UNMINIMIZE_TAB:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:i(c);break;case d("FantaTabActions").Types.LOAD_FROM_DATA:case d("FantaMessageActions").Types.RECEIVED_NEW_MESSAGE:j(c);break}return a}g.recalculateDock=a}),98);
__d("FantaReducersLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","gkx","requestIdleCallback"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(!c("gkx")("678592"))return a;switch(b.type){case d("FantaTabSheetActions").Types.OPEN_ADD_MORE_FRIENDS_SHEET:case d("FantaTabActions").Types.OPEN_TAB:if(b.type===d("FantaTabActions").Types.OPEN_TAB&&b.entryPoint!=="compose_link"&&b.entryPoint!=="jewel_new_message")return a;var e=a.mercury.tabContents.get(b.tabID);e&&c("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,c){var f;switch(b.entryPoint){case"compose_link":f=c.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":f=c.ENTRY_SURFACES.JEWEL;break;default:f=c.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(c.CLIENTS.WWW,c.SEARCH_SURFACES.OMNIPICKER,f,b.type===d("FantaTabSheetActions").Types.OPEN_ADD_MORE_FRIENDS_SHEET?e.id:null,e.loggingID)},"FantaReducersLogging");break}return a}function b(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_ALL_TABS:case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:case d("FantaTabActions").Types.CLOSE_TAB:case d("FantaTabActions").Types.DELETE_TAB:case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:c("requestIdleCallback")(function(){var b=a.tabGroup.allowedRaisedTabs,d=a.tabGroup.getRaisedandUnraisedTabs(),e=d.raisedTabs;d=d.unraisedTabs;var f=e.count(),g=f+d.count();c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(b).setOpenTabs(g).setVisibleTabs(f).log()},"FantaReducersLogging")})}return a}g.logSearchEventsAfterAction=a;g.updateVisibleTabs=b}),98);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;a=this.getStatus(a,b);b=d("MercuryIDs").getUserIDFromThreadID(b);b&&(e=d("ShortProfiles").getNow(b));return a===c("AvailableListConstants").ACTIVE&&(e===void 0||e===null||!e.is_messenger_only)}function b(a,b){var e=c("AvailableListConstants").OFFLINE;b=d("MercuryIDs").getUserIDFromThreadID(b);if(b)e=c("PresenceStatus").get(b);else if(a&&a.participants){b=a.participants.map(function(a){return d("MercuryIDs").getUserIDFromParticipantID(a)});e=c("PresenceStatus").getGroup(b)}d("ChatVisibility").isOnline()||(e=c("AvailableListConstants").OFFLINE);return e}g.isAvailable=a;g.getStatus=b}),98);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a={isLoading:!1,params:null,type:null,uri:null};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});b={uploadedFiles:c("immutable").Map(),uploadingFiles:c("immutable").Map()};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};return b}(c("immutable").Record(b));d.fileTypes=a;g["default"]=d}),98);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=0;a={fileUploader:new(c("FantaTypeFileUploader"))(),sharePreview:new(c("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:h};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{version:++h})||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";a={composer:new(c("FantaTypeComposer"))(),highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:c("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,newGroupChatName:null};b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e,f=d("MercuryIDs").getUserIDFromThreadID(b.id);f&&(e=new(c("ChatPrivacyActionController"))(f,function(a){c("setImmediate")(function(){d("FantaGetMessageActions").onPrivacyStateChange(b.id,a)})}));return a.call(this,babelHelpers["extends"]({privacyController:e},b))||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeSharePreview","FantaTypeTabContents","MercuryIDs","MercuryThreadIDMap","TimeSlice","WebMessengerThreadPermalinks","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=c("MercuryThreadIDMap").get(),i=1;function j(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,b){switch(b.type){case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:var e=b.tabID,f=b.defaultText,g=b.defaultPreview;c("ifRequired")("FantaTabsReactApp",function(b){!d("MercuryIDs").isValidThreadID(e)?(a=a.deleteIn(["tabGroup","tabs",e]),q(e)):x(a,e)},function(){return a=k(a,b.tabID)});a=l(a,e);var h=j(),m=a.mercury.tabContents.get(e);m=m.merge({isNewMessageTab:!!b.isNewMessageTab,loggingID:i++,signatureID:h});a=a.setIn(["mercury","tabContents",e],m);new(c("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:e,userID:d("MercuryIDs").getUserIDFromThreadID(e),signatureID:h}).send();if(b.interstitialData){h=new(c("FantaTypeJoinableThread"))(b.interstitialData);m=m.merge({joinableInterstitialData:h});a=a.setIn(["mercury","tabContents",e],m)}f&&(a=a.setIn(["mercury","tabContents",e,"composer","text"],f));g&&(a=a.setIn(["mercury","tabContents",e,"composer","sharePreview"],new(c("FantaTypeSharePreview"))({params:null,type:null,uri:g})));c("Arbiter").inform("jewel/hide");return a}return a}function k(a,b){c("ifRequired")("FantaTabsSlimApp",function(c){!d("MercuryIDs").isValidThreadID(b)?(a=a.deleteIn(["tabGroup","tabs",b]),q(b)):x(a,b)},function(){x(a,b)});return a}function b(a,b){switch(b.type){case d("FantaMessageActions").Types.RECEIVED_NEW_MESSAGE:a=l(a,b.tabID)}return a}function l(a,b){var e=a.mercury.tabContents.get(b);if(!e){var f=c("getPageIDFromThreadID")(b);f&&c("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var e=c("AvailableListConstants").OFFLINE,g=new a(f,e,function(a){c("setImmediate")(function(){return d("FantaTabActions").setPageIndicatorDescription(b,a)})},function(){c("setImmediate")(function(){return d("FantaTabActions").clearPageIndicatorDescription(b)})});c("setImmediate")(function(){d("FantaTabSheetActions").onIsPageTab(b,g)});g.checkResponsiveness()},"FantaReducersMercury");return a.setIn(["mercury","tabContents",b],new(c("FantaTypeTabContents"))({id:b}))}return a}function e(a,b){switch(b.type){case d("FantaTabActions").Types.SET_PAGE_INDICATOR_DESCRIPTION:var c=b.tabID;b=b.description;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({pageIndicatorDescription:b||""});a=a.setIn(["mercury","tabContents",c],e)}return a}function f(a,b){switch(b.type){case d("FantaTabActions").Types.CLEAR_PAGE_INDICATOR_DESCRIPTION:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({pageIndicatorDescription:""});a=a.setIn(["mercury","tabContents",b],c)}return a}function m(a,b){switch(b.type){case d("FantaTabActions").Types.REPLACE_TAB:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:a=p(a,b.newTabID);a=l(a,b.newTabID);return a}return a}function n(a,b){switch(b.type){case d("FantaGetMessageActions").Types.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],e);return a}return a}function o(a,b){switch(b.type){case d("FantaGetMessageActions").Types.CLEAR_PARTICIPANTS:b=b.tabID;var e=a.mercury.tabContents.get(b),f=e?e.loggingID:null;e=e?e.isNewMessageTab:!1;a=a.setIn(["mercury","tabContents",b],new(c("FantaTypeTabContents"))({id:b,isNewMessageTab:e,loggingID:f}))}return a}function p(a,b){c("ifRequired")("FantaTabsReactApp",function(c){d("MercuryIDs").isValidThreadID(b)||(a=a.deleteIn(["tabGroup","tabs",b]),q(b))},function(){c("ifRequired")("FantaTabsSlimApp",function(c){d("MercuryIDs").isValidThreadID(b)||(a=a.deleteIn(["tabGroup","tabs",b]),q(b))})});return a}function q(a){h.getClientIDFromServerID(a,function(a){return c("setImmediate")(function(){d("MercuryIDs").isValidThreadID(a)&&d("FantaTabActions").openTab(a)})})}function r(a,b){switch(b.type){case d("FantaTabActions").Types.FOCUS_TAB:x(a,b.tabID)}return a}function s(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_TAB:b=b.tabID;a=u(a,b)}return a}function t(a,b){switch(b.type){case d("FantaTabActions").Types.DELETE_TAB:b=b.tabID;a=u(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function u(a,b){c("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(b)});return a}function v(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_ALL_TABS:c("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function w(a,b){switch(b.type){case d("FantaTabActions").Types.FOCUS_NEXT_TAB:case d("FantaTabActions").Types.FOCUS_PREVIOUS_TAB:case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&x(a,b)}return a}function x(a,b){var e=d("MercuryIDs").getUserIDFromThreadID(b);if(e){var f=function(){c("AvailableList").updateForID(e)};c("TimeSlice").guard(f,"superfluous request to first open DD",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}f=a.mercury.tabContents.get(b);if(f){a=f.thread;f=f.pageIndicator;f&&f.notifyPageOnlineStatusChanged(d("FantaAvailableStatus").getStatus(a,b))}}function y(a,b){switch(b.type){case d("FantaTabActions").Types.UNMINIMIZE_TAB:x(a,b.tabID)}return a}function z(a,b){switch(b.type){case d("FantaTabActions").Types.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;a=l(a,f)}}return a}function A(a,b){a=a.mercury.tabContents.get(b);(!a||!a.uri)&&d("WebMessengerThreadPermalinks").getThreadURI(b,function(a){c("setImmediate")(function(){return d("FantaTabActions").setPermanentUri(b,a)})})}function B(a,b){switch(b.type){case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaMessageActions").Types.RECEIVED_NEW_MESSAGE:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:A(a,b.tabID);break;case d("FantaTabActions").Types.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;A(l(a,f),f)}}return a}function C(a,b){switch(b.type){case d("FantaTabActions").Types.SET_PERMANENT_URI:var c=b.tabID;b=b.uri;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({uri:b});a=a.setIn(["mercury","tabContents",c],e)}return a}g.openTab=a;g.receivedNewMessage=b;g.setPageIndicatorDescription=e;g.clearPageIndicatorDescription=f;g.replaceTab=m;g.addParticipants=n;g.clearParticipants=o;g.focusTab=r;g.closeTab=s;g.deleteTab=t;g.closeAllTabs=v;g.focusTabEvents=w;g.unminimizeTab=y;g.loadFromData=z;g.loadUri=B;g.setUri=C}),98);
__d("WorkForeignEntityInfo.bs",["CurrentUser","WorkForeignEntityType"],(function(a,b,c,d,e,f){"use strict";function g(a){if(!(a==null)&&a.type!==b("WorkForeignEntityType").NOT_FOREIGN)return a.type===b("WorkForeignEntityType").LIMITED;else return!0}function h(a){if(b("CurrentUser").isWorkUser())return g(a.work_foreign_entity_info);else return!1}function a(a){if(b("CurrentUser").isWorkUser())return g(a.workForeignEntityInfo);else return!1}function c(a){if(b("CurrentUser").isWorkUser())return a.every(function(a,b,c){if(a==null)return!0;else return h(a)});else return!1}f.isNotForeign=g;f.isCoworker=h;f.isContactCoworker=a;f.areAllCoworkers=c}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["CurrentUser","MercuryIDs","ParticipantId.bs","WorkForeignEntityInfo.bs","bs_belt_Set","bs_caml_obj","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Set").fromArray(a,b("ParticipantId.bs"))}function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return b("bs_belt_Set").has(c,a)!==!1})}function c(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function d(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function e(a,c,d){if(!d.is_canonical)return!1;d=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!d.every(function(a){return!b("bs_belt_Set").has(c,a)})}var h=b("bs_belt_Set").has;function i(a,c,d){if(!a.is_canonical||b("bs_caml_option").nullable_to_opt(a.other_user_fbid)===b("bs_caml_option").some(c))return!1;else if(!b("CurrentUser").isWorkUser()||d==null)return!0;else if(d==null)return!1;else return!b("WorkForeignEntityInfo.bs").isCoworker(d)}f.fromIds=a;f.findIntersection=g;f.isPresentInGroupThread=c;f.participantsInGroupThread=d;f.qualifiesAs=e;f.isInSet=h;f.shouldShowBlock=i}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","Bootloader","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","CurrentUser","Event","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryThreadInfo","MercuryViewer","MessagingTag","MessengerState.bs","Sound","UserActivity"],(function(a,b,c,d,e,f,g){"use strict";var h=3,i=6e5,j=new Map(),k=null;function l(){return!c("UserActivity").isOnTab()&&!c("UserActivity").hasBeenInactive()}function m(){j=new Map()}function n(a){c("ChatOptions").getSetting("sound")&&!l()&&d("Sound").play([d("ChatConfig").get("sound.notif_ogg_url"),d("ChatConfig").get("sound.notif_mp3_url")],a,!1)}var o=babelHelpers["extends"]({init:function(){var a=this;c("Event").listen(window,"focus",function(){m(),window.clearInterval(k)});c("Event").listen(window,"blur",function(){k=window.setInterval(m,i)});c("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,c("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(b){a._availabilityStatusStore=b},"MercuryBrowserAlerts"))},messageReceived:function(a){var b=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(d("MercuryIDs").getUserIDFromParticipantID(d("MercuryViewer").getID()));if(b||a.author&&d("MercuryViewer").isViewer(a.author)||!a.is_unread||a.folder!=c("MessagingTag").INBOX&&a.folder!=c("MessagingTag").ARCHIVED)return;var e=a.thread_id,f=c("ChatActivity").isActive();if(f){var g=!1;o.inform("before-alert",{threadID:e,cancelAlert:function(){g=!0}})}d("MessengerState.bs").getThreadMeta(c("CurrentUser").getID(),e,function(b){var i=d("MercuryThreadInfo").isMuted(b),k=d("MercuryIDs").getUserIDFromParticipantID(d("MercuryViewer").getID());if(i)if(!d("MercuryThreadInfo").areMentionsMuted(b)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===k}))return}else return;var l=c("CurrentUser").getID();d("MessengerState.bs").compute(l,function(c){c=c.blocked_ids;if(d("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(l,c,b))return;c=a.timestamp;if(f)g||n(c);else{d("ChatTitleBarBlinker").blink(e,c);var i=j.get(e)||0;i<h&&(j.set(e,i+1),n(c))}d("ChatTitleBarBlinker").blinkingElsewhere()})})}},d("ArbiterMixin"));a=o;g["default"]=a}),98);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","ImmutableObject","MercuryBrowserAlerts","MessengerParticipants.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,c){switch(c.type){case g.REPLY_TO_MESSAGE:var d=c.message;c=c.threadID;var e=a.mercury.tabContents.get(c);return!e?a:a.mergeIn(["mercury","tabContents",c,"composer"],{replyingToMessage:new(b("ImmutableObject"))(babelHelpers["extends"]({},d))})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.JUMP_TO_MESSAGE:var c=b.tabID;b=b.mid;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({jumpToMessage:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function n(a,b){switch(b.type){case h.WIPE_JUMP_TO_MESSAGE:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({jumpToMessage:null});a=a.setIn(["mercury","tabContents",b],c)}return a}function o(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function p(a,c){switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MessengerParticipants.bs").getNow,b("MessengerParticipants.bs")).find(function(a){return((a=a)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)==="FOREIGN"})!==void 0);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}function q(a,b){switch(b.type){case h.HIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!0)}return a}function r(a,b){switch(b.type){case h.UNHIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!1)}return a}function s(a,b){switch(b.type){case g.UPDATE_USER_INPUT_REQUESTED:return a.setIn(["mercury","userInputRequest"],{isUserInputRequested:b.isUserInputRequested,requestNumResults:b.requestNumResults,requestType:b.requestType})}return a}e.exports={cancelReplyToMessage:f,closeAllTabs:k,closeTab:j,composerTextUpdate:c,highlightNewMessage:q,jumpToMessage:m,onGetThreadResponse:p,receivedNewMessage:a,replyToMessage:d,scrollBottomChanged:l,showUnseenMessages:o,unhighlightNewMessage:r,updateUserInputRequested:s,wipeJumpToMessage:n}}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"});b=Object.freeze({ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",RESULT_SELECTED:"result_selected",SEND:"send",SINGLE_RESULT_SELECTED:"single_result_selected"});c=Object.freeze({ACTION:"action"});d=Object.freeze({EXISTING_TAB:"existing_tab",JEWEL:"jewel",SIDEBAR:"sidebar",COMPOSER:"composer"});f=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_ENDED:"micro_session_ended",MICRO_SESSION_STARTED:"micro_session_started",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",REENTER_OMNIPICKER:"reentered_omnipicker",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed",CLICK_OTHER_THREAD:"clicked_on_other_thread"});var g=Object.freeze({BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share"}),h=Object.freeze({DIRECT_SEND:"direct_send",ADD:"add"}),i=Object.freeze({FINISHED:"finished",FAILED:"failed"}),j=Object.freeze({BROADCAST:9500,GROUP_CREATE:9501,M_APP_COMPOSER:9502}),k=Object.freeze({QUERY:"query",NO_QUERY:"no_query"}),l=Object.freeze({BOOTSTRAP:"bootstrap",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",LOCAL_CONTACTS:"local_contacts",ORDERED_GCF_FRIENDLIST:"local_ordered_gcf_friendlist",QUERY_CACHE:"query_cache",SERVER:"server",SHORT_PROFILES:"local_short_profiles",SUGGESTED_RECIPIENTS:"local_suggested_recipients"});e.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",CLIENTS:a,END_ACTIONS:b,END_REASONS:c,ENTRY_SURFACES:d,EVENTS:f,SEARCH_SURFACES:g,SELECTION_TYPES:h,SOURCE_STATUSES:i,LOGGING_IDS:j,MICRO_SESSION_TYPES:k,SOURCES:l}}),null);
__d("FantaReducersPreLogging",["Bootloader","CurrentUser","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","MessengerState.bs","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(!c("gkx")("678592"))return a;switch(b.type){case d("FantaTabActions").Types.CLOSE_TAB:case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:case d("FantaTabSheetActions").Types.CLOSE_ADD_FRIENDS_SHEET:case d("FantaTabSheetActions").Types.CLOSE_ADD_MORE_FRIENDS_SHEET:a=h(a,b.tabID,d("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d("MessengerSecondarySearchFunnelConstants").END_ACTIONS.ABANDON);break;case d("FantaTabActions").Types.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=h(a,b.id,d("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d("MessengerSecondarySearchFunnelConstants").END_ACTIONS.ABANDON)});break;case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS:a=h(a,b.threadID,d("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d("MessengerSecondarySearchFunnelConstants").END_ACTIONS.SEND,!0);break;case d("FantaMessageActions").Types.SEND_HOT_LIKE:case d("FantaMessageActions").Types.SEND_MESSAGE:case d("FantaMessageActions").Types.SEND_PHOTO:case d("FantaMessageActions").Types.SEND_STICKER:a=h(a,b.threadID,d("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d("MessengerSecondarySearchFunnelConstants").END_ACTIONS.SEND);break}return a}function h(a,b,e,f,g){if(!c("gkx")("678592"))return a;var h=a.mercury.tabContents.get(b),i=h?h.loggingID:null,j=h?h.threadPreviewID:null;i&&c("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(k){a=a.setIn(["mercury","tabContents",b],h.merge({loggingID:null}));if(f===d("MessengerSecondarySearchFunnelConstants").END_ACTIONS.SEND&&(g===null||g===void 0)){var l=d("MessengerState.bs").getCurrentlyLoadedMessages(c("CurrentUser").getID(),h.id);l=h&&l.length===0}else l=g;k.endFunnel(e,f,i,j?j.split(":")[1]:b,l)},"FantaReducersPreLogging");return a}g.logSearchEvents=a}),98);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,showWarningForThreadWithBlockees:!1,openCounter:0,entryPoint:"unknown"};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=c("immutable").OrderedMap({});a={allowedRaisedTabs:d("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:c("immutable").Map({}),updatedTime:0};var i=function(a){return a.openCounter*-1},j=function(a){return a.focusCounter*-1};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getRaisedandUnraisedTabs=function(){if(this.tabs.size===0||this.allowedRaisedTabs===0)return{raisedTabs:h,unraisedTabs:h};if(this.tabs.size===1&&this.allowedRaisedTabs>=1)return{raisedTabs:this.tabs.toOrderedMap(),unraisedTabs:h};var a=this.tabs.sortBy(j),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(i);return{raisedTabs:a,unraisedTabs:b}};return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("isWebMessengerURI",[],(function(a,b,c,d,e,f){function a(a){return/^(\/messages)/.test(a.getPath())}e.exports=a}),null);
__d("FantaReducersTabs",["Bootloader","CurrentUser","FBLogger","FantaConst","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","JSResource","LogHistory","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MessengerState.bs","MessengerWebEventsFalcoEvent","TimeSlice","URI","isWebMessengerURI","performanceAbsoluteNow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h="tab_",i=d("LogHistory").getInstance("fanta_tabs"),j=1,k=1,l=1;function m(a,b){Array.isArray(a)&&a.length>0&&(a=a[0]);try{d("MercuryIDs").isLocalThread(b)?c("MessengerWebEventsFalcoEvent")&&c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab",blue_entry_point:a||"unknown"}}):c("MessengerWebEventsFalcoEvent")&&c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab",blue_entry_point:a||"unknown",other_user_fbid:d("MercuryIDs").getUserIDFromThreadID(b),thread_fbid:d("MercuryIDs").isGroupChat(b)?d("MercuryIDs").getThreadFBIDFromThreadID(b):null}})}catch(d){c("FBLogger")("messenger_web").warn("fail to log openTab event on blue for %s %s ",a,b)}}function a(a,b){switch(b.type){case d("FantaTabActions").Types.OPEN_TAB:case d("FantaTabActions").Types.OPEN_TAB_WITH_INTERSTITIAL_DATA:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:i.debug(b.type,JSON.stringify({id:b.tabID}));if(k===1){var e=c("performanceAbsoluteNow")();c("Bootloader").loadModules(["QuickPerformanceLogger"],function(a){a.markerStart(c("qpl")._(25296897,"6201"),0,e)},"FantaReducersTabs")}var f=b.tabID||h+l++,g=b.entryPoint;Array.isArray(g)&&g.length>0&&(g=g[0]);m(g,f);return q(a,f,!0,b.entryPoint)}return a}function b(a,b){switch(b.type){case d("FantaTabActions").Types.REPLACE_TAB:case d("FantaMessageActions").Types.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:var c=b.tabID,e=b.newTabID,f=a.tabGroup;f=f.tabs;f=f.get(c);i.debug(b.type,JSON.stringify({id:c,isExisting:!!f,newID:e}));if(f){m("replace_tab",f.id);b=f.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",e],f.merge({id:e})).deleteIn(["tabGroup","tabs",c]);return q(a,e,b,"replace_tab")}m("replace_tab",e);return q(a,e,!1,"replace_tab")}return a}function e(a,b){switch(b.type){case d("FantaTabActions").Types.MINIMIZE_TAB:return r(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case d("FantaTabActions").Types.UNMINIMIZE_TAB:a=r(a,b.tabID,!1),a=u(a,b.tabID,(b=a.mercury.tabContents.get(b.tabID))==null?void 0:b.thread)}return a}function n(a,b){switch(b.type){case d("FantaTabActions").Types.FOCUS_TAB:b=b.tabID;return C(a,b)}return a}function o(a,b){switch(b.type){case d("FantaTabActions").Types.BLUR_TAB:return D(a,b.tabID)}return a}function p(a,b){switch(b.type){case d("FantaMessageActions").Types.RECEIVED_NEW_MESSAGE:var e=b.tabID,f=a.tabGroup.tabs.get(e);i.debug(b.type,JSON.stringify({id:e,isOpen:!!f}));if(!f){try{f=JSON.parse((b=b==null?void 0:(f=b.message)==null?void 0:f.platform_xmd)!=null?b:"{}");f=((b=f)==null?void 0:b.trigger)==="messenger_deeplink_ads"?"click_to_messenger_ad":"message_received"}catch(a){f="message_received"}m(f,e);b=a.tabGroup.focusedTabID;a=q(a,e,!1,f);var g=a.tabGroup.allowedRaisedTabs;f=a.tabGroup.getRaisedandUnraisedTabs();var h=f.raisedTabs;f=f.unraisedTabs;var j=h.count(),k=j+f.count();c("TimeSlice").guard(function(){c("JSResource").loadAll([c("JSResource")("FantaTabsVisibleTypedLogger").__setRef("FantaReducersTabs"),c("JSResource")("ChatOpenTabEventLogger").__setRef("FantaReducersTabs")],function(a,b){new a().setAllowedRaisedTabs(g).setOpenTabs(k).setVisibleTabs(j).log(),b.logAutoOpen("auto_open_on_received_messages",e)})},"name",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();h=c("URI").getNextURI();if(c("isWebMessengerURI")(h))return a=r(a,e,!0);else if(b)return C(a,b)}}return a}function q(a,b,d,e){e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(b);!f?(f=new(c("FantaTypeTab"))({id:b,focusCounter:j,openCounter:k++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",b],f)):f.isMinimized&&d&&(a=r(a,b,!1));d&&(a=C(a,b));if(t(a,b,(e=a.mercury.tabContents.get(b))==null?void 0:e.thread))if(d){a=u(a,b,(f=a.mercury.tabContents.get(b))==null?void 0:f.thread)}else a=r(a,b,!0);return a}function r(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function s(a,b){var c,e;switch(b.type){case d("FantaGetMessageActions").Types.ON_GET_THREAD_RESPONSE:case d("FantaGetMessageActions").Types.ON_GET_THREAD_PREVIEW_RESPONSE:c=b.tabID||((c=b.thread)==null?void 0:c.thread_id);((e=a.mercury.tabContents.get(c))==null?void 0:e.thread)==null&&((e=a.tabGroup.tabs.get(c))==null?void 0:e.isMinimized)===!1&&(a=u(a,c,b.thread))}return a}function t(a,b,e){if(e==null||e.is_canonical||a.blockedWarning.optedInThreadsWithBlockees.get(b)==!0)return!1;var f=c("CurrentUser").getID();a=!1;d("MessengerState.bs").compute(f,function(b){b=b.blocked_ids;a=d("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(f,b,e)});return a}function u(a,b,c){t(a,b,c)&&a.tabGroup.tabs.get(b)!=null&&(a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!0}),a=r(a,b,!0));return a}function v(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_GROUP_ENTRANCE_WARNING_DIALOG:a.tabGroup.tabs.get(b.tabID)!=null&&(a=a.mergeIn(["tabGroup","tabs",b.tabID],{showWarningForThreadWithBlockees:!1}))}return a}function w(a,b){switch(b.type){case d("FantaTabActions").Types.OPT_IN_OPEN_TAB_WITH_BLOCKEES:b=b.tabID;a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!1});a=a.setIn(["blockedWarning","optedInThreadsWithBlockees",b],!0);a=r(a,b,!1);a=C(a,b)}return a}function x(a,b){switch(b.type){case d("FantaTabActions").Types.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;a=r(a,f,!0)}return a}return a}function y(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_TAB:case d("FantaTabActions").Types.DELETE_TAB:var c=b.tabID;i.debug(b.type,JSON.stringify({id:c}));return z(a,c)}return a}function z(a,b){a=D(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function A(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_ALL_TABS:i.debug(b.type);a=D(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function B(a,b){switch(b.type){case d("FantaTabActions").Types.CLOSE_AND_TAB_NEXT:i.debug(b.type,JSON.stringify({id:b.tabID}));a=z(a,b.tabID);return L(a)}return a}function C(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:j++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function D(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function E(a,b){switch(b.type){case d("FantaTabActions").Types.HOVERED_TAB:b=b.tabID;return G(a,b,!0)}return a}function F(a,b){switch(b.type){case d("FantaTabActions").Types.UNHOVERED_TAB:b=b.tabID;return G(a,b,!1)}return a}function G(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function H(a,b){switch(b.type){case d("FantaTabActions").Types.SET_ALLOWED_RAISED_TABS:var e=b.allowedRaisedTabs,f=a.tabGroup.allowedRaisedTabs;if(e!==f){i.debug(b.type,JSON.stringify({count:e}));e=Math.max(1,e);var g=a.tabGroup.tabs.count(),h=g>e?e:g;b=e>f&&g>f;f=e<f&&g>e;(b||f)&&c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(e).setOpenTabs(g).setVisibleTabs(h).log()},"FantaReducersTabs")}return I(a,e)}return a}function I(a,b){b===void 0&&(b=d("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(b===a.tabGroup.allowedRaisedTabs)return a;b=Math.max(1,b);return a.mergeIn(["tabGroup"],{allowedRaisedTabs:b})}function J(a,b){switch(b.type){case d("FantaTabActions").Types.LOAD_FROM_DATA:var e=a.tabGroup,f=b.tabData,g=e.updatedTime;if(g>=f.updatedTime||f.updatedTime===void 0)return a;var h=Date.now();if(f.updatedTime>h){i.debug(b.type+"_future_date",JSON.stringify({currentTime:h,updatedTime:g,newerTime:f.updatedTime}));return a}a=I(a.set("tabGroup",new(c("FantaTypeTabGroup"))()),e.allowedRaisedTabs);var j=[];f.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(b){j.push(b.id),m("fb_header_dock:loaded_from_browser_cookie",b.id),a=q(a,b.id,!1,["fb_header_dock:loaded_from_browser_cookie"]),b.isMinimized&&(a=r(a,b.id,b.isMinimized))});Array.isArray(f.tabs)&&f.tabs.length>0&&(c("MessengerWebEventsFalcoEvent")&&c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"load_tab_from_cookie",extra_data:{tabNumber:f.tabs.length}}}));f.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=C(a,b.id,!0)});i.debug(b.type,JSON.stringify({updatedTime:g,newerTime:f.updatedTime,opened:j}));a=f.focusedTabID?C(a,f.focusedTabID,!0):D(a)}return a}function K(a,b){switch(b.type){case d("FantaTabActions").Types.FOCUS_NEXT_TAB:return L(a)}return a}function L(a){var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;c=c.filter(function(a){return!a.isMinimized});if(c.count()<2)return a;var d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return C(a,c.first().id);else return C(a,d.first().id)}function M(a,b){switch(b.type){case d("FantaTabActions").Types.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;b=b.filter(function(a){return!a.isMinimized});if(b.count()<2)return a;var e=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(e.count()===0)return C(a,b.last().id);else return C(a,e.first().id)}return a}g.openTab=a;g.replaceTab=b;g.minimizeTab=e;g.unminimizeTab=f;g.focusTab=n;g.blurTab=o;g.receivedNewMessage=p;g.onThreadPayloadReceived=s;g.closeGroupEntranceWarningDialog=v;g.optInOpenTabWithBlockees=w;g.minimizAllTabs=x;g.closeTab=y;g.closeAllTabs=A;g.closeAndTabNext=B;g.hoveredTab=E;g.unhoveredTab=F;g.setAllowedRaisedTabs=H;g.loadFromData=J;g.focusNextTab=K;g.focusPreviousTab=M}),98);
__d("FantaTypeBlockedWarningState",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a={optedInThreadsWithBlockees:c("immutable").Map({})};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f,g){"use strict";a={tabContents:c("immutable").Map({}),userInputRequest:{}};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaTypeAppState",["FantaTypeBlockedWarningState","FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f,g){"use strict";a={tabGroup:new(c("FantaTypeTabGroup"))(),mercury:new(c("FantaTypeMercuryState"))(),blockedWarning:new(c("FantaTypeBlockedWarningState"))()};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("immutable").Record(a));g["default"]=b}),98);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f,g){"use strict";var h=[].concat(Object.values(d("FantaReducersPreLogging")),Object.values(d("FantaReducersTabs")),Object.values(d("FantaReducersMercury")),Object.values(d("FantaReducersMessages")),Object.values(d("FantaReducersDockCalculator")),Object.values(d("FantaReducersCookie")),Object.values(d("FantaComposeViewReducers")),Object.values(d("FantaReducersLogging")));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.getInitialState=function(){return new(c("FantaTypeAppState"))()};d.ignoreReducer=function(a){var b=Object.values(a);h=h.filter(function(a){return!b.find(function(b){return b===a})})};d.addReducers=function(a){this.ignoreReducer(a),h=h.concat(Object.values(a))};return b}(c("FluxReduceStore"));a.__moduleID=f.id;b=new a(c("FantaDispatcher"));e=b;g["default"]=e}),98);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MWCount.re","MercuryIDs","MessengerState.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=!0;function a(a,b,e){var f={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:e};e=[];var g=this._getCookieKeys();a=a||{};a[g.tabs]&&(e=a[g.tabs]);var i=!1;e.forEach(function(a){var d=!c("CurrentUser").isWorkUser()&&!b?!0:!a.r;d||(i=!0);f.tabs.push({id:a.i,isMinimized:d,openCounter:a.o,focusCounter:a.f})});h&&(i?d("MWCount.re").Blue.Cookie.Lift.some():d("MWCount.re").Blue.Cookie.Lift.none(),e.length==0?d("MWCount.re").Blue.Cookie.Show.none():e.length==1?d("MWCount.re").Blue.Cookie.Show.one():d("MWCount.re").Blue.Cookie.Show.many(),h=!1);if(b)for(var e=b.tabs.values(),j=Array.isArray(e),k=0,e=j?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=e.length)break;l=e[k++]}else{k=e.next();if(k.done)break;l=k.value}l=l;d("MessengerState.bs").isEmptyLocalThread(c("CurrentUser").getID(),l.id)&&f.tabs.push({id:l.id,isMinimized:l.isMinimized,openCounter:l.openCounter,focusCounter:l.focusCounter})}f.focusedTabID=a[g.focusedTabID];f.updatedTime=a[g.updatedTime];return f}function b(a,b){var c=[],e=this._getCookieKeys();if(b[e.updatedTime]>a.updatedTime)return b;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!d("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&c.push({i:i.id,r:i.isMinimized?void 0:1,o:i.openCounter,f:i.focusCounter})}b[e.tabs]=c;b[e.focusedTabID]=a.focusedTabID;b[e.updatedTime]=a.updatedTime;return b}function e(a,b){if(!b.includes("fb_page:user_message_prompt"))return!1;b=d("MessengerState.bs").getThreadMessagesRangeNow(c("CurrentUser").getID(),a,0,1)[0];return b===void 0}function f(){var a=c("CurrentUser").isWorkUser();return{tabs:a?d("FantaConst").cookieIDs.WORK_COOKIE_ID:d("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?d("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:d("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?d("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:d("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}g.convertCookieData=a;g.createCookieData=b;g._shouldDisableForCookie=e;g._getCookieKeys=f}),98);
__d("FantaTabMainPlaceholder.react",["cx","XUISpinner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){return i.jsx("div",{className:"_59v1",children:i.jsx("div",{className:"_5qi9 _5qib",children:i.jsx("div",{className:"_3_9e _s0f _50mz _50m_ fbNub _50-v opened _27_3",children:i.jsx("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent _6vu1",children:i.jsx("div",{className:"fbNubFlyoutOuter",children:i.jsx("div",{className:"fbNubFlyoutInner _6vu1 _6z9d",children:i.jsx("div",{className:"_5-kq",children:i.jsx(c("XUISpinner.react"),{})})})})})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("DockTabsViewportCalculator").getInstance(a);if(!b)return;b.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=c("immutable").Map({});c("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){var b=d("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a),e=function(){d("FantaTabActions").setAllowedRaisedTabs(b)};c("ifRequired")("FantaAppStore",function(a){a=a.getState().tabGroup.allowedRaisedTabs;b!==a&&c("setImmediate")(e)},function(){c("setImmediate")(e)})}});c("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){b.forceRecalculateChatTabs()});b.forceRecalculateFBDockWidth();c("Arbiter").subscribe("page_transition",function(a,b){c("isWebMessengerURI")(b.uri)&&c("setImmediate")(function(){return d("FantaTabActions").minimizeAllTabs()})})}g.init=a}),98);
__d("FantaTabsAppBase",["CSS","ChatAppActions","ChatAppStore","MWCount.re"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.init=function(a,b,c){if(this.isInitialized())return;d("MWCount.re").Blue.killed("init");return};b.isInitialized=function(){return!!c("ChatAppStore").getState().isInitialized};b.isHidden=function(){var a=c("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};b.hide=function(){if(this.isHidden())return;d("CSS").hide(this.$1);d("ChatAppActions").hide()};b.unhide=function(){var a=c("ChatAppStore").getState();a.isInitialized?a.isHidden&&(d("CSS").show(this.$1),e(["Dock"],function(a){a.resizeAllFlyouts()}),d("ChatAppActions").unhide()):a.isLoaded||(e(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),d("ChatAppActions").load())};b.initializeFantaData=function(a){};b.initializeFantaUI=function(){};return a}();g["default"]=a}),98);
__d("FantaTabsEagerBootloader",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){c("ifRequired")("FantaAppStore",function(b){return b.addReducers(a)}),h=c("emptyFunction")};function a(){c("ifRequired")("FantaTabsSlimApp",function(a){a.silentPumpUp()}),c("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(a){h(a)},"FantaTabsEagerBootloader")}g.bootload=a}),98);
__d("FantaTabsSlimApp",["BootloadOnRender.react","ChatPerfInstrumentation","FantaTabMainPlaceholder.react","FantaTabsAppBase","JSResource","LazyComponent.react","MWCount.re","ReactDOM","UserActivity","emptyFunction","gkx","ifRequired","react","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i,j=500;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$FantaTabsSlimApp1=!1,b)||babelHelpers.assertThisInitialized(c)}var f=b.prototype;f.getPumpedUp=function(a){this.$FantaTabsSlimApp1?a():this.$FantaTabsSlimApp2(a)};f.silentPumpUp=function(){this.$FantaTabsSlimApp1||this.$FantaTabsSlimApp2(c("emptyFunction"),!0)};f.getViewComponent=function(a){a=a?h.jsx("div",{}):h.jsx(c("FantaTabMainPlaceholder.react"),{});return h.jsx(c("BootloadOnRender.react"),{component:h.jsx(c("LazyComponent.react"),{loadDataOnMount:!1}),loader:c("JSResource")("FantaMercuryTabsWithMain.react").__setRef("FantaTabsSlimApp"),placeholder:a})};f.initializeFantaData=function(a){var b=this;e(["FantaCookieUtil","MercuryThreadInformer","PresenceState"],function(d,e,f){f.registerStateLoader(function(e){if(b.$FantaTabsSlimApp1)c("ifRequired")("FantaTabActions",function(b){c("ifRequired")("FantaAppStore",function(f){c("gkx")("1812641")&&b.loadFromData(d.convertCookieData(e,f.getState().tabGroup,a))})});else{var f=d.convertCookieData(e,null,a);f&&f.tabs.length>0&&c("gkx")("1812641")&&b.$FantaTabsSlimApp2(function(){c("ifRequired")("FantaTabActions",function(a){a.loadFromData(f)})})}}),f.doSync(),e.get().subscribe("threads-updated",function(a,b){c("ifRequired")("FantaGetMessageActions",function(a){Object.keys(b).forEach(function(b){c("setImmediate")(function(){a.refreshThread(b)})})})}),c("ChatPerfInstrumentation").logInitData()})};f.$FantaTabsSlimApp2=function(a,b){var f=this;c("ifRequired")("FantaAppStore",function(b){a()},function(){e(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(e,g,h,k,l,m){m.registerStateStorer(function(a){if(!c("UserActivity").isOnTab()&&!c("UserActivity").isActive(j))return a;var b=e.getState().tabGroup;if(!i||i&&!i.equals(b)){i=b;return g.createCookieData(b,a)}else return a}),d("ReactDOM").render(f.getViewComponent(b),f.tabsElem),l.init(f.tabsElem),f.$FantaTabsSlimApp1=!0,a()})})};f.initializeFantaUI=function(){d("MWCount.re").Blue.killed("slim_initializeFantaUI");return};return b}(c("FantaTabsAppBase"));b=new a();g["default"]=b}),98);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("Dispatcher_DEPRECATED"))();g["default"]=a}),98);
__d("WorkChatAvailabilityStatusLoader",["Bootloader","Promise","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null;function a(){c("nullthrows")(this._store,"Status store is not loaded");return this._store}function d(){c("nullthrows")(this._actions,"Status actions is not loaded");return this._actions}function e(){return this._store!=null&&this._actions!=null}function f(){var a=this;this._promise||(this._promise=new(b("Promise"))(function(b){c("Bootloader").loadModules(["WorkChatAvailabilityStatusActions","WorkChatAvailabilityStatusStore"],function(c,d){a._store=d,a._actions=c,b({store:d,actions:c})},"WorkChatAvailabilityStatusLoader")}));return this._promise}g._store=h;g._actions=i;g._promise=j;g.getStoreEnforce=a;g.getActionsEnforce=d;g.isLoaded=e;g.load=f}),98);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","OrderedFriendsList","ShortProfiles"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=b||{};b.kanaNormalization=!0;b.maxResults=5;b.minQueryLength=2;b=a.call(this,b)||this;b.$MercuryAudienceRestrictedTypeaheadDataSource1=!1;b.$MercuryAudienceRestrictedTypeaheadDataSource2=!1;b.$MercuryAudienceRestrictedTypeaheadDataSource3={};b.$MercuryAudienceRestrictedTypeaheadDataSource4=!0;b.queryCache={};b.localCache={};b.queryIDs={};return b}var e=b.prototype;e.dirty=function(){return this};e.buildData=function(b){return a.prototype.buildData.call(this,b)};e.query=function(b,c,d,e){c=c||b.length===1;return a.prototype.query.call(this,b,c,d,e)};e.getQueryData=function(b,c){return babelHelpers["extends"]({},a.prototype.getQueryData.call(this,b,c))};e.setEntry=function(a,b){this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]=b};e.getEntry=function(a){return this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]||null};e.getCachedShortProfileIDs=function(){var a=d("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var b=d("ShortProfiles").getNow(a);return a==c("CurrentUser").getID()||b&&(b.type==="friend"||b.type==="fb4c")});return a};e.isBootstrapped=function(){return this.$MercuryAudienceRestrictedTypeaheadDataSource1};e.isBootstrapping=function(){return this.$MercuryAudienceRestrictedTypeaheadDataSource2};e.processEntries=function(b,c){b=b&&b.map(function(a){a.index==null&&(a.render_type==="friend"||a.render_type==="fb4c")&&(a.index=d("OrderedFriendsList").getActiveRank(a.uid));return a});return a.prototype.processEntries.call(this,b)};e.mergeUids=function(b,c,d,e){var f=this;c=c.sort(function(a,b){a=f.getEntry(a);b=f.getEntry(b);return a&&a.index&&b&&b.index?a.index-b.index:0});return a.prototype.mergeUids.call(this,b,c,d,e)};e.setQueryData=function(b,c){return a.prototype.setQueryData.call(this,b)};e.respond=function(b,c,d){return a.prototype.respond.call(this,b,c,d)};e.setShowThreads=function(a){this.$MercuryAudienceRestrictedTypeaheadDataSource4=a};return b}(c("DataSource"));g["default"]=a}),98);
__d("MercurySyncResnapshot",["Bootloader","MercurySingletonProvider","Promise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=a}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};var d=a.prototype;d.resnapshot=function(){var a=this;this.$1||(this.$1=new(b("Promise"))(function(b,d){c("Bootloader").loadModules(["MercurySyncDeltaHandler"],function(c){c.getForFBID(a.$2).emergencyDFF(function(c){b(c),a.$1=null},function(){d(),a.$1=null})},"MercurySyncResnapshot")}));return this.$1};return a}();var h=new(c("MercurySingletonProvider"))(a);g["default"]=a}),98);
__d("WaterfallMessageLifetimeTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:WaterfallMessageLifetimeLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAttemptID=function(a){this.$1.attempt_id=a;return this};c.setDestService=function(a){this.$1.dest_service=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setEventType=function(a){this.$1.event_type=a;return this};c.setIsBatch=function(a){this.$1.is_batch=a;return this};c.setIsGroup=function(a){this.$1.is_group=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setOfflineThreadingID=function(a){this.$1.offline_threading_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPushNotifID=function(a){this.$1.push_notif_id=a;return this};c.setReceiptID=function(a){this.$1.receipt_id=a;return this};c.setSenderID=function(a){this.$1.sender_id=a;return this};c.setServiceName=function(a){this.$1.service_name=a;return this};c.setSrcService=function(a){this.$1.src_service=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTimeStamp=function(a){this.$1.time_stamp=a;return this};c.setTopic=function(a){this.$1.topic=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={attempt_id:!0,dest_service:!0,device_id:!0,event_type:!0,is_batch:!0,is_group:!0,message_id:!0,offline_threading_id:!0,page_id:!0,push_notif_id:!0,receipt_id:!0,sender_id:!0,service_name:!0,src_service:!0,thread_id:!0,time_stamp:!0,topic:!0};f["default"]=a}),66);
__d("MessageWaterfallLogger",["MqttEnv","WaterfallMessageLifetimeTypedLogger"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;a={logNewMessageToWaterfall:function(a){var c=a.senderID,d=a.receiptID,e=a.messageID,f=a.offlineThreadingID,i=a.threadID,j=a.irisSeqId;a=a.isGroup;if(!g.genGk(h.mqtt_waterfall_log_client_sampling))return;new(b("WaterfallMessageLifetimeTypedLogger"))().setEventType("message_receive_ws").setServiceName("web").setSrcService("mqtt").setDestService("webclient").setSenderID(c).setReceiptID(d).setMessageID(e).setOfflineThreadingID(f).setThreadID(i).setIsGroup(a?1:0).addToExtraData("sync_seq_id",j).log()}};e.exports=a}),null);
__d("MessengerMQTTPayloadPreprocessor",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=parseInt(c.irisSeqId.toString(),10);return{seqID:d,obj:{queue:a,iseq:d,delta:c,seqID:d,type:b}}}f.process=a}),66);
__d("MessengerMQTTPresenceReporting",["FBMqttChannel","InstantGamesPresenceProperties","MercuryConfig","ODS","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt_web.presence",i="/foreground_state",j="/set_client_settings",k="/send_endpoint_capabilities",l=16384,m=2097152,n=c("MercuryConfig").idle_limit||18e5,o=c("MercuryConfig").idle_poll_interval||3e5,p=60*1e3,q=c("gkx")("1166607")?!1:document.hasFocus(),r,s=Date.now(),t=!1;function a(){}function u(a,b){(q!==a||b)&&(q=a,c("FBMqttChannel").setForegroundState(a),c("FBMqttChannel").publish(i,JSON.stringify({foreground:a})),d("ODS").bumpEntityKey(2966,h,a?"report.foregrounded":"report.backgrounded"))}function b(a){(r===void 0||r!=a)&&(r=a,c("FBMqttChannel").setChatVisibility(a),c("FBMqttChannel").publish(j,JSON.stringify({make_user_available_when_in_foreground:a})),d("ODS").bumpEntityKey(2966,h,a?"report.chat_visibility.on":"report.chat_visibility.off"))}function e(){var a=c("FBMqttChannel").getEndpointCapabilities();a|=l;c("FBMqttChannel").setEndpointCapabilities(a);c("FBMqttChannel").publish(k,JSON.stringify({endpoint_capabilities:a}))}function v(a){var b=c("FBMqttChannel").getEndpointCapabilities();a?b|=m:b&=~m;c("FBMqttChannel").setEndpointCapabilities(b);c("FBMqttChannel").publish(k,JSON.stringify({endpoint_capabilities:b}))}function f(){s=Date.now(),u(!0,!1)}window.setInterval(function(){!document.hasFocus()&&Date.now()-s>n&&u(!1,!0)},o);window.setInterval(function(){var a=c("InstantGamesPresenceProperties").isActiveGamePresence();t!==a&&(v(a),t=a)},p);g.init=a;g.reportForegroundState=u;g.reportChatVisibility=b;g.reportWorkchatDesktopCapability=e;g.reportInstantGamesPresence=v;g.onUserActivity=f}),98);
__d("MessengerMQTTPresenceActivity",["CurrentUser","Event","MessengerMQTTPresenceReporting","Run","UserActivity"],(function(a,b,c,d,e,f,g){function a(){c("Event").listen(window,"focus",function(){d("MessengerMQTTPresenceReporting").onUserActivity()}),c("Event").listen(window,"blur",function(){d("MessengerMQTTPresenceReporting").reportForegroundState(!1,!1)}),d("Run").onBeforeUnload(function(){d("MessengerMQTTPresenceReporting").reportForegroundState(!1,!0)},!1),c("UserActivity").subscribe(function(){d("MessengerMQTTPresenceReporting").onUserActivity()}),c("CurrentUser").isWorkUser()&&e(["WorkplaceChatHelper"],function(a){a.isDesktopChatApp()&&d("MessengerMQTTPresenceReporting").reportWorkchatDesktopCapability()})}g.init=a}),98);
__d("MessengerMQTTTypingDataPreProcessor",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=b.thread;a=c==null?{from:b.sender_fbid,st:b.state,to:a,type:"typ"}:{from:b.sender_fbid,st:b.state,thread:c,thread_fbid:c,type:"ttyp"};return{obj:a}}f.process=a}),66);
__d("MessengerMQTTConnection",["Arbiter","CurrentUser","FBMqttChannel","MercurySingletonProvider","MercurySyncResnapshot","MessageWaterfallLogger","MessengerMQTTConnectionEvents","MessengerMQTTPayloadPreprocessor","MessengerMQTTTypingDataPreProcessor","MqttLogger","PresenceStatus","SyncProtocolClient","SyncProtocolConstants","cr:1177633","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=c("MqttLogger").getInstance()}a.setUp=function(d){var f=d.fbid,g=d.irisSeqID;d.appID;d.endpoint;if(!f||!g)return;var h=c("MqttLogger").getInstance();if(!c("CurrentUser").isLoggedInNow()){h.debugTrace("run","User not logged in");h.bumpCounter("user_not_loggged_in");return}var i=a.getForFBID(f);a.addDeltaStream({fbid:f,irisSeqID:g});i.$3(c("FBMqttChannel").getConnectionState(),c("FBMqttChannel").getLongPollingStatus());c("FBMqttChannel").subscribeChannelEvents({onMQTTStateChanged:function(a){i.$3(a,c("FBMqttChannel").getLongPollingStatus())},onJSError:function(a){h.bumpCounter("mqtt_js_error")}});b("cr:1177633")!=null&&b("cr:1177633").subscribe(c("PresenceStatus"));e(["MessengerMQTTPresenceActivity"],function(a){a.init()})};a.addDeltaStream=function(b){var d=b.fbid,e=b.irisSeqID;b=b.source;var f=a.getForFBID(d),g=null;c("SyncProtocolClient").getForFBID(d).init(c("FBMqttChannel"),e,g,null,b).addDeltaStreamListener(f)};var f=a.prototype;f.onDeltaReceived=function(a){var b=a.type;a=a.payload;try{b=="NewMessage"&&d("MessageWaterfallLogger").logNewMessageToWaterfall({senderID:a.messageMetadata.actorFbId,receiptID:this.$1,messageID:a.messageMetadata.messageId,offlineThreadingID:a.messageMetadata.offlineThreadingId,threadID:a.messageMetadata.threadKey.threadFbId!=null?a.messageMetadata.threadKey.threadFbId:"",irisSeqId:a.irisSeqId,isGroup:a.messageMetadata.threadKey.threadFbId!=null})}catch(a){this.$2.logError(a,"Unable to log to waterfall")}b=d("MessengerMQTTPayloadPreprocessor").process(this.$1,b,a);c("Arbiter").inform(d("MessengerMQTTConnectionEvents").DELTA_EVENT,b)};f.onStreamDisconnect=function(a){var b=this;if(a==="ERROR_QUEUE_LOST"||a==="ERROR_QUEUE_NOT_FOUND"||a==="ERROR_QUEUE_EXCEEDS_MAX_DELTAS"||a==="ERROR_QUEUE_UNDERFLOW"||a==="ERROR_QUEUE_OVERFLOW"){c("promiseDone")(c("MercurySyncResnapshot").getForFBID(this.$1).resnapshot().then(function(a){if(a)c("SyncProtocolClient").getForFBID(b.$1).connectToIris(a.toString());else throw new Error("No seqID returned from resnapshot")}),null,function(){c("Arbiter").inform(d("MessengerMQTTConnectionEvents").STREAM_DISCONNECT,d("SyncProtocolConstants").SNAPSHOT_FAILURE)});return}a!==d("SyncProtocolConstants").IRIS_CURSOR_LIMIT&&this.$2.bumpCounter("unhandled_iris_error."+a);c("Arbiter").inform(d("MessengerMQTTConnectionEvents").STREAM_DISCONNECT,a)};f.onTypingReceived=function(a){a=d("MessengerMQTTTypingDataPreProcessor").process(this.$1,a);c("Arbiter").inform(d("MessengerMQTTConnectionEvents").TYP,a)};f.$3=function(a,b){if(a=="Connected"||b=="LPActive"){c("Arbiter").inform(d("MessengerMQTTConnectionEvents").STREAM_CONNECT);return}switch(a){case d("MessengerMQTTConnectionEvents").STATE_CONNECTING:c("Arbiter").inform(d("MessengerMQTTConnectionEvents").STREAM_CONNECTING);break;case d("MessengerMQTTConnectionEvents").STATE_DISCONNECTED:c("Arbiter").inform(d("MessengerMQTTConnectionEvents").STREAM_DISCONNECT);break}};return a}();var h=new(c("MercurySingletonProvider"))(a);g["default"]=a}),98);
__d("MercuryParticipantListRenderer",["fbt","MercuryIDs","react"],(function(a,b,c,d,e,f,g,h){"use strict";d("react");a=function(){function a(){var a=this;this.$6=function(b){var c=a.$5;if(c!=null){var e=d("MercuryIDs").getUserIDFromParticipantID(b.id);if(e!=null&&c[e]!=null&&c[e]!=void 0)return c[e]}return a.$2?b.short_name:b.name};this.$1=!1;this.$2=!1;this.$3=!1;this.$4=0;this.$5=null}var b=a.prototype;b.renderParticipantList=function(a){a=a.map(this.$6);switch(a.length){case 0:return i(this.$1);case 1:return j(a);case 2:return this.$3?l(a):k(a);case 3:return this.$3?n(a):m(a);default:return this.$3?p(a,this.$4):o(a,this.$4)}};b.setIsNewThread=function(a){this.$1=a;return this};b.setNameRenderer=function(a){this.$6=a;return this};b.setUseShortName=function(a){this.$2=a;return this};b.setNickname=function(a){this.$5=a;return this};b.setUseAndSeparator=function(a){this.$3=a;return this};b.setTotalParticipantCount=function(a){this.$4=a;return this};return a}();function i(a){if(a)return h._(/*FBT_CALL*/"New message"/*FBT_CALL*/);else return h._(/*FBT_CALL*/"No participants"/*FBT_CALL*/)}function j(a){return a[0]}j.displayName=j.name+" [from "+f.id+"]";function k(a){return h._(/*FBT_CALL*/"{participant1}, {participant2}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1])])}k.displayName=k.name+" [from "+f.id+"]";function l(a){return h._(/*FBT_CALL*/"{participant1} and {participant2}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1])])}l.displayName=l.name+" [from "+f.id+"]";function m(a){return h._(/*FBT_CALL*/"{participant1}, {participant2}, {participant3}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}m.displayName=m.name+" [from "+f.id+"]";function n(a){return h._(/*FBT_CALL*/"{participant1}, {participant2} and {participant3}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}n.displayName=n.name+" [from "+f.id+"]";function o(a,b){return h._(/*FBT_CALL*/"{participant1}, {participant2}, {participant3}, {others_link}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2]),h._param("others_link",q((b||a.length)-3))])}o.displayName=o.name+" [from "+f.id+"]";function p(a,b){return h._(/*FBT_CALL*/"{participant1}, {participant2} and {others_link}"/*FBT_CALL*/,[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_link",q((b||a.length)-2))])}p.displayName=p.name+" [from "+f.id+"]";function q(a){if(a>1)return h._(/*FBT_CALL*/{"*":"{others_count} others"}/*FBT_CALL*/,[h._param("others_count",a,[0])]);else return h._(/*FBT_CALL*/"1 other"/*FBT_CALL*/)}g["default"]=a}),98);
__d("SRLayout.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");function a(a){return i.jsx("div",{className:c("joinClasses")(a.className,"_5aj7"),children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SRLayoutColumn.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");function a(a){return i.jsx("div",{className:c("joinClasses")(a.className,"_4bl7"),children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SRLayoutFillColumn.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");function a(a){return i.jsx("div",{className:c("joinClasses")(a.className,"_4bl9"),children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SRLink.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("a",babelHelpers["extends"]({},this.props,{children:this.props.children}))};return b}(h.Component);g["default"]=a}),98);
__d("SplitImage.react",["cx","Image.react","joinClasses","react"],(function(a,b,c,d,e,f,g){var h,i=h||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.size,c=this.props.srcs,d=this.props.border,e=this.props.className,f=this.props.halfView;if(c.length===0)return null;var g=null;c.length===1?g=this.$1(c[0],a):c.length===2?g=this.$2(c,a,d):g=this.$3(c,a,d,f);return i.jsx("div",{className:b("joinClasses")(e,"_55lt"),style:{width:a,height:a},children:g})};d.$1=function(a,c){return i.jsx(b("Image.react"),{src:a,width:c,height:c,alt:""})};d.$2=function(a,c,d){var e=Math.floor(c/2),f=-Math.floor(e/2);d="_55lu"+(d?" _57xo":"");return i.jsxs("div",{children:[i.jsx("div",{className:"_55lu",style:{width:e},children:i.jsx(b("Image.react"),{src:a[0],width:c,height:c,style:{marginLeft:f},alt:""})}),i.jsx("div",{className:d,style:{width:e},children:i.jsx(b("Image.react"),{src:a[1],width:c,height:c,style:{marginLeft:f},alt:""})})]})};d.$3=function(a,c,d,e){e=e===!0?Math.floor(c/3*1.5)+1:Math.floor(c/3*2);var f=-Math.floor((c-e)/2),g=Math.floor(c/2),h=c-e,j=-Math.floor((g-h)/2),k="_55lu"+(d?" _57pl":"");d="_55lu"+(d?" _57pm":"");return i.jsxs("div",{children:[i.jsx("div",{className:k,style:{width:e},children:i.jsx(b("Image.react"),{src:a[0],width:c,height:c,style:{marginLeft:f},alt:""})}),i.jsx("div",{className:d,style:{width:h,height:g},children:i.jsx(b("Image.react"),{src:a[1],width:g,height:g,style:{marginLeft:j},alt:""})}),i.jsx("div",{className:"_55lu",style:{width:h,height:g},children:i.jsx(b("Image.react"),{src:a[2],width:g,height:g,style:{marginLeft:j},alt:""})})]})};return c}(i.Component);e.exports=a}),null);
__d("ChatSidebarAdminedPage.react",["cx","Bootloader","SRLayout.react","SRLayoutColumn.react","SRLayoutFillColumn.react","SRLink.react","SRXUIBadge.react","SplitImage.react","emptyFunction","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(){var a=d.props,b=a.slot,e=a.slotOffset,f=a.totalSlots;c("Bootloader").loadModules(["MessengerChatSidebarSlotsTypedLogger"],function(a){new a().setSlotClicked(e+b).setSlotsVisibleBeforeScrolling(f).setRelativeSlotClicked(d.props.slot).setSidebarSection("admined_pages").log()},"ChatSidebarAdminedPage.react")},d.$2=function(){var a=String(d.props.page.id);c("Bootloader").loadModules(["MessengerChatSidebarSlotsTypedLogger"],c("emptyFunction"),"ChatSidebarAdminedPage.react");d.props.onMouseEnter&&d.props.onMouseEnter(a)},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){var a=this,b=9,d=this.props.page,e=d.imgSrc,f=[];e!=null&&(f=[e]);return i.jsx("li",{className:"_12um _42fz","data-id":d.id,ref:function(b){a.$1=b},onMouseOver:this.$2,onClick:this.$3,children:i.jsx("div",{className:"_55ln",children:i.jsx("div",{className:"_55lp",children:i.jsxs(c("SRLayout.react"),{children:[i.jsx(c("SRLayoutColumn.react"),{children:i.jsx(c("SRLink.react"),{href:d.uri,children:i.jsx("div",{className:"_55lq",children:i.jsx(c("SplitImage.react"),{size:d.imgSize,srcs:f})})})}),i.jsx(c("SRLayoutFillColumn.react"),{children:i.jsx(c("SRLink.react"),{className:"_224p",href:d.uri,children:i.jsx("div",{className:"_55lr",children:d.name})})}),i.jsx(c("SRLayoutColumn.react"),{className:"_3p8_",children:i.jsx("div",{className:"_5bon",children:i.jsx(c("SRXUIBadge.react"),{className:"_4fsv",count:d.badgingCount,maxcount:b})})})]})})})})};return b}(i.Component);g["default"]=a}),98);
__d("ChatSidebarHeader.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{onClick:this.props.onClick,className:c("joinClasses")(this.props.className,"_55ob"),children:i.jsx("div",{className:"_55oc",children:this.props.children})})};return b}(i.Component);g["default"]=a}),98);
__d("XPagesBrowserController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/",{category:{type:"String"},ref:{type:"String"},cityid:{type:"Int"},similar:{type:"Int"},frompageid:{type:"Int"},actAsPageID:{type:"Int"},source:{type:"String"},pyml:{type:"Int"},viewallpywo:{type:"Bool",defaultValue:!1},notif_id:{type:"Int"},notif_page_id:{type:"Int"}})}),null);
__d("ChatSidebarAdminedPagesSection.react",["cx","fbt","ChatSidebarHeader.react","LeftRight.react","SRLink.react","XPagesBrowserController","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=3;function a(a){var b=null;if(a.adminedPages.length>=k){var d=c("XPagesBrowserController").getURIBuilder().setString("category","your_pages").setString("ref",a.adminedPages[0].ref).getURI();b=j.jsx(c("SRLink.react"),{className:"_2l56",href:d,target:"_blank",children:i._(/*FBT_CALL*/"SEE ALL"/*FBT_CALL*/)})}d=a.pageListModule;return j.jsxs(j.Fragment,{children:[j.jsx(c("ChatSidebarHeader.react"),{className:"_4kqp",children:j.jsxs(c("LeftRight.react"),{children:[i._(/*FBT_CALL*/"YOUR PAGES"/*FBT_CALL*/),b]})}),j.jsx(d,{adminedPages:a.adminedPages,onMouseEnter:a.onMouseEnterItem})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XWorkSaveGroupPurposeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/group_creation/dialog/save_purpose/",{purpose:{type:"String",required:!0},ref:{type:"String",required:!0},name:{type:"String"},community:{type:"FBID"},coworkers_to_invite:{type:"IntVector",defaultValue:[]},back_disallowed:{type:"Bool",defaultValue:!1}})}),null);
__d("ChatSidebarCreateNewGroupItem.react",["cx","fbt","ix","Bootloader","Image.react","MercuryConfig","QE2Logger","SRLink.react","TooltipData","XWorkSaveGroupPurposeController","prop-types","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$2=function(a){d("QE2Logger").logExposureForUser("workchat_synced_groups_universe");if(c("MercuryConfig").WorkSyncedGroupAutoCreateEnabled)return;var b=e.props,f=b.slot,g=b.slotOffset,h=b.totalSlots;c("Bootloader").loadModules(["MessengerChatSidebarSlotsTypedLogger","MessengerGCFJewelNewGroupButtonInit"],function(a,b){new a().setSlotClicked(g+f).setSlotsVisibleBeforeScrolling(h).setRelativeSlotClicked(f).setSidebarSection("groups").log(),b.onLinkClick()},"ChatSidebarCreateNewGroupItem.react");a.preventDefault()},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){var a=i._(/*FBT_CALL*/"Create New Group"/*FBT_CALL*/),b=j("492281"),e=20,f="_55ln _qhr",g=c("MercuryConfig").WorkSyncedGroupAutoCreateEnabled?c("XWorkSaveGroupPurposeController").getURIBuilder().setString("purpose","work_team").setString("ref","group_creation_button_on_chat_sidebar").setBool("back_disallowed",!0).getURI():"#",h=c("MercuryConfig").WorkSyncedGroupAutoCreateEnabled?"dialog":"ignore";return k.jsx("div",babelHelpers["extends"]({},d("TooltipData").propsFor(this.$1()),{children:k.jsx(c("SRLink.react"),{className:f,href:g,onClick:this.$2,rel:h,children:k.jsxs("div",{className:"_55lp",children:[k.jsx("div",{className:"_55lq _tt_","aria-hidden":!0,children:k.jsx(c("Image.react"),{className:"_tu0",src:b,width:e,height:e,alt:""})}),k.jsx("div",{className:"_55lr",children:a})]})})}))};e.$1=function(){return i._(/*FBT_CALL*/"Create New Group"/*FBT_CALL*/)};return b}(k.PureComponent);a.propTypes={slot:c("prop-types").number,slotOffset:c("prop-types").number,totalSlots:c("prop-types").number};g["default"]=a}),98);
__d("ChatSidebarNameWithGameInfo.react",["BootloadOnRender.react","JSResource","LazyComponent.react","TextWithEmoticons.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.name,d=a.userID;a=a.nameCanHaveEmoji!=null&&a.nameCanHaveEmoji;var e=a?h.jsx(c("TextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:b}):b;return h.jsx(c("BootloadOnRender.react"),{component:h.jsx(c("LazyComponent.react"),{originalElement:e,userID:d}),loader:c("JSResource")("ChatSidebarItemUserPlayingGameInfoContainer.react").__setRef("ChatSidebarNameWithGameInfo.react"),placeholder:a?e:h.jsx("div",{children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ChatSidebarProfile.react",["cx","Image.react","SplitImage.react","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");function j(a,b,d){d=Math.round(b/3);d=b-d;return i.jsxs("div",{className:"_44yp",style:{height:b,width:b},children:[i.jsx("div",{className:"_1gyw",children:i.jsx(c("Image.react"),{src:a[0],width:d,height:d,alt:""})}),i.jsx("div",{className:"_1gyw",children:i.jsx(c("Image.react"),{src:a[1],width:d,height:d,alt:""})})]})}j.displayName=j.name+" [from "+f.id+"]";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=a.images,d=a.imageSize,e=a.isActive;a=a.showMultiCompany;var f=b.length>1;b=f?j(b,d):i.jsx(c("SplitImage.react"),{className:"_1gyw",size:d,srcs:b});return i.jsxs("div",{"aria-hidden":!0,className:"_7049 _6--1"+(f?" _44yq":""),style:{height:d,width:d},children:[b,a===!0?i.jsx("div",{className:"_4rwy"}):e?i.jsx("div",{className:"_1gyx"}):null]})};return b}(i.PureComponent);g["default"]=a}),98);
__d("ChatSidebarStatus.react",["cssVar","cx","fbt","ix","Image.react","react"],(function(a,b,c,d,e,f,g,h,i,j,k){var l=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=this.renderStatusIcon();if(b==null&&a.statusTime==null)return null;var c=!0,d=a.unreadCount;d!=null&&d>0&&(b=a.statusTime!=null?null:b,c=!1);a.showingPresenceOnProfile===!1&&a.isDoNotDisturb===!0&&a.isWorkUser&&(c=!1);return l.jsxs("div",{className:"_568z"+(a.showRelationshipIndicator?" _2oov":""),children:[c?this.renderLastActiveTime():null,b]})};d.renderStatusIcon=function(){var a=this.props;if(a.isMessengerOnlyContact===!0)return l.jsx(c("Image.react"),{alt:j._(/*FBT_CALL*/"Using Messenger without Facebook"/*FBT_CALL*/),className:"_568_",src:k("28076")});else if(a.showingPresenceOnProfile===!1&&a.isDoNotDisturb===!0&&a.isWorkUser)return l.jsx("span",{"aria-label":j._(/*FBT_CALL*/"Do Not Disturb"/*FBT_CALL*/),className:"_3zdc"});else if(a.isMultiCompany===!0&&a.isWorkUser)return l.jsx("div",{"aria-label":j._(/*FBT_CALL*/"Multi company chat"/*FBT_CALL*/),className:"_6p8n"});else if(a.status===2)if(a.showRelationshipIndicator===!0)return l.jsx(c("Image.react"),{src:k("593722"),alt:j._(/*FBT_CALL*/"hearts icon"/*FBT_CALL*/)});else if(a.showingPresenceOnProfile===!1)return l.jsx("span",{"aria-label":j._(/*FBT_CALL*/"Active Now"/*FBT_CALL*/),style:{background:"#42b72a",borderRadius:"50%",display:"inline-block",height:"6px",marginLeft:"4px",veritcalAlign:"middle",width:"6px"}});return null};d.renderLastActiveTime=function(){return l.jsx("div",{className:"_568-",children:this.props.statusTime})};return b}(l.PureComponent);g["default"]=a}),98);
__d("ChatSidebarItem.react",["cx","ix","BootloaderGamesPresenceIconContainer.react","ChatSidebarConstants","ChatSidebarNameWithGameInfo.react","ChatSidebarProfile.react","ChatSidebarStatus.react","CurrentUser","ErrorBoundary.react","Image.react","JSResource","SRLink.react","SRXUIBadge.react","ShortProfiles","TextWithEmoticons.react","gkx","isFalsey","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=c("lazyLoadComponent")(c("JSResource")("ChatSidebarCallButtons.react").__setRef("ChatSidebarItem.react")),l=c("gkx")("865973");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.state={hasHovered:!1,hover:!1},d.$1=function(){return j.jsx(c("SRLink.react"),{"aria-hidden":!0,tabIndex:-1})},d.$2=function(){d.setState({hasHovered:!0,hover:!0}),d.props.onMouseEnter!=null&&d.props.onMouseEnter()},d.$3=function(){d.setState({hover:!1})},b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.render=function(){var a="_55ln"+(this.props.context?" _55lo":"")+" _qhr",b=this.props.nameCanHaveEmoji===!0?j.jsx(c("TextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.name}):this.props.name,e=d("ShortProfiles").getNow(this.props.userID||"");return l&&(e==null?void 0:e.is_blocked)?null:j.jsx(c("ErrorBoundary.react"),{fallback:this.$1,children:j.jsx(c("SRLink.react"),{className:a,href:this.props.href,onClick:this.props.onClick,onMouseEnter:this.$2,onMouseLeave:this.$3,rel:"ignore",children:j.jsxs("div",{className:"_55lp",children:[this.$4(),j.jsxs("div",{className:"_5bon",children:[this.renderRtcCallButtons(),this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()]}),j.jsx("div",{className:"_55lr",children:this.props.isPlayingGame===!0&&this.props.userID!=null&&this.props.statusTime===null&&this.props.birthday!==!0?this.$5():b}),j.jsx("div",{className:"_55ls",children:this.props.context})]})})})};e.renderUnreadCount=function(){var a=this.props.unreadCount;return c("isFalsey")(a)?null:j.jsx(c("SRXUIBadge.react"),{count:a,maxcount:9})};e.renderStatus=function(){return j.jsx(c("ChatSidebarStatus.react"),{isMessengerOnlyContact:this.props.isMessengerOnlyContact,isDoNotDisturb:this.props.isDoNotDisturb,isWorkUser:c("CurrentUser").isWorkUser(),isMultiCompany:this.props.isMultiCompany,showingPresenceOnProfile:!1,showRelationshipIndicator:this.props.showRelationshipIndicator,status:this.props.status,unreadCount:this.props.unreadCount,statusTime:this.props.statusTime})};e.renderRtcCallButtons=function(){var a=this,b=d("ShortProfiles").getNow(this.props.userID||"");if(l&&(b==null?void 0:b.is_blocked)||this.props.threadID==null)return null;return!this.state.hasHovered?null:j.jsx(j.Suspense,{fallback:null,children:j.jsx(k,{onMouseLeave:function(){a.setState({hover:!1})},hover:this.state.hover,profilePicture:this.props.image,shortName:b==null?void 0:b.firstName,threadID:this.props.threadID})})};e.renderBirthday=function(){if(this.props.birthday!==!0)return null;var a="_5dv3",b=i("74517");return j.jsx(c("Image.react"),{className:a,src:b})};e.renderPlayingGame=function(){return this.props.statusTime!=null||this.props.birthday===!0||this.props.isPlayingGame!==!0?null:j.jsx(c("BootloaderGamesPresenceIconContainer.react"),{userID:this.props.userID})};e.$4=function(){var a=this.props.imageSize,b=this.props.image,e=this.props.images;a=a!=null?a:d("ChatSidebarConstants").getImageSize();var f=[];b!=null?f=[b]:e!=null&&(f=e);return j.jsx(c("ChatSidebarProfile.react"),{showingPresenceOnProfile:!1,imageSize:a,isActive:!1,images:f})};e.$5=function(){return j.jsx(c("ChatSidebarNameWithGameInfo.react"),{name:this.props.name,nameCanHaveEmoji:this.props.nameCanHaveEmoji,userID:this.props.userID})};return b}(j.PureComponent);g["default"]=a}),98);
__d("ChatSidebarThread.react",["ChatSidebarItem.react","ChatSidebarParticipantTooltipBuilder","JSResource","MercuryIDs","MercuryParticipantListRenderer","TooltipData","WebMessengerThreadPermalinks","WorkForeignEntityInfo.bs","prop-types","react","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$2=function(a){var b=e.props,f=b.slot,g=b.slotOffset,h=b.threadFBID,i=b.totalSlots;h&&c("requireWeak")("FantaTabActions",function(a){a.openTab(e.props.numOtherParticipants===1?d("MercuryIDs").getThreadIDFromUserID(h):d("MercuryIDs").getThreadIDFromThreadFBID(h),["divebar_groups"])});c("JSResource").loadAll([c("JSResource")("MessengerChatSidebarSlotsTypedLogger").__setRef("ChatSidebarThread.react"),c("JSResource")("ChatOpenTabEventLogger").__setRef("ChatSidebarThread.react")],function(a,b){new a().setSlotClicked(g+f).setSlotsVisibleBeforeScrolling(i).setRelativeSlotClicked(f).setSidebarSection("groups").log(),h&&b.logClickOpen(e.props.referrer,h)});a.preventDefault()},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){var a=this.props.name,b=i(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),e=a?b:void 0,f=this.props.image?[]:j(this.props.participants);a=a?a:b;b=!d("WorkForeignEntityInfo.bs").areAllCoworkers(this.props.participants);return h.jsx("div",babelHelpers["extends"]({},d("TooltipData").propsFor(this.$1()),{children:h.jsx(c("ChatSidebarItem.react"),{birthday:this.props.birthday,context:e,href:this.props.threadFBID&&d("WebMessengerThreadPermalinks").getThreadURIFromServerID(this.props.threadFBID),imageSize:this.props.imageSize,image:this.props.image,images:f,isDoNotDisturb:this.props.isDoNotDisturb,isMultiCompany:b,name:a,nameCanHaveEmoji:!0,onClick:this.$2,referrer:this.props.referrer,status:this.props.status,threadID:this.props.threadFBID&&d("MercuryIDs").getThreadIDFromThreadFBID(this.props.threadFBID),unreadCount:this.props.unreadCount,showRelationshipIndicator:!1})}))};e.$1=function(){return d("ChatSidebarParticipantTooltipBuilder").buildParticipantsTooltip(this.props.participants,this.props.numOtherParticipants)};return b}(h.PureComponent);a.propTypes={birthday:c("prop-types").bool,image:c("prop-types").string,imageSize:c("prop-types").number,name:c("prop-types").string,participants:c("prop-types").array.isRequired,numOtherParticipants:c("prop-types").number.isRequired,referrer:c("prop-types").string,slot:c("prop-types").number,slotOffset:c("prop-types").number,status:c("prop-types").number,threadFBID:c("prop-types").string,totalSlots:c("prop-types").number,unreadCount:c("prop-types").number};a.defaultProps={numOtherParticipants:d("ChatSidebarParticipantTooltipBuilder").MAX_NUM_PARTICIPANTS_TO_RENDER};function i(a,b,d){return new(c("MercuryParticipantListRenderer"))().setIsNewThread(!a).setUseShortName(d>1).setTotalParticipantCount(d).renderParticipantList(b).toString()}function j(a){return a.map(function(a){return a.image_src}).filter(function(a){return a})}g["default"]=a}),98);
__d("ChatSidebarGroupThreadsGroup.react",["cx","ChatSidebarConstants","ChatSidebarThread.react","MercuryIDs","PresencePrivacy","PresenceStatus","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$1=function(a,b){var f=a.mercury_thread.participants;f=f.map(function(a){return typeof a==="string"&&d("MercuryIDs").isValid(a)?d("MercuryIDs").getUserIDFromParticipantID(a):a});var g=e.props.isDisconnected||c("PresencePrivacy").isUserOffline();return i.jsx("li",{className:"_42fz"+(g?" _570-":""),"data-id":a.uid,children:i.jsx(c("ChatSidebarThread.react"),{image:a.mercury_thread.image_src,imageSize:d("ChatSidebarConstants").getImageSize(),name:a.mercury_thread.name,participants:a.participants_to_render,numOtherParticipants:f.length-1,referrer:"ordered_list",slot:b,slotOffset:e.props.slotOffset,status:c("PresenceStatus").getGroup(f),threadFBID:a.uid,totalSlots:e.props.totalSlots})},a.uid)},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){return i.jsx("ul",{children:this.props.groups.map(this.$1)})};return b}(i.Component);a.propTypes={groups:c("prop-types").array.isRequired,isDisconnected:c("prop-types").bool,slotOffset:c("prop-types").number,totalSlots:c("prop-types").number};g["default"]=a}),98);
__d("ChatSidebarItemPlaceholder.react",["cx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=50+Math.ceil(50-2*(Math.pow(7+a.slot,2)%10));return i.jsx("li",{className:"_42fz"+(a.isDisconnected?" _570-":""),children:i.jsx("div",{className:"_55ln _qhr",children:i.jsxs("div",{className:"_55lp",children:[i.jsx("span",{className:"_1qh _55lq"}),i.jsx("span",{className:"_55lr",children:i.jsx("span",{className:"_1qh",style:{width:String(b)+"px"}})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ChatSidebarOfflineOverlayWrapper.react",["BootloadOnRender.react","JSResource","LazyComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("BootloadOnRender.react"),{component:h.jsx(c("LazyComponent.react"),{}),loader:c("JSResource")("ChatOfflineOverlay.react").__setRef("ChatSidebarOfflineOverlayWrapper.react"),placeholder:h.jsx("div",{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ChatSidebarPymmListSection.react",["BootloadOnRender.react","JSResource","LazyComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("BootloadOnRender.react"),{loader:c("JSResource")("ChatSidebarPymmListContainer.react").__setRef("ChatSidebarPymmListSection.react"),placeholder:h.jsx("div",{}),component:h.jsx(c("LazyComponent.react"),{pymmList:a.pymmList})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ChatSidebarUser.react",["ChatSidebarItem.react","JSResource","MercuryIDs","WebMessengerThreadPermalinks","react","requireWeak"],(function(a,b,c,d,e,f,g){var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.handleMouseEnter=function(){var a=e.props.userID;e.props.onMouseEnter&&e.props.onMouseEnter(a)},e.$1=function(a){var b=e.props,f=b.sectionName,g=b.slot,h=b.slotOffset,i=b.totalSlots,j=b.userID,k=d("MercuryIDs").getThreadIDFromUserID(j);c("requireWeak")("FantaTabActions",function(a){a.openTab(k,["divebar_"+f])});c("JSResource").loadAll([c("JSResource")("MessengerChatSidebarSlotsTypedLogger").__setRef("ChatSidebarUser.react"),c("JSResource")("ChatOpenTabEventLogger").__setRef("ChatSidebarUser.react")],function(a,b){new a().setSlotClicked(h+g).setSlotsVisibleBeforeScrolling(i).setRelativeSlotClicked(g).setSidebarSection(f).log(),b.logUserClickOpen(f,j,{global_slot:g})});a.preventDefault()},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){var a=d("WebMessengerThreadPermalinks").getThreadURIFromUserID(this.props.userID);return h.jsx(c("ChatSidebarItem.react"),{onClick:this.$1,onMouseEnter:this.handleMouseEnter,href:a,imageSize:this.props.imageSize,image:this.props.image,isDoNotDisturb:this.props.isDoNotDisturb,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:!1,showRelationshipIndicator:this.props.showRelationshipIndicator,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact,userID:this.props.userID,threadID:d("MercuryIDs").getThreadIDFromUserID(this.props.userID)})};return b}(h.PureComponent);g["default"]=a}),98);
__d("ChatSidebarUserGroupProfile.react",["cx","ChatSidebarItemPlaceholder.react","ChatSidebarUser.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.slot,d=a.profileData;if(d==null)return i.jsx(c("ChatSidebarItemPlaceholder.react"),{isDisconnected:a.isDisconnected,slot:b},"placeholder"+b);var e=d.shortProfile;if(!e.id)return null;var f=d.status,g=f!==2?d.lastActiveTime:null,h=a.isDisconnected||d.presencePrivacyAllows!==!0,j=a.sectionName==="nearby"?e.location:null;return i.jsx("li",{className:"_42fz"+(h?" _570-":""),"data-id":e.id,children:i.jsx(c("ChatSidebarUser.react"),{birthday:e.is_birthday,image:e.thumbSrc,imageSize:a.imageSize,isDoNotDisturb:a.doNotDisturbMap[e.id]===!0,isPlayingGame:d.isPlaying===!0,name:e.name,onMouseEnter:a.onMouseEnter,showHoverCard:a.showHoverCard,showRelationshipIndicator:e.show_relationship_indicator,sectionName:a.sectionName,slot:b,slotOffset:a.slotOffset,status:f,statusTime:g,totalSlots:a.totalSlots,userID:e.id,unreadCount:d.unreadCount,isMessengerOnlyContact:e.is_messenger_only,context:j})},e.id)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ChatSidebarUserGroupContainer.react",["ChatSidebarUserGroupProfile.react","CurrentUser","WorkChatAvailabilityStatusLoader","clearTimeout","emptyFunction","onAfterLoadSafe","promiseDone","react","requireWeak","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=400,j=5e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this,b)||this;d.$1=null;d.$2={};d.state={doNotDisturbMap:{}};d.$6=function(){d.$3||(d.$3=c("setTimeoutAcrossTransitions")(function(){c("requireWeak")("FantaTabsEagerBootloader",function(a){return a.bootload()}),d.$6=c("emptyFunction")},i))};d.$7=function(){c("clearTimeout")(d.$3),d.$3=null};d.$4();return d}var e=b.prototype;e.componentDidMount=function(){var a=this;c("onAfterLoadSafe")(function(){c("CurrentUser").isWorkUser()&&c("promiseDone")(d("WorkChatAvailabilityStatusLoader").load(),function(b){var c=b.store;a.props.ids.forEach(function(b){c.subscribeUser(b,a)});a.setState({doNotDisturbMap:a.$5(a.props.ids)});c.fetchUsers(a.props.ids);a.$1=c.addListener(function(){a.setState({doNotDisturbMap:a.$5(a.props.ids)})})})})};e.componentDidUpdate=function(){this.$4()};e.componentWillUnmount=function(){this.$1&&this.$1.remove()};e.UNSAFE_componentWillReceiveProps=function(a){var b=this;if(c("CurrentUser").isWorkUser()&&d("WorkChatAvailabilityStatusLoader").isLoaded()){var e=d("WorkChatAvailabilityStatusLoader").getStoreEnforce();e.fetchUsers(a.ids.filter(function(a){return b.props.ids.indexOf(a)<0}));this.props.ids.forEach(function(a){return e.unsubscribeUser(a,b)});a.ids.forEach(function(a){return e.subscribeUser(a,b)})}};e.render=function(){var a=this,b=this.props.ids.filter(function(b){return!!a.props.usersDetailedData[b]||a.$2[b]==null||a.$2[b]===!1});return h.jsx("ul",{onMouseEnter:this.$6,onMouseLeave:this.$7,children:b.map(function(b,d){return h.jsx(c("ChatSidebarUserGroupProfile.react"),{doNotDisturbMap:a.state.doNotDisturbMap,imageSize:a.props.imageSize,isDisconnected:a.props.isDisconnected,onMouseEnter:a.props.onMouseEnterItem,showHoverCard:a.props.showHoverCard,sectionName:a.props.sectionName,slotOffset:a.props.slotOffset,totalSlots:a.props.totalSlots,profileData:a.props.usersDetailedData[b],id:b,slot:d},b)})})};e.$5=function(a){if(!c("CurrentUser").isWorkUser()||!d("WorkChatAvailabilityStatusLoader").isLoaded())return{};var b=d("WorkChatAvailabilityStatusLoader").getStoreEnforce(),e={};a.forEach(function(a){e[a]=b.getIsDoNotDisturb(a)});return e};e.$4=function(){var a=this;this.props.ids.forEach(function(b){var c=a.props.usersDetailedData[b];c?a.$8(b):a.$9(b)})};e.$9=function(a){var b=this;this.$2[a]===void 0&&(this.$2[a]=c("setTimeoutAcrossTransitions")(function(){delete b.$2[a],b.forceUpdate()},j))};e.$8=function(a){var b=this.$2[a];if(!b)return;c("clearTimeout")(b);delete this.$2[a]};return b}(h.Component);g["default"]=a}),98);
__d("ChatSidebarOrderedList.react",["cx","fbt","ix","Bootloader","ChatConfig","ChatOptions","ChatQuietLinks","ChatReliabilityInstrumentation","ChatSidebarActions","ChatSidebarAdminedPagesSection.react","ChatSidebarConstants","ChatSidebarCreateNewGroupItem.react","ChatSidebarGroupThreadsGroup.react","ChatSidebarHeader.react","ChatSidebarOfflineOverlayWrapper.react","ChatSidebarPymmListSection.react","ChatSidebarRecentCalls","ChatSidebarUserGroupContainer.react","Image.react","LeftRight.react","ReactDOM","Run","SRLink.react","Scroll","gkx","ifRequired","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=location.pathname==="/"||location.pathname==="/home.php";var l=!c("gkx")("1475723")&&!a;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isDisconnected:!1},c.$1=null,c.$2=null,c.$3=null,b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){var a=this;d("ChatQuietLinks").nukeLinks(d("ReactDOM").findDOMNode(this.refs.noLinks));d("Run").onAfterLoad(function(){d("ChatSidebarActions").afterDomLoad(),a.$4()})};e.componentWillUnmount=function(){this.$1!=null&&this.$1.unsubscribe()};e.render=function(){if(this.props.hide)return null;var a=this.props.offlineUsers&&this.props.offlineUsers.length>0?this.$5():this.$6();a=k.jsxs(k.Fragment,{children:[k.jsxs("div",{ref:"noLinks",children:[this.$7(),this.$8()]}),this.$9(),k.jsxs("div",{ref:"noLinks",children:[this.$10(),this.$11(),this.$12(),a]})]});return k.jsxs("div",{"data-testid":void 0,children:[k.jsx("div",{ref:"noLinks",children:this.$13()}),k.jsx("div",{ref:"noLinks",children:this.$14()}),k.jsx("div",{ref:"noLinks",children:this.$15()}),!this.$16()&&a,this.$17()]})};e.$18=function(a){var b=this.props.scrollContainer;if(!b)return;var e=b.clientHeight,f=b.scrollHeight,g=d("Scroll").getTop(b),h=Math.min(a.offsetTop,f-e);g!==h&&c("ifRequired")("Animation",function(a){var c=Math.abs(h-g)/b.clientHeight*500;new a(b).to("scrollTop",h).ease(a.ease.end).duration(c).go()},function(){d("Scroll").setTop(b,h)})};e.$7=function(){if(!d("ChatConfig").getBool("show_header"))return null;var a=this.state.isDisconnected||this.props.isUserOffline;return k.jsx(c("ChatSidebarHeader.react"),{className:a?"_570-":"",children:i._(/*FBT_CALL*/"Contacts"/*FBT_CALL*/)})};e.$5=function(){var a=d("ChatSidebarConstants").getImageSize(),b=this.props.offlineUsers.slice(0,-2),e=i._(/*FBT_CALL*/"More contacts"/*FBT_CALL*/),f=i._(/*FBT_CALL*/"These contacts can't see you on chat."/*FBT_CALL*/);return k.jsxs(k.Fragment,{children:[k.jsx(c("ChatSidebarHeader.react"),{children:e}),k.jsxs(c("ChatSidebarHeader.react"),{className:"_5j9-",children:[f," ",k.jsx("a",{ajaxify:"/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator",href:"#",rel:"dialog",children:i._(/*FBT_CALL*/"Edit"/*FBT_CALL*/)})]}),k.jsx(c("ChatSidebarUserGroupContainer.react"),{ids:b,imageSize:a,isDisconnected:this.state.isDisconnected,loadExtras:this.props.isAfterDomLoad,onMouseEnterItem:this.props.onMouseEnterItem,sectionName:"offline_users",showHoverCard:this.props.isSidebar,slotOffset:this.$19(),totalSlots:this.props.maxItemSlots,usersDetailedData:this.props.usersDetailedData})]})};e.$6=function(){var a=this;if(this.props.availableUsers.length===0)return null;if(!this.props.isAfterDomLoad){var b=d("ChatSidebarConstants").getItemHeight();return k.jsx("div",{style:{height:b*this.props.availableUsers.length}})}b=d("ChatSidebarConstants").getImageSize();var e=i._(/*FBT_CALL*/"{MORE ONLINE CONTACTS} ({count})"/*FBT_CALL*/,[i._param("MORE ONLINE CONTACTS",i._(/*FBT_CALL*/"More contacts"/*FBT_CALL*/)),i._param("count",this.props.availableUsers.length)]);return k.jsxs(k.Fragment,{children:[k.jsx(c("ChatSidebarHeader.react"),{ref:function(b){a.$3=b},onClick:function(){return a.$18(d("ReactDOM").findDOMNode(a.$3))},children:e}),k.jsx(c("ChatSidebarUserGroupContainer.react"),{ids:this.props.availableUsers,imageSize:b,isDisconnected:this.state.isDisconnected,loadExtras:this.props.isAfterDomLoad,onMouseEnterItem:this.props.onMouseEnterItem,sectionName:"more_online_friends",showHoverCard:this.props.isSidebar,slotOffset:this.$19(),totalSlots:this.props.maxItemSlots,usersDetailedData:this.props.usersDetailedData})]})};e.$19=function(){var a=this.$20();a+=this.$21();var b=this.props.groups;a+=this.$22(b.length);return a};e.$9=function(){return!d("ChatConfig").getBool("nearby_friends_www_chatbar")||this.props.nearby.length===0?null:k.jsx(c("ChatSidebarHeader.react"),{ref:"nearbySeparator",children:k.jsxs(c("LeftRight.react"),{children:[i._(/*FBT_CALL*/"NEARBY"/*FBT_CALL*/),k.jsx(c("SRLink.react"),{target:"_blank",href:"/help/android-app/291236034364603",children:k.jsx(c("Image.react"),{className:"_3-90",src:j("129548")})})]})})};e.$11=function(){if(!d("ChatConfig").getBool("nearby_friends_www_chatbar")||this.props.nearby.length===0)return null;var a=this.$20(),b=d("ChatSidebarConstants").getImageSize();return k.jsx(c("ChatSidebarUserGroupContainer.react"),{ids:this.props.nearby,imageSize:b,isDisconnected:this.state.isDisconnected,loadExtras:this.props.isAfterDomLoad,onMouseEnterItem:this.props.onMouseEnterItem,sectionName:"nearby",showHoverCard:this.props.isSidebar,slotOffset:a,totalSlots:this.props.maxItemSlots,usersDetailedData:this.props.usersDetailedData})};e.$21=function(){return this.props.nearby.length};e.$12=function(){var a=this.state.isDisconnected||this.props.isUserOffline,b=this.props.groups,d=this.$20()+this.$21();if(this.$23())return k.jsxs(k.Fragment,{children:[this.$24(),k.jsx("ul",{children:k.jsx("li",{className:"_42fz"+(a?" _570-":""),children:k.jsx(c("ChatSidebarCreateNewGroupItem.react"),{slot:0,slotOffset:d,totalSlots:this.props.maxItemSlots})})})]});else if(c("ChatOptions").getSetting("hide_groups")||this.props.groups.length===0)return null;return k.jsxs(k.Fragment,{children:[this.$24(),k.jsx(c("ChatSidebarGroupThreadsGroup.react"),{groups:b.slice(0,this.$22(b.length)),isDisconnected:this.state.isDisconnected,loadExtras:this.props.isAfterDomLoad,slotOffset:d,totalSlots:this.props.maxItemSlots})]})};e.$24=function(){var a=this,b=this.state.isDisconnected||this.props.isUserOffline;return k.jsx(c("ChatSidebarHeader.react"),{ref:function(b){a.$2=b},className:b?"_570-":"",onClick:function(){return a.$18(d("ReactDOM").findDOMNode(a.$2))},children:i._(/*FBT_CALL*/"GROUP CONVERSATIONS"/*FBT_CALL*/)})};e.$22=function(a){if(this.$23())return 1;else if(a===0)return 0;return Math.min(a,d("ChatConfig").getNumber("num_groups_to_show"))};e.$8=function(){var a=d("ChatSidebarConstants").getImageSize();return k.jsx(c("ChatSidebarUserGroupContainer.react"),{ids:this.props.topUsers,imageSize:a,isDisconnected:this.state.isDisconnected,loadExtras:this.props.isAfterDomLoad,onMouseEnterItem:this.props.onMouseEnterItem,sectionName:"ordered_list",showHoverCard:this.props.isSidebar,slotOffset:0,totalSlots:this.props.maxItemSlots,usersDetailedData:this.props.usersDetailedData})};e.$20=function(){return this.props.topUsers.length};e.$14=function(){var a=this.props.pymmList;if(a==null)return null;a=a.pages;return this.props.isSidebar!==!0||!d("ChatConfig").getBool("show_businesses")||a==null||a.length===0?null:k.jsx(c("ChatSidebarPymmListSection.react"),{pymmList:a})};e.$13=function(){return l||!d("ChatConfig").getBool("show_admined_pages")||this.props.adminedPages.length===0||this.props.pageListModule==null?null:k.jsx(c("ChatSidebarAdminedPagesSection.react"),{adminedPages:this.props.adminedPages,onMouseEnterItem:this.props.onMouseEnterItem,pageListModule:this.props.pageListModule})};e.$10=function(){return null};e.$15=function(){return c("ChatSidebarRecentCalls").ChatSidebarRecentCalls?k.jsx(c("ChatSidebarRecentCalls").ChatSidebarRecentCalls,{recentCalls:this.props.recentCalls,usersDetailedData:this.props.usersDetailedData}):null};e.$4=function(){var a=this;c("Bootloader").loadModules(["ChannelConnection"],function(b){a.$1=b.subscribe([b.CONNECTED,b.RECONNECTING,b.SHUTDOWN,b.MUTE_WARNING,b.UNMUTE_WARNING],function(){var c=b.disconnected();c!==a.state.isDisconnected&&(c?d("ChatReliabilityInstrumentation").logCHANNEL_DISCONNECT():d("ChatReliabilityInstrumentation").logCHANNEL_CONNECT(),a.setState({isDisconnected:c}))})},"ChatSidebarOrderedList.react")};e.$23=function(){return this.props.groups.length===0&&!c("ChatOptions").getSetting("hide_groups")};e.$16=function(){return this.props.isSidebar!==!0&&this.props.isUserOffline===!0};e.$17=function(){return!this.$16()?null:k.jsx(c("ChatSidebarOfflineOverlayWrapper.react"),{})};return b}(k.PureComponent);g["default"]=b}),98);
__d("ChatSidebarPageListContainer.react",["cx","ChatSidebarAdminedPage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.adminedPages.length;return i.jsx("ul",{className:"_4kqp",children:a.adminedPages.map(function(d,e){return i.jsx(c("ChatSidebarAdminedPage.react"),{page:d,slot:e,slotOffset:0,totalSlots:b,onMouseEnter:a.onMouseEnter},d.id)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f,g){"use strict";a={RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}};b=c("keyMirrorRecursive")(a);d=b;g["default"]=d}),98);
__d("MNCommerceDialogStateStore",["FluxStore","MNCommerceActionTypes","MessengerDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,c("MessengerDispatcher"))||this;b.$MNCommerceDialogStateStore1=null;b.$MNCommerceDialogStateStore2=null;return b}var d=b.prototype;d.__onDispatch=function(a){var b=a.type;switch(b){case c("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=a.dialogContainer;this.$MNCommerceDialogStateStore2=a.state;this.__emitChange();break;case c("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};d.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};d.getState=function(){return this.$MNCommerceDialogStateStore2};return b}(c("FluxStore"));a.__moduleID=f.id;b=new a();g["default"]=b}),98);
__d("FluxMixinLegacyInstrumentation",["FluxContainerInstrumentation","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function h(a){return a.constructor.displayName||a.constructor.name||"FluxMixinLegacy(unknown)"}var i={_callCalculateState:function(){var a=d("FluxContainerInstrumentation").onCalculateStateStart(h(this)),b=this._FluxMixinLegacyInstrumentationCalculateStateCaller.apply(this,arguments);a&&a();return b},UNSAFE_componentWillMount:function(){this.constructor._FluxMixinLegacyInstrumentationOnInitCalled||(d("FluxContainerInstrumentation").onInit(this.constructor),this.constructor._FluxMixinLegacyInstrumentationOnInitCalled=!0)},_FluxMixinLegacyInstrumentationEmittedChangeStores:null,_getCurrentDispatchForInstrumentation:function(){return d("FluxContainerInstrumentation").updateTracking&&d("FluxContainerInstrumentation").updateTracking.getCurrentDispatch()},_onInitialStateForInstrumentation:function(){d("FluxContainerInstrumentation").updateTracking&&d("FluxContainerInstrumentation").updateTracking.initialState(this,h(this))},_onReceivePropsForInstrumentation:function(a){d("FluxContainerInstrumentation").updateTracking&&d("FluxContainerInstrumentation").updateTracking.receiveProps(this,h(this),a)},_addStoreEmitForInstrumentation:function(a){d("FluxContainerInstrumentation").updateTracking&&d("FluxContainerInstrumentation").updateTracking.shouldRecord()&&(this._FluxMixinLegacyInstrumentationEmittedChangeStores=this._FluxMixinLegacyInstrumentationEmittedChangeStores||[],d("FluxContainerInstrumentation").addStoreDependencies(this._FluxMixinLegacyInstrumentationEmittedChangeStores,a))},_collectStoreEmitsForInstrumentation:function(){var a=this._FluxMixinLegacyInstrumentationEmittedChangeStores;this._FluxMixinLegacyInstrumentationEmittedChangeStores=null;return a},_logStoreEmitsForInstrumentation:function(a,b){d("FluxContainerInstrumentation").updateTracking&&d("FluxContainerInstrumentation").updateTracking.storeEmitChange(this,h(this),a||[],b)},componentDidUpdate:function(a,b){d("FluxContainerInstrumentation").onDidUpdate(this,h(this),a,this.props,b,this.state)}};function a(a){d("FluxContainerInstrumentation").hasInstrumentation()&&(a.mixins=a.mixins||[],a.mixins.push(i),a._FluxMixinLegacyInstrumentationCalculateStateCaller=a._callCalculateState,delete a._callCalculateState);return a}g.addInstrumentation=a}),98);
__d("StoreBasedStateMixinHelper",["invariant","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a,this.$2=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.subscribeCallback=function(a,b){var c=this.$1.map(function(c){var d=b!=null?function(d){b&&b(c);return a(d)}:a;if(c.hasChanged&&c.getDispatchToken&&c.addListener)return c.addListener(d);else if(c.subscribe)return c.subscribe("change",d);else if(c.addListener)return c.addListener("change",d);else g(0,574)});this.$1.length>0&&this.$2.addSubscriptions.apply(this.$2,c)};c.release=function(){this.$2.release()};return a}();f["default"]=a}),66);
__d("PureStoreBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";a=function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return b("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function(){return this.constructor.calculateState()},getInitialState:function(){this._onInitialStateForInstrumentation&&this._onInitialStateForInstrumentation();return this._callCalculateState()},UNSAFE_componentWillMount:function(){var a=this;this.constructor.calculateState||g(0,2396);this._recalculateStateID=null;var d=function(){if(a.isMounted()){var b=a._collectStoreEmitsForInstrumentation?a._collectStoreEmitsForInstrumentation():null,c=a._callCalculateState();a.setState(a._logStoreEmitsForInstrumentation!=null?function(){b!=null&&a._logStoreEmitsForInstrumentation&&a._logStoreEmitsForInstrumentation(b);return c}:c)}a._recalculateStateID=null};this._mixin=new(b("StoreBasedStateMixinHelper"))(c);this._mixin.subscribeCallback(function(){a._recalculateStateID===null&&(a._recalculateStateID=b("setImmediate")(d))},this._addStoreEmitForInstrumentation)},componentWillUnmount:function(){this._mixin.release(),this._mixin=null}})};e.exports=a}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","createReactClass_DEPRECATED","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=c("createReactClass_DEPRECATED")({displayName:"MNCommerceDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceDialogStateStore"))],statics:{calculateState:function(){var a=c("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:a}}},render:function(){var a=this.state.dialogContainer;return!a?null:h.jsx(a,{})}});b=a;g["default"]=b}),98);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","ReactDOM","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){d("ReactDOM").render(h.jsx(c("MNCommerceDialogContainer.react"),{}),a)}g.mount=a}),98);
__d("ChatGroupCannotAddBackDialog.react",["fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FDSText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx(c("FDSModal.react"),{isShown:!0,onHide:this.props.onHide,footer:i.jsx(c("FDSModalFooter.react"),{primaryButton:i.jsx(c("FDSButton.react"),{use:"primary",label:h._(/*FBT_CALL*/"Close"/*FBT_CALL*/),onClick:this.props.onHide})}),header:i.jsx(c("FDSModalHeader.react"),{title:h._(/*FBT_CALL*/"{name} left the group"/*FBT_CALL*/,[h._param("name",this.props.name)])}),width:410,children:i.jsx(c("FDSSection.react"),{children:i.jsx(c("FDSText.react"),{size:"body1",children:h._(/*FBT_CALL*/"{name} can't be added to this group again."/*FBT_CALL*/,[h._param("name",this.props.name)])})})})};return b}(i.Component);g["default"]=a}),98);
__d("ChatTabAddBackPreventedQuery",["ChatTabAddBackPreventedQuery.graphql","RelayFBEnvironment","RelayModern","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("ChatTabAddBackPreventedQuery.graphql");function a(a,b){c("promiseDone")(d("RelayModern").fetchQuery(c("RelayFBEnvironment"),i,{thread_id:a}),function(a){b(a.message_thread.non_addable_recipients.nodes.map(function(a){return a.id}))})}g.fetch=a}),98);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","OrderedFriendsList","ShortProfiles"],(function(a,b,c,d,e,f){var g=[],h={},i={},j={},k=[],l=[],m=[],n=!1,o=!1;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){var c;b=b||{};b.kanaNormalization=!0;c=a.call(this,b)||this;c.showDefaultList=b.showDefaultList||!1;return c}var d=c.prototype;d.dirty=function(){this.$MercuryTypeaheadDataSource1=g;this.localCache=i;this.queryCache=h;this.queryIDs=j;this.defaultList=k;this.topEntryIDs=l;this.nullStateExclusions=m;return this};d.bootstrap=function(){var a=this;if(n||o)return!1;o=!0;b("ShortProfiles").fetchAll().then(function(){a.updateBootstrapData(),o=!1,n=!0,a.showDefaultList&&a.inform("show-default",{impressions:a.defaultList})},function(){});return!0};d.updateBootstrapData=function(){var a=this.getCachedShortProfileIDs(),c=b("CurrentUser").isWorkUser()?"fb4c":"friend";a=a.map(function(a){var d=b("ShortProfiles").getNow(a),e=a==b("CurrentUser").getID()?c:d.type,f=[d.additionalName,d.alternateName].concat(d.searchTokens||[]).join(" "),g=d.name,h=null;return{uid:a,index:b("OrderedFriendsList").getActiveRank(a),text:g,subtext:h,tokens:f,localized_text:d.name,additional_text:d.additionalName,photo:d.thumbSrc,render_type:e,type:"user"}});a.length&&this.addEntries(a);if(!this.showDefaultList)return;l=a.sort(function(a,b){return a.index-b.index}).map(function(a){return a.uid});this.defaultList=this.buildData(l.slice(0,5));this.topEntryIDs=l};d.updateDefaultList=function(a){var b=this;if(!a)return;this.nullStateExclusions.includes(a)?this.nullStateExclusions=this.nullStateExclusions.filter(function(b){return b!==a}):this.nullStateExclusions.push(a);k=this.topEntryIDs.filter(function(a){return!b.nullStateExclusions.includes(a)});this.defaultList=this.buildData(k.slice(0,5))};d.query=function(b,c,d,e){c=c||b.length===1;return a.prototype.query.call(this,b,c,d,e)};d.getQueryData=function(b,c){return babelHelpers["extends"]({},a.prototype.getQueryData.call(this,b,c))};d.setEntry=function(a,b){this.$MercuryTypeaheadDataSource1[a]=b};d.getEntry=function(a){return this.$MercuryTypeaheadDataSource1[a]||null};d.getCachedShortProfileIDs=function(){var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c.type==="friend"||c.type==="fb4c"});return a};d.isBootstrapped=function(){return n};d.isBootstrapping=function(){return o};d.processEntries=function(c,d){c=c.map(function(a){a.index==null&&(a.render_type==="friend"||a.render_type==="fb4c")&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return a.prototype.processEntries.call(this,c)};d.mergeUids=function(b,c,d,e){var f=this;c=c.sort(function(a,b){return f.getEntry(a).index-f.getEntry(b).index});return a.prototype.mergeUids.call(this,b,c,d,e)};d.setShowDefaultList=function(a){this.showDefaultList=a};return c}(b("DataSource"));e.exports=a}),null);
__d("ChatTabTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadDataSource"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){c=c||{};c.maxResults=5;c.showDefaultList=b("MercuryConfig").ChatComposer;c=a.call(this,c)||this;c.$ChatTabTypeaheadDataSource1=!0;return c}var d=c.prototype;d.buildData=function(b){var c=this,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=!this.$ChatTabTypeaheadDataSource1;b.forEach(function(b){var i=a.prototype.getEntry.call(c,b);switch(i.render_type){case"friend":d.push(b);break;case"thread":c.$ChatTabTypeaheadDataSource1&&e.push(b);break;case"commerce_page":k||h.push(b);break;case"non_friend":f.push(b);break;case"fb4c":g.push(b);break;case"page":k||h.push(b);break;case"internal_bot_page":i=!k||i.can_add_to_group_chat;i&&j.push(b);break;default:break}},this);b=i.concat(d,g,e,h,f,j);return a.prototype.buildData.call(this,b)};d.query=function(b,c,d,e){return a.prototype.query.call(this,b,c,d,e)};d.respond=function(b,c,d){return a.prototype.respond.call(this,b,c,d)};d.setShowThreads=function(a){this.$ChatTabTypeaheadDataSource1=a};return c}(b("MercuryTypeaheadDataSource"));e.exports=a}),null);
__d("ChatTabTypeaheadAddMemberDataSource",["fbt","ChatGroupCannotAddBackDialog.react","ChatTabAddBackPreventedQuery","ChatTabTypeaheadDataSource","DOM","ReactDOM","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("DOM").create("div",{id:"ChatTabTypeaheadAddMemberDataSource_dialog"}),k=!1,l=new Map();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}var c=b.prototype;c.setQueryData=function(b,c){b.thread_id&&d("ChatTabAddBackPreventedQuery").fetch(b.thread_id,function(a){l.set(b.thread_id,new Set(a))});return a.prototype.setQueryData.call(this,b,c)};c.processResults=function(b,c,d){var e=l.get(this.queryData.thread_id);e&&c.forEach(function(a,b,c){e.has(a.uid)&&(c[b]=babelHelpers["extends"]({},a,{disabled:!0,subtext:h._(/*FBT_CALL*/"Left the group"/*FBT_CALL*/),onSelectDisabled:function(){return m(a.text)}}))});a.prototype.processResults.call(this,b,c,d)};return b}(c("ChatTabTypeaheadDataSource"));function m(a){if(k)return;k=!0;d("ReactDOM").render(i.jsx(c("ChatGroupCannotAddBackDialog.react"),{name:a,onHide:function(){d("ReactDOM").unmountComponentAtNode(j),k=!1}}),j)}g["default"]=a}),98);
__d("P2PActionConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({PAYMENT_METHODS_UPDATED:"credit_cards_updated",PAYMENT_METHODS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",PAYMENT_METHOD_SAVING:"credit_card_saving",PAYMENT_METHOD_ADDED:"credit_card_added",PAYMENT_METHOD_ADDED_ERROR:"credit_card_added_error",PAYMENT_METHOD_DELETED:"credit_card_deleted",PAYMENT_METHOD_DELETED_ERROR:"credit_card_deleted_error",PAYMENT_METHOD_UPDATED:"credit_card_updated",PAYMENT_METHOD_UPDATED_ERROR:"credit_card_updated_error",PRESET_PAYMENT_METHOD_UPDATED:"preset_credit_card_updated",PRESET_PAYMENT_METHOD_UPDATED_ERROR:"preset_credit_card_updated_error",PAYMENT_METHOD_VERIFIED:"credit_card_verified",PAYMENT_METHOD_VERIFIED_ERROR:"credit_card_verified_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});f["default"]=a}),66);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(c("ExplicitRegistrationReactDispatcher"));b=new a({strict:!1});g["default"]=b}),98);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;c("P2PDispatcher").register(b.onEventDispatched.bind(babelHelpers.assertThisInitialized(b)));h={dialogClass:null,dialogProps:null};return b}var d=b.prototype;d.getState=function(){return h};d.onEventDispatched=function(a){var b=a.type;a=a.data;switch(b){case c("P2PActionConstants").DIALOG_SHOWN:h.dialogClass=a.dialogClass;h.dialogProps=a.dialogProps;this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:h.dialogClass=null;h.dialogProps=null;this.emit("change");break}};return b}(c("EventEmitter"));b=new a();g["default"]=b}),98);
__d("P2PDialogContainer.react",["P2PDialogStore","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=b("P2PDialogStore").getState(),d.onDialogStoreChange=function(){d.setState(b("P2PDialogStore").getState())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.dialogStoreSub=b("P2PDialogStore").addListener("change",this.onDialogStoreChange)};d.componentWillUnmount=function(){this.dialogStoreSub&&(this.dialogStoreSub.remove(),this.dialogStoreSub=null)};d.render=function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return h.createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};return c}(h.Component);e.exports=a}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","ReactDOM","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){d("ReactDOM").render(h.jsx(c("P2PDialogContainer.react"),{}),a)}g.mount=a}),98);
__d("PagesPlatformActionConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"});b=a;f["default"]=b}),66);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("Dispatcher_DEPRECATED"))();g["default"]=a}),98);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;c("PagesPlatformRequestDispatcher").register(b.onEventDispatched.bind(babelHelpers.assertThisInitialized(b)));h={dialogClass:null,dialogProps:null};return b}var d=b.prototype;d.getState=function(){return h};d.onEventDispatched=function(a){var b=a.type;a=a.data;switch(b){case c("PagesPlatformActionConstants").DIALOG_SHOWN:h.dialogClass=a.dialogClass;h.dialogProps=a.dialogProps;this.emit("change");break;case c("PagesPlatformActionConstants").DIALOG_CLOSED:h.dialogClass=null;h.dialogProps=null;this.emit("change");break}};return b}(c("EventEmitter"));b=new a();g["default"]=b}),98);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","createReactClass_DEPRECATED","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");a=b("createReactClass_DEPRECATED")({displayName:"PagesPlatformDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("PagesPlatformDialogStore"))],statics:{calculateState:function(){return b("PagesPlatformDialogStore").getState()}},render:function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return h.createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});c=a;f["default"]=c}),66);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","ReactDOM","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){d("ReactDOM").render(h.jsx(c("PagesPlatformDialogContainer.react"),{}),a)}g.mount=a}),98);